/******/ (() => { // webpackBootstrap
/******/ 	"use strict";

// CONCATENATED MODULE: ./node_modules/whatwg-fetch/fetch.js
var global =
  (typeof globalThis !== 'undefined' && globalThis) ||
  (typeof self !== 'undefined' && self) ||
  (typeof global !== 'undefined' && global)

var support = {
  searchParams: 'URLSearchParams' in global,
  iterable: 'Symbol' in global && 'iterator' in Symbol,
  blob:
    'FileReader' in global &&
    'Blob' in global &&
    (function() {
      try {
        new Blob()
        return true
      } catch (e) {
        return false
      }
    })(),
  formData: 'FormData' in global,
  arrayBuffer: 'ArrayBuffer' in global
}

function isDataView(obj) {
  return obj && DataView.prototype.isPrototypeOf(obj)
}

if (support.arrayBuffer) {
  var viewClasses = [
    '[object Int8Array]',
    '[object Uint8Array]',
    '[object Uint8ClampedArray]',
    '[object Int16Array]',
    '[object Uint16Array]',
    '[object Int32Array]',
    '[object Uint32Array]',
    '[object Float32Array]',
    '[object Float64Array]'
  ]

  var isArrayBufferView =
    ArrayBuffer.isView ||
    function(obj) {
      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1
    }
}

function normalizeName(name) {
  if (typeof name !== 'string') {
    name = String(name)
  }
  if (/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {
    throw new TypeError('Invalid character in header field name')
  }
  return name.toLowerCase()
}

function normalizeValue(value) {
  if (typeof value !== 'string') {
    value = String(value)
  }
  return value
}

// Build a destructive iterator for the value list
function iteratorFor(items) {
  var iterator = {
    next: function() {
      var value = items.shift()
      return {done: value === undefined, value: value}
    }
  }

  if (support.iterable) {
    iterator[Symbol.iterator] = function() {
      return iterator
    }
  }

  return iterator
}

function Headers(headers) {
  this.map = {}

  if (headers instanceof Headers) {
    headers.forEach(function(value, name) {
      this.append(name, value)
    }, this)
  } else if (Array.isArray(headers)) {
    headers.forEach(function(header) {
      this.append(header[0], header[1])
    }, this)
  } else if (headers) {
    Object.getOwnPropertyNames(headers).forEach(function(name) {
      this.append(name, headers[name])
    }, this)
  }
}

Headers.prototype.append = function(name, value) {
  name = normalizeName(name)
  value = normalizeValue(value)
  var oldValue = this.map[name]
  this.map[name] = oldValue ? oldValue + ', ' + value : value
}

Headers.prototype['delete'] = function(name) {
  delete this.map[normalizeName(name)]
}

Headers.prototype.get = function(name) {
  name = normalizeName(name)
  return this.has(name) ? this.map[name] : null
}

Headers.prototype.has = function(name) {
  return this.map.hasOwnProperty(normalizeName(name))
}

Headers.prototype.set = function(name, value) {
  this.map[normalizeName(name)] = normalizeValue(value)
}

Headers.prototype.forEach = function(callback, thisArg) {
  for (var name in this.map) {
    if (this.map.hasOwnProperty(name)) {
      callback.call(thisArg, this.map[name], name, this)
    }
  }
}

Headers.prototype.keys = function() {
  var items = []
  this.forEach(function(value, name) {
    items.push(name)
  })
  return iteratorFor(items)
}

Headers.prototype.values = function() {
  var items = []
  this.forEach(function(value) {
    items.push(value)
  })
  return iteratorFor(items)
}

Headers.prototype.entries = function() {
  var items = []
  this.forEach(function(value, name) {
    items.push([name, value])
  })
  return iteratorFor(items)
}

if (support.iterable) {
  Headers.prototype[Symbol.iterator] = Headers.prototype.entries
}

function consumed(body) {
  if (body.bodyUsed) {
    return Promise.reject(new TypeError('Already read'))
  }
  body.bodyUsed = true
}

function fileReaderReady(reader) {
  return new Promise(function(resolve, reject) {
    reader.onload = function() {
      resolve(reader.result)
    }
    reader.onerror = function() {
      reject(reader.error)
    }
  })
}

function readBlobAsArrayBuffer(blob) {
  var reader = new FileReader()
  var promise = fileReaderReady(reader)
  reader.readAsArrayBuffer(blob)
  return promise
}

function readBlobAsText(blob) {
  var reader = new FileReader()
  var promise = fileReaderReady(reader)
  reader.readAsText(blob)
  return promise
}

function readArrayBufferAsText(buf) {
  var view = new Uint8Array(buf)
  var chars = new Array(view.length)

  for (var i = 0; i < view.length; i++) {
    chars[i] = String.fromCharCode(view[i])
  }
  return chars.join('')
}

function bufferClone(buf) {
  if (buf.slice) {
    return buf.slice(0)
  } else {
    var view = new Uint8Array(buf.byteLength)
    view.set(new Uint8Array(buf))
    return view.buffer
  }
}

function Body() {
  this.bodyUsed = false

  this._initBody = function(body) {
    /*
      fetch-mock wraps the Response object in an ES6 Proxy to
      provide useful test harness features such as flush. However, on
      ES5 browsers without fetch or Proxy support pollyfills must be used;
      the proxy-pollyfill is unable to proxy an attribute unless it exists
      on the object before the Proxy is created. This change ensures
      Response.bodyUsed exists on the instance, while maintaining the
      semantic of setting Request.bodyUsed in the constructor before
      _initBody is called.
    */
    this.bodyUsed = this.bodyUsed
    this._bodyInit = body
    if (!body) {
      this._bodyText = ''
    } else if (typeof body === 'string') {
      this._bodyText = body
    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
      this._bodyBlob = body
    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
      this._bodyFormData = body
    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
      this._bodyText = body.toString()
    } else if (support.arrayBuffer && support.blob && isDataView(body)) {
      this._bodyArrayBuffer = bufferClone(body.buffer)
      // IE 10-11 can't handle a DataView body.
      this._bodyInit = new Blob([this._bodyArrayBuffer])
    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
      this._bodyArrayBuffer = bufferClone(body)
    } else {
      this._bodyText = body = Object.prototype.toString.call(body)
    }

    if (!this.headers.get('content-type')) {
      if (typeof body === 'string') {
        this.headers.set('content-type', 'text/plain;charset=UTF-8')
      } else if (this._bodyBlob && this._bodyBlob.type) {
        this.headers.set('content-type', this._bodyBlob.type)
      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')
      }
    }
  }

  if (support.blob) {
    this.blob = function() {
      var rejected = consumed(this)
      if (rejected) {
        return rejected
      }

      if (this._bodyBlob) {
        return Promise.resolve(this._bodyBlob)
      } else if (this._bodyArrayBuffer) {
        return Promise.resolve(new Blob([this._bodyArrayBuffer]))
      } else if (this._bodyFormData) {
        throw new Error('could not read FormData body as blob')
      } else {
        return Promise.resolve(new Blob([this._bodyText]))
      }
    }

    this.arrayBuffer = function() {
      if (this._bodyArrayBuffer) {
        var isConsumed = consumed(this)
        if (isConsumed) {
          return isConsumed
        }
        if (ArrayBuffer.isView(this._bodyArrayBuffer)) {
          return Promise.resolve(
            this._bodyArrayBuffer.buffer.slice(
              this._bodyArrayBuffer.byteOffset,
              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength
            )
          )
        } else {
          return Promise.resolve(this._bodyArrayBuffer)
        }
      } else {
        return this.blob().then(readBlobAsArrayBuffer)
      }
    }
  }

  this.text = function() {
    var rejected = consumed(this)
    if (rejected) {
      return rejected
    }

    if (this._bodyBlob) {
      return readBlobAsText(this._bodyBlob)
    } else if (this._bodyArrayBuffer) {
      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))
    } else if (this._bodyFormData) {
      throw new Error('could not read FormData body as text')
    } else {
      return Promise.resolve(this._bodyText)
    }
  }

  if (support.formData) {
    this.formData = function() {
      return this.text().then(decode)
    }
  }

  this.json = function() {
    return this.text().then(JSON.parse)
  }

  return this
}

// HTTP methods whose capitalization should be normalized
var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']

function normalizeMethod(method) {
  var upcased = method.toUpperCase()
  return methods.indexOf(upcased) > -1 ? upcased : method
}

function Request(input, options) {
  if (!(this instanceof Request)) {
    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')
  }

  options = options || {}
  var body = options.body

  if (input instanceof Request) {
    if (input.bodyUsed) {
      throw new TypeError('Already read')
    }
    this.url = input.url
    this.credentials = input.credentials
    if (!options.headers) {
      this.headers = new Headers(input.headers)
    }
    this.method = input.method
    this.mode = input.mode
    this.signal = input.signal
    if (!body && input._bodyInit != null) {
      body = input._bodyInit
      input.bodyUsed = true
    }
  } else {
    this.url = String(input)
  }

  this.credentials = options.credentials || this.credentials || 'same-origin'
  if (options.headers || !this.headers) {
    this.headers = new Headers(options.headers)
  }
  this.method = normalizeMethod(options.method || this.method || 'GET')
  this.mode = options.mode || this.mode || null
  this.signal = options.signal || this.signal
  this.referrer = null

  if ((this.method === 'GET' || this.method === 'HEAD') && body) {
    throw new TypeError('Body not allowed for GET or HEAD requests')
  }
  this._initBody(body)

  if (this.method === 'GET' || this.method === 'HEAD') {
    if (options.cache === 'no-store' || options.cache === 'no-cache') {
      // Search for a '_' parameter in the query string
      var reParamSearch = /([?&])_=[^&]*/
      if (reParamSearch.test(this.url)) {
        // If it already exists then set the value with the current time
        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())
      } else {
        // Otherwise add a new '_' parameter to the end with the current time
        var reQueryString = /\?/
        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()
      }
    }
  }
}

Request.prototype.clone = function() {
  return new Request(this, {body: this._bodyInit})
}

function decode(body) {
  var form = new FormData()
  body
    .trim()
    .split('&')
    .forEach(function(bytes) {
      if (bytes) {
        var split = bytes.split('=')
        var name = split.shift().replace(/\+/g, ' ')
        var value = split.join('=').replace(/\+/g, ' ')
        form.append(decodeURIComponent(name), decodeURIComponent(value))
      }
    })
  return form
}

function parseHeaders(rawHeaders) {
  var headers = new Headers()
  // Replace instances of \r\n and \n followed by at least one space or horizontal tab with a space
  // https://tools.ietf.org/html/rfc7230#section-3.2
  var preProcessedHeaders = rawHeaders.replace(/\r?\n[\t ]+/g, ' ')
  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill
  // https://github.com/github/fetch/issues/748
  // https://github.com/zloirock/core-js/issues/751
  preProcessedHeaders
    .split('\r')
    .map(function(header) {
      return header.indexOf('\n') === 0 ? header.substr(1, header.length) : header
    })
    .forEach(function(line) {
      var parts = line.split(':')
      var key = parts.shift().trim()
      if (key) {
        var value = parts.join(':').trim()
        headers.append(key, value)
      }
    })
  return headers
}

Body.call(Request.prototype)

function Response(bodyInit, options) {
  if (!(this instanceof Response)) {
    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.')
  }
  if (!options) {
    options = {}
  }

  this.type = 'default'
  this.status = options.status === undefined ? 200 : options.status
  this.ok = this.status >= 200 && this.status < 300
  this.statusText = 'statusText' in options ? options.statusText : ''
  this.headers = new Headers(options.headers)
  this.url = options.url || ''
  this._initBody(bodyInit)
}

Body.call(Response.prototype)

Response.prototype.clone = function() {
  return new Response(this._bodyInit, {
    status: this.status,
    statusText: this.statusText,
    headers: new Headers(this.headers),
    url: this.url
  })
}

Response.error = function() {
  var response = new Response(null, {status: 0, statusText: ''})
  response.type = 'error'
  return response
}

var redirectStatuses = [301, 302, 303, 307, 308]

Response.redirect = function(url, status) {
  if (redirectStatuses.indexOf(status) === -1) {
    throw new RangeError('Invalid status code')
  }

  return new Response(null, {status: status, headers: {location: url}})
}

var DOMException = global.DOMException
try {
  new DOMException()
} catch (err) {
  DOMException = function(message, name) {
    this.message = message
    this.name = name
    var error = Error(message)
    this.stack = error.stack
  }
  DOMException.prototype = Object.create(Error.prototype)
  DOMException.prototype.constructor = DOMException
}

function fetch_fetch(input, init) {
  return new Promise(function(resolve, reject) {
    var request = new Request(input, init)

    if (request.signal && request.signal.aborted) {
      return reject(new DOMException('Aborted', 'AbortError'))
    }

    var xhr = new XMLHttpRequest()

    function abortXhr() {
      xhr.abort()
    }

    xhr.onload = function() {
      var options = {
        status: xhr.status,
        statusText: xhr.statusText,
        headers: parseHeaders(xhr.getAllResponseHeaders() || '')
      }
      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')
      var body = 'response' in xhr ? xhr.response : xhr.responseText
      setTimeout(function() {
        resolve(new Response(body, options))
      }, 0)
    }

    xhr.onerror = function() {
      setTimeout(function() {
        reject(new TypeError('Network request failed'))
      }, 0)
    }

    xhr.ontimeout = function() {
      setTimeout(function() {
        reject(new TypeError('Network request failed'))
      }, 0)
    }

    xhr.onabort = function() {
      setTimeout(function() {
        reject(new DOMException('Aborted', 'AbortError'))
      }, 0)
    }

    function fixUrl(url) {
      try {
        return url === '' && global.location.href ? global.location.href : url
      } catch (e) {
        return url
      }
    }

    xhr.open(request.method, fixUrl(request.url), true)

    if (request.credentials === 'include') {
      xhr.withCredentials = true
    } else if (request.credentials === 'omit') {
      xhr.withCredentials = false
    }

    if ('responseType' in xhr) {
      if (support.blob) {
        xhr.responseType = 'blob'
      } else if (
        support.arrayBuffer &&
        request.headers.get('Content-Type') &&
        request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1
      ) {
        xhr.responseType = 'arraybuffer'
      }
    }

    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {
      Object.getOwnPropertyNames(init.headers).forEach(function(name) {
        xhr.setRequestHeader(name, normalizeValue(init.headers[name]))
      })
    } else {
      request.headers.forEach(function(value, name) {
        xhr.setRequestHeader(name, value)
      })
    }

    if (request.signal) {
      request.signal.addEventListener('abort', abortXhr)

      xhr.onreadystatechange = function() {
        // DONE (success or failure)
        if (xhr.readyState === 4) {
          request.signal.removeEventListener('abort', abortXhr)
        }
      }
    }

    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)
  })
}

fetch_fetch.polyfill = true

if (!global.fetch) {
  global.fetch = fetch_fetch
  global.Headers = Headers
  global.Request = Request
  global.Response = Response
}

// CONCATENATED MODULE: ./node_modules/promise-polyfill/src/finally.js
/**
 * @this {Promise}
 */
function finallyConstructor(callback) {
  var constructor = this.constructor;
  return this.then(
    function(value) {
      // @ts-ignore
      return constructor.resolve(callback()).then(function() {
        return value;
      });
    },
    function(reason) {
      // @ts-ignore
      return constructor.resolve(callback()).then(function() {
        // @ts-ignore
        return constructor.reject(reason);
      });
    }
  );
}

/* harmony default export */ const src_finally = (finallyConstructor);

// CONCATENATED MODULE: ./node_modules/promise-polyfill/src/allSettled.js
function allSettled(arr) {
  var P = this;
  return new P(function(resolve, reject) {
    if (!(arr && typeof arr.length !== 'undefined')) {
      return reject(
        new TypeError(
          typeof arr +
            ' ' +
            arr +
            ' is not iterable(cannot read property Symbol(Symbol.iterator))'
        )
      );
    }
    var args = Array.prototype.slice.call(arr);
    if (args.length === 0) return resolve([]);
    var remaining = args.length;

    function res(i, val) {
      if (val && (typeof val === 'object' || typeof val === 'function')) {
        var then = val.then;
        if (typeof then === 'function') {
          then.call(
            val,
            function(val) {
              res(i, val);
            },
            function(e) {
              args[i] = { status: 'rejected', reason: e };
              if (--remaining === 0) {
                resolve(args);
              }
            }
          );
          return;
        }
      }
      args[i] = { status: 'fulfilled', value: val };
      if (--remaining === 0) {
        resolve(args);
      }
    }

    for (var i = 0; i < args.length; i++) {
      res(i, args[i]);
    }
  });
}

/* harmony default export */ const src_allSettled = (allSettled);

// CONCATENATED MODULE: ./node_modules/promise-polyfill/src/index.js
;


// Store setTimeout reference so promise-polyfill will be unaffected by
// other code modifying setTimeout (like sinon.useFakeTimers())
var setTimeoutFunc = setTimeout;

function isArray(x) {
  return Boolean(x && typeof x.length !== 'undefined');
}

function noop() {}

// Polyfill for Function.prototype.bind
function bind(fn, thisArg) {
  return function() {
    fn.apply(thisArg, arguments);
  };
}

/**
 * @constructor
 * @param {Function} fn
 */
function src_Promise(fn) {
  if (!(this instanceof src_Promise))
    throw new TypeError('Promises must be constructed via new');
  if (typeof fn !== 'function') throw new TypeError('not a function');
  /** @type {!number} */
  this._state = 0;
  /** @type {!boolean} */
  this._handled = false;
  /** @type {Promise|undefined} */
  this._value = undefined;
  /** @type {!Array<!Function>} */
  this._deferreds = [];

  doResolve(fn, this);
}

function handle(self, deferred) {
  while (self._state === 3) {
    self = self._value;
  }
  if (self._state === 0) {
    self._deferreds.push(deferred);
    return;
  }
  self._handled = true;
  src_Promise._immediateFn(function() {
    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;
    if (cb === null) {
      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);
      return;
    }
    var ret;
    try {
      ret = cb(self._value);
    } catch (e) {
      reject(deferred.promise, e);
      return;
    }
    resolve(deferred.promise, ret);
  });
}

function resolve(self, newValue) {
  try {
    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
    if (newValue === self)
      throw new TypeError('A promise cannot be resolved with itself.');
    if (
      newValue &&
      (typeof newValue === 'object' || typeof newValue === 'function')
    ) {
      var then = newValue.then;
      if (newValue instanceof src_Promise) {
        self._state = 3;
        self._value = newValue;
        finale(self);
        return;
      } else if (typeof then === 'function') {
        doResolve(bind(then, newValue), self);
        return;
      }
    }
    self._state = 1;
    self._value = newValue;
    finale(self);
  } catch (e) {
    reject(self, e);
  }
}

function reject(self, newValue) {
  self._state = 2;
  self._value = newValue;
  finale(self);
}

function finale(self) {
  if (self._state === 2 && self._deferreds.length === 0) {
    src_Promise._immediateFn(function() {
      if (!self._handled) {
        src_Promise._unhandledRejectionFn(self._value);
      }
    });
  }

  for (var i = 0, len = self._deferreds.length; i < len; i++) {
    handle(self, self._deferreds[i]);
  }
  self._deferreds = null;
}

/**
 * @constructor
 */
function Handler(onFulfilled, onRejected, promise) {
  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
  this.onRejected = typeof onRejected === 'function' ? onRejected : null;
  this.promise = promise;
}

/**
 * Take a potentially misbehaving resolver function and make sure
 * onFulfilled and onRejected are only called once.
 *
 * Makes no guarantees about asynchrony.
 */
function doResolve(fn, self) {
  var done = false;
  try {
    fn(
      function(value) {
        if (done) return;
        done = true;
        resolve(self, value);
      },
      function(reason) {
        if (done) return;
        done = true;
        reject(self, reason);
      }
    );
  } catch (ex) {
    if (done) return;
    done = true;
    reject(self, ex);
  }
}

src_Promise.prototype['catch'] = function(onRejected) {
  return this.then(null, onRejected);
};

src_Promise.prototype.then = function(onFulfilled, onRejected) {
  // @ts-ignore
  var prom = new this.constructor(noop);

  handle(this, new Handler(onFulfilled, onRejected, prom));
  return prom;
};

src_Promise.prototype['finally'] = src_finally;

src_Promise.all = function(arr) {
  return new src_Promise(function(resolve, reject) {
    if (!isArray(arr)) {
      return reject(new TypeError('Promise.all accepts an array'));
    }

    var args = Array.prototype.slice.call(arr);
    if (args.length === 0) return resolve([]);
    var remaining = args.length;

    function res(i, val) {
      try {
        if (val && (typeof val === 'object' || typeof val === 'function')) {
          var then = val.then;
          if (typeof then === 'function') {
            then.call(
              val,
              function(val) {
                res(i, val);
              },
              reject
            );
            return;
          }
        }
        args[i] = val;
        if (--remaining === 0) {
          resolve(args);
        }
      } catch (ex) {
        reject(ex);
      }
    }

    for (var i = 0; i < args.length; i++) {
      res(i, args[i]);
    }
  });
};

src_Promise.allSettled = src_allSettled;

src_Promise.resolve = function(value) {
  if (value && typeof value === 'object' && value.constructor === src_Promise) {
    return value;
  }

  return new src_Promise(function(resolve) {
    resolve(value);
  });
};

src_Promise.reject = function(value) {
  return new src_Promise(function(resolve, reject) {
    reject(value);
  });
};

src_Promise.race = function(arr) {
  return new src_Promise(function(resolve, reject) {
    if (!isArray(arr)) {
      return reject(new TypeError('Promise.race accepts an array'));
    }

    for (var i = 0, len = arr.length; i < len; i++) {
      src_Promise.resolve(arr[i]).then(resolve, reject);
    }
  });
};

// Use polyfill for setImmediate for performance gains
src_Promise._immediateFn =
  // @ts-ignore
  (typeof setImmediate === 'function' &&
    function(fn) {
      // @ts-ignore
      setImmediate(fn);
    }) ||
  function(fn) {
    setTimeoutFunc(fn, 0);
  };

src_Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {
  if (typeof console !== 'undefined' && console) {
    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console
  }
};

/* harmony default export */ const src = (src_Promise);

// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/polyfills.js
const EJSPolyfills = {
    build(){
        this.arrFrom();
        this.arrIncludes();
        this.strIncludes();
        this.matches();
        this.closest();
        this.scrollTo();
        this.objAssign();
        this.svgClassList();
        this.objectValues();
    },

    arrFrom(){
        if( ! Array.from ) {
            Array.from = (function(){
                var symbolIterator;
                try {
                    symbolIterator = Symbol.iterator
                        ? Symbol.iterator
                        : 'Symbol(Symbol.iterator)';
                } catch( e ) {
                    symbolIterator = 'Symbol(Symbol.iterator)';
                }

                var toStr          = Object.prototype.toString;
                var isCallable     = function(fn){
                    return (
                        typeof fn === 'function' ||
                        toStr.call(fn) === '[object Function]'
                    );
                };
                var toInteger      = function(value){
                    var number = Number(value);
                    if( isNaN(number) ) {
                        return 0;
                    }
                    if( number === 0 || ! isFinite(number) ) {
                        return number;
                    }
                    return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
                };
                var maxSafeInteger = Math.pow(2, 53)-1;
                var toLength       = function(value){
                    var len = toInteger(value);
                    return Math.min(Math.max(len, 0), maxSafeInteger);
                };

                var setGetItemHandler = function setGetItemHandler(isIterator, items){
                    var iterator = isIterator && items[symbolIterator]();
                    return function getItem(k){
                        return isIterator ? iterator.next() : items[k];
                    };
                };

                var getArray = function getArray(
                    T,
                    A,
                    len,
                    getItem,
                    isIterator,
                    mapFn
                ){
                    var k = 0;
                    while( k < len || isIterator ) {
                        var item   = getItem(k);
                        var kValue = isIterator ? item.value : item;

                        if( isIterator && item.done ) {
                            return A;
                        } else {
                            if( mapFn ) {
                                A[k] =
                                    typeof T === 'undefined'
                                        ? mapFn(kValue, k)
                                        : mapFn.call(T, kValue, k);
                            } else {
                                A[k] = kValue;
                            }
                        }
                        k += 1;
                    }

                    if( isIterator ) {
                        throw new TypeError(
                            'Array.from: provided arrayLike or iterator has length more then 2 ** 52 - 1'
                        );
                    } else {
                        A.length = len;
                    }

                    return A;
                };

                return function from(arrayLikeOrIterator /*, mapFn, thisArg */){
                    var C = this;

                    var items      = Object(arrayLikeOrIterator);
                    var isIterator = isCallable(items[symbolIterator]);

                    if( arrayLikeOrIterator == null && ! isIterator ) {
                        throw new TypeError(
                            'Array.from requires an array-like object or iterator - not null or undefined'
                        );
                    }

                    var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
                    var T;
                    if( typeof mapFn !== 'undefined' ) {
                        if( ! isCallable(mapFn) ) {
                            throw new TypeError(
                                'Array.from: when provided, the second argument must be a function'
                            );
                        }
                        if( arguments.length > 2 ) {
                            T = arguments[2];
                        }
                    }

                    var len = toLength(items.length);
                    var A   = isCallable(C) ? Object(new C(len)) : new Array(len);

                    return getArray(
                        T,
                        A,
                        len,
                        setGetItemHandler(isIterator, items),
                        isIterator,
                        mapFn
                    );
                };
            })();
        }
    },

    arrIncludes(){
        if( ! Array.prototype.includes ) {
            Object.defineProperty(Array.prototype, 'includes', {
                value : function(searchElement, fromIndex){
                    if( this == null ) {
                        throw new TypeError('"this" is null or not defined');
                    }

                    var o   = Object(this);
                    var len = o.length >>> 0;

                    if( len === 0 ) {
                        return false;
                    }

                    var n = fromIndex | 0;
                    var k = Math.max(n >= 0 ? n : len-Math.abs(n), 0);

                    while( k < len ) {
                        if( o[k] === searchElement ) {
                            return true;
                        }
                        k++;
                    }
                    return false;
                }
            });
        }
    },

    strIncludes(){
        if( String.prototype.includes ) {
            return;
        }

        String.prototype.includes = function(){
            return String.prototype.indexOf.apply(this, arguments) !== -1;
        };
    },

    closest(){
        if( ! Element.prototype.matches ) {
            Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
        }

        if( ! Element.prototype.closest ) {
            Element.prototype.closest = function(s){
                var el = this;

                do {
                    if( Element.prototype.matches.call(el, s) ) {
                        return el;
                    }
                    el = el.parentElement || el.parentNode;
                } while( el !== null && el.nodeType === 1 );
                return null;
            };
        }
    },

    scrollTo(){
        if( ! Element.prototype.scrollTo ) {
            Element.prototype.scrollTo = () => {
            };
        }
    },

    matches(){
        if( ! Element.prototype.matches ) {
            Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
        }
    },

    objAssign(){
        if( typeof Object.assign === 'function' ) {
            return;
        }

        Object.defineProperty(Object, 'assign', {
            enumerable   : false,
            configurable : true,
            writable     : true,
            value        : (target) => {
                if( ! target ) {
                    return;
                }

                let to = Object(target);

                for( let i = 1; i < arguments.length; i++ ) {
                    let nextSource = arguments[i];

                    if( ! nextSource ) {
                        continue;
                    }

                    nextSource = Object(nextSource);

                    let keysArray = Object.keys(Object(nextSource));

                    for( let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++ ) {
                        let nextKey = keysArray[nextIndex];
                        let desc    = Object.getOwnPropertyDescriptor(nextSource, nextKey);

                        if( desc && desc.enumerable ) {
                            to[nextKey] = nextSource[nextKey];
                        }
                    }
                }
                return to;
            },
        });
    },

    objectValues(){
        if( typeof Object.values === 'function' ) {
            return;
        }

        Object.values = (obj) => {
            const results = [];

            for( let i in obj ) {
                if( obj.hasOwnProperty(i) ) {
                    results.push(obj[i]);
                }
            }

            return results;
        };
    },

    svgClassList(){
        if( Object.getOwnPropertyDescriptor(Element.prototype, 'classList') ) {
            return;
        }
        Object.defineProperty(Element.prototype, 'classList', Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'classList'));
    },
}

/* harmony default export */ const polyfills = (EJSPolyfills);
// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/utilities.js
const EJSUtilities = {
    reload(delay = 500, clearCache){
        setTimeout(() => {
            location.reload(clearCache);
        }, delay);
    },

    serialize($form, asString){
        const q = [];

        for( let i = $form.elements.length-1; i >= 0; i = i-1 ) {
            if( $form.elements[i].name === '' ) {
                continue;
            }

            switch( $form.elements[i].nodeName ) {
                case 'INPUT':
                    switch( $form.elements[i].type ) {
                        case 'text':
                        case 'tel':
                        case 'email':
                        case 'hidden':
                        case 'password':
                        case 'button':
                        case 'reset':
                        case 'submit':
                            q.push($form.elements[i].name+'='+$form.elements[i].value);
                            break;
                        case 'checkbox':
                        case 'radio':
                            if( $form.elements[i].checked ) {
                                q.push($form.elements[i].name+
                                    '='+
                                    encodeURIComponent($form.elements[i].value));
                            }
                            break;
                    }
                    break;
                case 'file':
                    break;
                case 'TEXTAREA':
                    q.push($form.elements[i].name+
                        '='+
                        encodeURIComponent($form.elements[i].value));
                    break;
                case 'SELECT':
                    switch( $form.elements[i].type ) {
                        case 'select-one':
                            q.push($form.elements[i].name+
                                '='+
                                encodeURIComponent($form.elements[i].value));
                            break;
                        case 'select-multiple':
                            for( let j = $form.elements[i].options.length-1;
                                 j >= 0;
                                 j = j-1 ) {
                                if( $form.elements[i].options[j].selected ) {
                                    q.push($form.elements[i].name+
                                        '='+
                                        encodeURIComponent($form.elements[i].options[j].value));
                                }
                            }
                            break;
                    }
                    break;
                case 'BUTTON':
                    switch( $form.elements[i].type ) {
                        case 'reset':
                        case 'submit':
                        case 'button':
                            q.push($form.elements[i].name+
                                '='+
                                encodeURIComponent($form.elements[i].value));
                            break;
                    }
                    break;
            }
        }

        if( asString ) {
            return q.join('&');
        } else {
            const res = [];

            for( let str of q ) {
                let parts = str.split('=');
                res.push({name : parts[0], value : decodeURIComponent(parts[1])});
            }

            return res;
        }
    },

    getWinSize(){
        if( ! window.acsbWindowWidth ) {
            window.acsbWindowWidth = window.innerWidth;
        }

        if( ! window.acsbWindowHeight ) {
            window.acsbWindowHeight = window.innerHeight;
        }

        return {
            width  : window.acsbWindowWidth,
            height : window.acsbWindowHeight
        };
    },

    setStorage(key, value){
        try {
            window.localStorage.setItem(key, value);
        } catch( err ) {
        }
    },

    delStorage(key){
        try {
            window.localStorage.removeItem(key);
        } catch( err ) {
        }
    },

    getStorage(key){
        try {
            return window.localStorage.getItem(key);
        } catch( err ) {
        }
        return null;
    }
}

/* harmony default export */ const utilities = (EJSUtilities);
// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/arrays.js
const EJSArrays = {
    unique(arr){
        const results = [];

        for( let v of arr ) {
            if( v && ! results.includes(v) ) {
                results.push(v);
            }
        }

        return results;
    },

    filter(arr){
        return arr.length < 1 ? arr : arr.filter(result => result);
    },

    chunk(arr, chunks){
        const arrays = [];

        while( arr.length > 0 ) {
            arrays.push(arr.splice(0, chunks));
        }

        return arrays;
    },

    areIdentical(arr1, arr2){
        if( arr1.length !== arr2.length ) {
            return false;
        }

        let matched = true;

        for( let i = arr1.length; i--; ) {
            if( arr1[i] !== arr2[i] ) {
                matched = false;
                break;
            }
        }

        return matched;
    },

    equalValues(arr){
        return (arr.filter((v, i, a) => {
            return ! a ? false : (v === a[0]);
        }).length === arr.length);
    },

    sum(arr){
        let sum = 0;

        for( let v of arr ) {
            sum = sum+v;
        }

        return sum;
    },

    average(arr){
        return Math.round(this.sum(arr) / arr.length);
    },

    sort(arr, key){
        return arr.sort((a, b) => {
            if( a[key] < b[key] ) {
                return -1;
            }
            if( a[key] > b[key] ) {
                return 1;
            }
            return 0;
        });
    }
}

/* harmony default export */ const arrays = (EJSArrays);
// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/strings.js
const EJSStrings = {
    replace(str, search, replace){
        return str.replace(new RegExp(search, 'g'), replace);
    },

    inString(haystack, needle, sensitive = false){
        if( ! needle || ! haystack ) {
            return false;
        }

        haystack = typeof haystack !== 'string' ? String(haystack) : haystack;
        needle   = typeof needle !== 'string' ? String(needle) : needle;

        haystack = haystack.replace(/(\r\n|\n|\r)/gm, ' ').trim();
        needle   = needle.replace(/(\r\n|\n|\r)/gm, ' ').trim();

        if( ! sensitive ) {
            haystack = haystack.toLowerCase();
            needle   = needle.toLowerCase();
        }

        return haystack === needle || haystack.includes(needle);
    },

    removeChars(str, chars, specialChars){
        if( ! str ) {
            return str;
        }

        if( specialChars ) {
            chars = ['&', '?', '"', "'", '%', '#'].concat(chars);
        }

        for( let v of chars ) {
            str = str.split(v).join('');
        }

        return str;
    },

    removeWhites(str){
        return str.replace(/\s/g, '').trim();
    },

    random(length){
        let str = 'a'+Math.random().toString(36).substr(2, 17);

        if( length ) {
            while( str.length < length ) {
                str += Math.random().toString(36).substr(2, 17);
            }

            str = str.substr(0, length);
        }

        return str;
    },

    trim(str){
        return str.replace(/\s+/g, ' ').trim();
    },

    firstUpper(str){
        return str.charAt(0).toUpperCase()+str.slice(1);
    },

    sentenceCase(str){
        str = str.toLowerCase();
        return str.charAt(0).toUpperCase()+str.substr(1);
    },

    titleCase(str){
        let result  = '';
        const parts = str.toLowerCase().split(' ');

        if( parts.length < 0 ) {
            return str.sentenceCase(str);
        }

        for( let v of parts ) {
            result += ' '+v.charAt(0).toUpperCase()+v.substr(1);
        }

        return result;
    },

    htmlDecode(str){
        const $el = EJS.elements.create('textarea', {}, str);
        return $el.value;
    },

    htmlEncode(str){
        const $el = EJS.elements.create('textarea', {}, str);
        return $el.innerHTML;
    },

    getOccures(str, substr){
        return str.split(substr).length-1;
    },

    isNumber(str){
        if( ! str && str !== 0 ) {
            return false;
        }
        return ! isNaN(parseInt(str));
    },

    isEmail(str){
        return /\S+@\S+\.\S+/.test(str);
    },

    isTelephone(str){
        return (str.length === 9 || str.length === 10) && this.isNumber(str);
    },

    isFullName(str){
        return str.split(' ').length > 0 && str.length > 3;
    }
}

/* harmony default export */ const strings = (EJSStrings);
// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/events.js
const EJSEvents = {
    off($els, event){
        if( ! Array.isArray($els) ) {
            $els = [$els];
        }

        for( let obj of window.EJSEventListeners ) {
            for( let $el of $els ) {
                if( obj.$el !== $el || obj.event !== event ) {
                    continue;
                }
                obj.$el.removeEventListener(obj.event, obj.handler);
                break;
            }
        }

        return $els[0];
    },

    on($els, event, callBack){
        if( ! $els ) {
            return;
        }

        if( ! Array.isArray($els) ) {
            $els = [$els];
        }

        if( ! window.EJSEventListeners ) {
            window.EJSEventListeners = [];
        }

        EJS.customEventHandler = e => {
            let $target;
            const $elsInPath = e.path ? e.path : typeof e.composedPath === 'function' ? e.composedPath() : EJS.elements.composedPath(e.target);

            for( let $elInPath of $elsInPath ) {
                for( let $el of $els ) {
                    if( $elInPath === $el && $elInPath.nodeType === 1 ) {
                        $target = $elInPath;
                        break;
                    }
                }

                if( $target ) {
                    break;
                }
            }

            if( ! $target ) {
                if( event === 'click' && typeof e.target.click !== 'function' && e.target.parentElement ) {
                    let $parent = e.target.parentElement;
                    let matched = false;

                    while( ! matched ) {
                        if( typeof $parent.click === 'function' ) {
                            matched = true;
                            break;
                        }

                        if( ! $parent.parentElement || $parent.parentElement.tagName === 'BODY' ) {
                            break;
                        }

                        $parent = $parent.parentElement;
                    }

                    $target = matched ? $parent : e.target;
                } else {
                    $target = e.target;
                }
            }

            e.acsbListenerEvent = true;
            callBack.call(null, e, $target);
        };

        for( let e of event.split(' ') ) {
            for( let $el of $els ) {
                window.EJSEventListeners[window.EJSEventListeners.length] = {
                    $el     : $el,
                    event   : e,
                    handler : EJS.customEventHandler,
                };
                $el.addEventListener(e, EJS.customEventHandler, false);
            }
        }

        return $els[0];
    },

    trigger($els, event, data, bubbles = true){
        if( ! Array.isArray($els) ) {
            $els = [$els];
        }

        if( ! window.EJSCustomEvent ) {
            let CustomEvent = (event, params) => {
                params    = params || {bubbles : false, cancelable : false, detail : undefined};
                const evt = document.createEvent('EJSCustomEvent');
                evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
                return evt;
            };

            CustomEvent.prototype = window.Event.prototype;
            window.EJSCustomEvent = CustomEvent;
        }

        for( let v of event.split(' ') ) {
            for( let $el of $els ) {
                $el.dispatchEvent(new CustomEvent(v, {detail : data, bubbles : bubbles}));
            }
        }
        return $els[0];
    },

    prevent(event, stopBubbling = true){
        event.preventDefault();

        if( stopBubbling ) {
            event.stopPropagation();
            event.stopImmediatePropagation();
        }
    }
}

/* harmony default export */ const events = (EJSEvents);
// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/elements.js
const EJSElements = {
    isElement($el){
        return $el && $el.nodeType === 1;
    },

    inDom($el){
        return ! (! $el.parentElement && $el.tagName !== 'HTML');
    },

    click($el){
        if( typeof $el.click !== 'function' ) {
            return;
        }
        $el.click();
    },

    scroll($el, position, callBack){
        $el.scrollTo({
            left     : 0,
            top      : position,
            behavior : 'smooth',
        });

        let interval = setInterval(() => {
            let scrollTop = Math.ceil($el === window ? window.scrollY : $el.scrollTop)+EJS.utilities.getWinSize().height+50;

            if( Math.ceil(scrollTop) >= position || Math.ceil(scrollTop) >= Math.ceil(document.body.scrollHeight) ) {
                clearInterval(interval);

                if( typeof callBack === 'function' ) {
                    callBack.call($el, position);
                }
            }
        }, 10);
    },

    css($el, styles, important){
        if( ! $el ) {
            return $el;
        }

        if( important ) {
            const attrs = {};
            const style = EJS.strings.removeWhites($el.style.cssText);

            let str = '';

            for( let v of style.split(';').filter(a => a) ) {
                const parts     = v.split(':');
                attrs[parts[0]] = parts.slice(1).join(':');
            }

            for( let k in styles ) {
                attrs[k] = styles[k]+'!important';
            }

            for( let k in attrs ) {
                str = str+k+':'+attrs[k]+';';
            }

            $el.setAttribute('style', str);
        } else {
            for( let k in styles ) {
                $el.style[k] = styles[k];
            }
        }

        return $el;
    },

    append($el, $parent, pre){
        if( ! $el ) {
            return $el;
        }

        if( pre ) {
            if( $parent.childNodes[0] && $parent.childNodes[0].textContent.trim().length > 0 ) {
                this.insert($el, $parent.childNodes[0]);
            } else if( $parent.children[0] ) {
                this.insert($el, $parent.children[0]);
            } else {
                $parent.appendChild($el);
            }
        } else {
            $parent.appendChild($el);
        }

        return $el;
    },

    insert($el, $target, after){
        if( after ) {
            $target.parentElement.insertBefore($el, $target.nextSibling);
        } else {
            $target.parentElement.insertBefore($el, $target);
        }
        return $el;
    },

    attrs($els, attrs, remove){
        if( ! $els ) {
            return $els;
        }

        if( ! Array.isArray($els) ) {
            $els = [$els];
        }

        for( let $el of $els ) {
            if( remove ) {
                for( let k in attrs ) {
                    $el.removeAttribute(attrs[k]);
                }
                continue;
            }

            for( let k in attrs ) {
                if( k === 'class' && attrs[k] && attrs[k].length > 0 ) {
                    for( let str of attrs[k].split(' ') ) {
                        if( str && str.length > 0 ) {
                            $el.classList.add(str);
                        }
                    }
                } else {
                    $el.setAttribute(k, attrs[k]);
                }
            }
        }

        return $els;
    },

    classes($els, classes, remove){
        if( ! $els || ! classes || classes.length < 1 ) {
            return $els;
        }

        if( ! Array.isArray($els) ) {
            $els = [$els];
        }

        for( let v of classes.split(' ') ) {
            for( let $el of $els ) {
                if( remove ) {
                    $el.classList.remove(v);
                } else {
                    $el.classList.add(v);
                }
            }
        }
        return $els;
    },

    remove($els){
        if( ! $els ) {
            return $els;
        }

        if( Array.isArray($els) ) {
            for( let $el of $els ) {
                if( $el.parentElement ) {
                    $el.parentElement.removeChild($el);
                }
            }
        } else {
            if( $els.parentElement ) {
                $els.parentElement.removeChild($els);
            }
        }

        return $els;
    },

    focused(){
        if( ! document.hasFocus() ) {
            return null;
        }
        return document.activeElement;
    },

    composedPath($el){
        const path = [];

        while( $el ) {
            path.push($el);

            if( $el.tagName === 'HTML' ) {
                path.push(document);
                path.push(window);
                return path;
            }

            $el = $el.parentElement;
        }
    },

    width($el){
        return typeof $el.offsetWidth !== 'number' ? $el.clientWidth : $el.offsetWidth;
    },

    height($el){
        return typeof $el.offsetHeight !== 'number' ? $el.clientHeight : $el.offsetHeight;
    },

    text($el, trim = true, ignores = []){
        if( ! $el ) {
            return '';
        }

        let text = $el.textContent;

        for( let $element of EJS.picks('script', $el).concat(EJS.picks('style', $el), EJS.picks('img', $el)) ) {
            text = text.replace($element.textContent, '');
        }

        if( ignores.length > 0 ) {
            for( let $innerEl of EJS.picks(ignores.join(','), $el) ) {
                text = text.replace($innerEl.textContent, '');
            }
        }

        return trim ? text.replace(/\s+/g, ' ').trim() : text;
    },

    nodesText($el) {
        if( ! $el ) {
            return '';
        }

        let text = '';

        for( let $node of $el.childNodes  ) {
            if( $node.nodeType === 3 ) {
                text = text + ' ' + $node.textContent.trim();
            }
        }

        return text.replace(/\s+/g, ' ').trim();
    },

    style($el, style){
        let v = window.getComputedStyle($el, null)[style];
        return ! v ? '' : v;
    },

    htmlToNodes(html){
        let nodes    = [];
        let fixFirst = false;

        if( html.trim().substr(0, 7) === '<style>' || html.trim().substr(0, 8) === '<script>' ) {
            fixFirst = true;
        }

        if( fixFirst ) {
            html = '<span></span>'+html;
        }

        for( let node of Array.from(new DOMParser().parseFromString(html, 'text/html').body.childNodes) ) {
            if( node.nodeType === 1 ) {
                nodes.push(node);
            }
        }

        if( fixFirst && nodes.length > 0 ) {
            nodes.shift();
        }

        return nodes;
    },

    html($el){
        return EJS.none($el) ? '' : $el.outerHTML.replace($el.innerHTML, '');
    },

    parents($el, selector, closest, until){
        if( ! $el || ! $el.nodeType || $el.nodeType !== 1 ) {
            return $el;
        }

        let $els         = [];
        const $original  = $el;
        const selectors  = typeof selector !== 'string' ? [] : selector.split(',');
        const iterations = selectors.length;

        while( $el && $el.tagName !== 'HTML' && $el.tagName !== 'BODY' && $el !== document ) {
            let matches = iterations < 1;

            if( selectors.length > 0 ) {
                for( let i = 0; i < selectors.length; i++ ) {
                    if( $el.matches(selectors[i]) ) {
                        matches = true;
                        break;
                    }
                }
            }

            if( (until || matches) && $el !== $original ) {
                $els.push($el);

                if( closest || (until && matches) ) {
                    break;
                }
            }

            if( $el.parentElement && $el.parentElement.tagName === 'BODY' && ! matches ) {
                $els = [];
                break;
            }

            $el = $el.parentElement;
        }

        return $els;
    },

    next($el, selector, all){
        const results = [];

        while( ($el = $el.nextSibling) ) {
            if( ! EJS.elements.isElement($el) ) {
                continue;
            }
            if( ! selector ) {
                results.push($el);
            } else {
                if( $el.matches(selector) ) {
                    results.push($el);
                }
            }
            if( ! all && results.length > 0 ) {
                break;
            }
        }

        return results;
    },

    previous($el, selector, all){
        let results = [];

        while( ($el = $el.previousSibling) ) {
            if( ! EJS.elements.isElement($el) ) {
                continue;
            }
            if( ! selector ) {
                results.push($el);
            } else {
                if( $el.matches(selector) ) {
                    results.push($el);
                }
            }
            if( ! all && results.length > 0 ) {
                break;
            }
        }

        return results;
    },

    offsets($el, viewport){
        const rect = $el.getBoundingClientRect();

        if( viewport ) {
            return {
                left   : Math.round(rect.left),
                right  : Math.round(window.innerWidth-$el.offsetWidth-rect.left),
                top    : Math.round(rect.top),
                bottom : Math.round(window.innerHeight-rect.top),
            };
        }

        return {
            left   : Math.round(rect.left),
            right  : Math.round(window.innerWidth-$el.offsetWidth-rect.left),
            top    : Math.round(window.pageYOffset+rect.top),
            bottom : Math.round(document.body.scrollHeight-window.pageYOffset+rect.top),
        };
    },

    copyAttrs($el, $target){
        if( ! $el || ! $target ) {
            return;
        }

        for( let v of $el.attributes ) {
            $target.setAttribute(v.name, v.value);
        }

        return $target;
    },

    create(tag, attrs, html){
        let $el = document.createElement(tag);

        if( html ) {
            $el.innerHTML = html;
        }

        return EJS.elements.attrs($el, attrs)[0];
    },

    clone($el, withChildren){
        return $el.cloneNode(withChildren);
    },

    hasTextNodes($el){
        if( ! $el.childNodes ) {
            return;
        }

        let found = false;

        for( let node of $el.childNodes ) {
            if( node.nodeType === 3 ) {
                found = true;
                break;
            }
        }

        return found;
    },

    domIndexSort($els){
        const temp  = [];
        const final = [];

        for( let $el of $els ) {
            temp.push({i : EJS.elements.domIndex($el), $el : $el});
        }

        temp.sort((a, b) => a.i-b.i);

        for( let data of temp ) {
            final.push(data.$el);
        }

        return final;
    },

    domIndex($el){
        let i = 0;

        while( ($el = $el.previousElementSibling) ) {
            i++;
        }

        return i;
    },

    focus($el){
        if( ! $el || typeof $el.getAttribute !== 'function' ) {
            return $el;
        }

        if( ! $el.getAttribute('tabindex') ) {
            $el.setAttribute('tabindex', '-1');
            $el.focus();

            EJS.events.on($el, 'focusout', () => $el.removeAttribute('tabindex'));
        } else {
            $el.focus();
        }

        return $el;
    }
}

/* harmony default export */ const EJS_elements = (EJSElements);
// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/uris.js
const EJSUris = {
    objectToUri(obj){
        if( typeof obj !== 'object' ) {
            return '';
        }

        let str = '';

        for( let prop in obj ) {
            if( str.length > 0 ) {
                str += '&';
            }

            str += prop+'='+encodeURIComponent(obj[prop]);
        }

        return str.trim();
    },

    uriToObject(uri){
        if( ! uri ) {
            return {};
        }

        const urlParts = window.location.href.split('?');
        const result   = {};

        if( urlParts.length === 1 ) {
            return null;
        }

        for( let segment of urlParts[1].split('&') ) {
            const parts      = segment.split('=');
            result[parts[0]] = parts[1] ? decodeURIComponent(parts[1]) : null;
        }

        return result;
    },

    getImageExt(url){
        if( ! url || url.length < 1 ) {
            return null;
        }

        const ext = url.split('#')[0].split('?')[0].split('.').pop().toLowerCase();

        if( ['jpeg', 'jpg', 'png', 'tiff', 'gif', 'svg', 'webp', 'bmp'].includes(ext) ) {
            return ext;
        }

        return null;
    },

    getBrandName(url){
        if( ! url || url.length < 3 ) {
            return '';
        }

        let hostname;

        url = EJS.uris.getAbsolute(url);

        if( url.includes('//') ) {
            hostname = url.split('/')[2];
        } else {
            hostname = url.split('/')[0];
        }

        hostname = hostname.split(':')[0].split('?')[0];

        const parts  = hostname.split('.');
        const length = parts.length;

        if( length > 2 ) {
            hostname = parts[length-2]+'.'+parts[length-1];

            if( parts[length-2].length === 2 && parts[length-1].length === 2 ) {
                hostname = parts[length-3]+'.'+hostname;
            }
        }

        const hostnameParts = hostname.split('.');

        if( hostnameParts.length > 0 ) {
            hostname = hostnameParts[0];
        }

        return EJS.strings.sentenceCase(hostname);
    },

    getFileName(url, format){
        let text = EJS.arrays.filter(url.split('/')).pop().split('?')[0].split('#')[0];

        if( format ) {
            text = EJS.strings.sentenceCase(text.replace(/-/g, ' '));
        }

        return text.split('.')[0];
    },

    getAbsolute(url, base){
        if( typeof url !== 'string' ) {
            return url;
        }

        let result   = url.replace('\\', '/').replace(/\\\//g, '/').trim();
        let hostname = window.location.hostname;
        let protocol = window.location.protocol;
        let dotParts = result.split('.');
        let fileLink = false;

        if( typeof base === 'string' ) {
            if( base.toLowerCase().includes('https://') ) {
                protocol = 'https:';
            } else if( base.toLowerCase().includes('http://') ) {
                protocol = 'http:';
            }

            hostname = EJS.strings.removeChars(base, ['https://', 'http://']).trim().split('/')[0];
        }

        if( EJS.uris.isFileLink(result) ) {
            fileLink = true;
        } else {
            for( let ext of ['.php', '.htm', '.shtm', '.asp'] ) {
                if( result.toLowerCase().includes(ext) ) {
                    fileLink = true;
                    break;
                }
            }
        }


        if( result.substr(0, 1) === '/' && result.substr(0, 2) !== '//' ) {
            result = result.substr(1);
        }

        if( result.substr(0, 4) === 'http' ) {
            return result;
        }

        if( result === '/' || result.length < 1 ) {
            return protocol+'//'+result.substr(1)+hostname;
        }

        if( dotParts.length === 1 || (dotParts.length === 2 && fileLink) ) {
            return (protocol+'//'+hostname+(result.substr(0, 1) === '/' ? result : '/'+result));
        }

        if( result.substr(0, 2) === '//' ) {
            return protocol+result;
        }

        return protocol+'//'+result;
    },

    getFormatted(url, removeWWW = false, removeParams = true){
        if( ! url ) {
            return url;
        }

        url = EJS.strings.removeChars(url.split('#')[0], ['https://', 'http://']);
        url = url.substring(0, 2) === '//' ? url.replace('//', '') : url;
        url = url.substring(0, 1) === '/' ? url.replace('/', '') : url;
        url = removeParams ? url.split('?')[0] : url;

        if( removeWWW ) {
            url = url.substring(0, 4) === 'www.' ? url.replace('www.', '') : url;
        }

        return EJS.strings.replace(url.trim(), ' ', '%20');
    },

    getParam(url, param){
        let result  = null;
        const qmark = url.split('?');

        if( ! qmark[1] ) {
            return null;
        }

        for( let v of qmark[1].split('&') ) {
            const parts = v.split('=');

            if( parts[0] && parts[1] && parts[0] === param ) {
                result = parts[1];
                break;
            }
        }

        if( result ) {
            return decodeURIComponent(result);
        }

        return result;
    },

    setParams(url, params){
        if( ! url || ! params ) {
            return '';
        }

        let str = '';

        for( let k in params ) {
            str += '&'+k+'='+params[k];
        }

        if( ! url.includes('?') ) {
            str = str.replace('&', '?');
        }

        return url+str;
    },

    isUrlEncoded(url){
        try {
            url = url || '';
            return url !== decodeURIComponent(url);
        } catch( e ) {
            return false;
        }
    },

    isUrlValid(url){
        if( url.substr(0, 4) === 'http' || url.substr(0, 2) === '//' ) {
            return true;
        }

        if( url.substr(0, 5) === 'data:' ) {
            return false;
        }

        return EJS.elements.create('input', {type : 'url', value : url}).checkValidity();
    },

    isFileLink(url){
        let isFileLink   = false;
        const extensions = ['png', 'jpg', 'jpeg', 'gif', 'bmp', 'webp', 'eps', 'raw', 'svg', 'pdf', 'tiff', 'mp4',
            'css', 'js', 'json', 'doc', 'csv', 'ppt', 'txt', 'psd', 'ai'];

        url = url.toLowerCase();

        for( let ext of extensions ) {
            if( url.includes('.'+ext) ) {
                isFileLink = true;
                break;
            }
        }

        return isFileLink;
    }
}

/* harmony default export */ const uris = (EJSUris);
// CONCATENATED MODULE: ./apps/devapp/src/js/EJS/EJS.js
;







polyfills.build();

window.EJS = {
    utilities : utilities,
    arrays    : arrays,
    strings   : strings,
    events    : events,
    elements  : EJS_elements,
    uris      : uris,

    picks(selector, $parent = document, domOrder = true){
        try {
            if( selector === '*' ) {
                $parent = $parent === document ? document.body : $parent;
                return Array.from($parent.querySelectorAll(selector));
            }

            if( selector.substr(0, 1) === '#' && ! isNaN(parseInt(selector.substr(1, 2))) ) {
                selector = `[id="${selector.replace('#', '')}"]`;
            }

            let $els = Array.from($parent.querySelectorAll(selector));

            if( ! domOrder ) {
                const selectors = selector.split(',');

                if( selectors.length > 1 ) {
                    const $ordered = [];

                    for( let str of selectors ) {
                        str = str.toUpperCase().trim();

                        for( let $el of $els ) {
                            if( $el.tagName === str ) {
                                $ordered.push($el);
                            }
                        }
                    }

                    $els = $ordered;
                }
            }

            return $els;
        } catch( err ) {
            return [];
        }
    },

    pick(selector, $parent = document){
        if( selector.substr(0, 1) === '#' && ! isNaN(parseInt(selector.substr(1, 1))) ) {
            selector = `[id="${selector.replace('#', '')}"]`;
        }

        try {
            return $parent.querySelector(selector) || undefined;
        } catch( err ) {
            return undefined;
        }
    },

    fetch(url, data, options = {}, type = 'POST'){
        return new Promise((resolve, reject) => {
            const obj = {
                method : type,
                body   : type === 'GET' ? null : JSON.stringify(data)
            };

            for( let k in options ) {
                obj[k] = options[k];
            }

            return fetch(url, obj).then(res => {
                if( ! res.ok ) {
                    throw new Error(`Could not complete the request to ${url}`);
                }
                return res.text();
            }).then(res => {
                return resolve(res);
            }).catch(res => {
                return reject(res);
            });
        });
    },

    none(param){
        return ! param
            || (param.length && param.length < 1)
            || (param.nodeType && param.nodeType !== 1)
            || (typeof param === 'object' && param.nodeType !== 1 && Object.keys(param).length < 1);
    },
}
// CONCATENATED MODULE: ./apps/devapp/src/js/build/state.js
const State = {
    ready        : false,
    running      : false,
    open         : false,
    isMobile     : false,
    isChildFrame : false,
    canStore     : true,
    lang         : 'en',
    loadParams   : {},
    html         : {},
    actions      : {},
    siteCfg      : {},
    widget       : {},

    store(type){
        if( ! this.canStore ) {
            return this;
        }

        const storage = this.getStorage();

        let actions;
        let widget;

        if( type === 'widget' ) {
            actions = storage ? storage.actions : this.actions;
            widget  = this.widget;
        } else if( type === 'actions' ) {
            actions = this.actions;
            widget  = storage ? storage.widget : this.widget;
        } else {
            actions = this.actions;
            widget  = this.widget;
        }

        EJS.utilities.setStorage('acsbState', JSON.stringify({
            date    : new Date().toISOString().slice(0, 10),
            actions : actions,
            widget  : widget,
        }));

        return this;
    },

    reset(reload = true){
        this.actions = {};
        this.widget  = {};

        EJS.utilities.delStorage('acsbState');

        if( reload ) {
            EJS.utilities.reload(0);
        }

        return this;
    },

    getStorage(type = 'acsbState'){
        try {
            return JSON.parse(EJS.utilities.getStorage(type));
        } catch( err ) {
            return null;
        }
    },

    updateWidget(option, value){
        this.widget[option] = value;
        return this;
    },

    updateAction(name, enabled, options = {}, cached = false){
        this.actions[name] = {
            enabled : enabled,
            options : options,
            cached  : cached,
        };
        return this;
    },
}

/* harmony default export */ const state = (State);
// CONCATENATED MODULE: ./apps/devapp/src/js/build/config.js
const Config = {
    siteCfg  : {},
    isIe     : false,
    ace      : false,
    debug    : false,
    active   : false,
    app      : 'app',
    endpoint : 'https://acsbapp.com/apps',
    cache    : 'https://cdn.acsbapp.com/cache',
    wave     : window.location.href.includes('wave.webaim.org'),
    domain   : EJS.uris.getFormatted(window.location.href, true).split('/')[0],
    events   : {
        ready          : 'acsbReady',
        actionEnabled  : 'acsbActionEnabled',
        actionDisabled : 'acsbActionDisabled',
        domChanged     : 'acsbDomChanged',
        elementHide    : 'acsbElementOnHide',
        elementShow    : 'acsbElementOnShow',
        keynavRebind   : 'acsbKeynavRebind'
    },
    build(){
        if ( this.domain === 'acsbace.com' ) {
            this.ace    = true;
            let website = EJS.uris.getParam(window.location.href, 'website');

            if ( website ) {
                this.domain = EJS.uris.getFormatted(website, true).split('/')[0];
            } else {
                this.domain = EJS.uris.getFormatted(window.location.href.split('#audit/')[0], true).split('/')[0];
            }
        }

        if( navigator.userAgent.includes('MSIE') || navigator.appVersion.includes('Trident/') ) {
            this.isIe = true;
        }

        for( let $script of EJS.picks('script[src]') ) {
            if( ! $script.src.includes('acsbap') ) {
                continue;
            }

            let parts = $script.src.split('apps/');

            if( parts[0] === $script.src ) {
                parts = $script.src.split('api/');
            }

            if( parts.length <= 1 ) {
                continue;
            }

            this.app = parts[1].split('/')[0];
            this.app = this.app === 'v1' ? 'app' : this.app;

            if( this.app !== 'app' ) {
                this.debug = true;
            }

            break;
        }
    }
}

Config.build();

/* harmony default export */ const config = (Config);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/readableFont.js
const readableFont = {
    enable(){
        document.body.classList.add('acsb-readable-font');
    },

    disable(){
        document.body.classList.remove('acsb-readable-font');
    }
}

/* harmony default export */ const adjustments_readableFont = (readableFont);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/widget/widget.js
;



const Widget = {
    $widget  : undefined,
    $trigger : undefined,
    classes  : {
        mobile      : 'acsb-mobile',
        ready       : 'acsb-ready',
        active      : 'acsb-active',
        hideTrigger : 'acsb-trigger-hidden'
    },

    init(){
        this._populateInitialHtml();
        this._populateStoredParams();

        this.$widget  = EJS.pick('[data-acsb="widget"].acsb-widget');
        this.$trigger = EJS.pick('[data-acsb="trigger"].acsb-trigger');

        EJS.events.on(this.$trigger, 'mouseover click focus', () => this._lazyload());
        EJS.events.on(window, config.events.actionEnabled, () => this._populateFinalHtml());

        if( state.widget.autoshow || window.location.hash.substr(1) === 'showacsb' ) {
            state.updateWidget('autoshow', false).store('widget');
            this.setActive();
        }

        if( config.isIe ) {
            document.body.classList.add('acsb-ie');
            this.$widget.classList.add('acsb-ie');
            this.$trigger.classList.add('acsb-ie');
        }

        this.trigger.init();
        this.widget.init();

        this.mobile.init();
        this.colors.init();

        this.language.init();
        this.tooltips.init();
        this.popups.init();

        this._bindOptions();
        this._bindDropdowns();
        this._bindBehaviours();

        this._bindReady();
        this._bindHover();
    },

    setActive(){
        this._populateFinalHtml();
        state.open = true;

        this.popups.closeAll();
        this._lazyload();

        this.$widget.classList.add(this.classes.active);
        this.$trigger.classList.add(this.classes.active);

        EJS.pick('[data-acsb="blocker"]').classList.add(this.classes.active);

        if( state.isMobile ) {
            document.body.classList.add('acsb-lock-scroll');
        }

        EJS.elements.remove(EJS.picks('[data-acsb="alert"]'));
        this.$widget.setAttribute('aria-hidden', 'false');

        setTimeout(() => EJS.elements.focus(this.$widget), 300);
    },

    setInactive(){
        state.open = false;

        this.$widget.classList.remove(this.classes.active);
        this.$trigger.classList.remove(this.classes.active);

        if( state.isMobile ) {
            document.body.classList.remove('acsb-lock-scroll');
        }

        EJS.pick('[data-acsb="blocker"]').classList.remove(this.classes.active);
        this.$widget.setAttribute('aria-hidden', 'true');

        setTimeout(() => EJS.pick('[data-acsb="main"]').scrollTo(0, 0), 300);
    },

    _lazyload(){
        this._populateFinalHtml();

        for( let $el of EJS.picks('[data-acsb-lazy-load]') ) {
            const tag    = $el.getAttribute('data-acsb-lazy-load-tag');
            const $newEl = EJS.elements.create(tag ? tag : 'img', {src : $el.getAttribute('data-acsb-lazy-load')});

            if( $newEl.src.includes('{domain}') ) {
                $newEl.src = $newEl.src.replace('{domain}', config.domain);
            }

            for( let k in $el.attributes ) {
                if( ! $el.attributes[k].name || $el.attributes[k].name.includes('data-acsb-lazy') ) {
                    continue;
                }

                $el.setAttribute($el.attributes[k].nodeName, $el.attributes[k].nodeValue);
            }

            EJS.elements.insert($newEl, $el);
            EJS.elements.remove($el);
        }
    },

    _bindDropdowns(){
        EJS.events.on(EJS.picks('[data-acsb-collapse]'), 'click', (e, $target) => {
            const $actionBox = EJS.pick(`[data-acsb-actions-box="${$target.getAttribute('data-acsb-collapse')}"]`);

            if( $actionBox.matches('.'+this.classes.active) ) {
                $actionBox.classList.remove(this.classes.active);
            } else {
                $actionBox.classList.add(this.classes.active);
            }
        });
    },

    _bindOptions(){
        EJS.events.on(EJS.picks('[data-acsb-option]'), 'click', (e, $target) => {
            e.preventDefault();
            switch( $target.getAttribute('data-acsb-option') ) {
                case 'close':
                    this.setInactive();
                    break;
                case 'hide':
                    this.setInactive();
                    state.updateWidget('hideTrigger', true).updateWidget('hidden', true).store();
                    EJS.utilities.reload();
                    break;
                case 'statement':
                    if( state.loadParams.statementLink ) {
                        e.preventDefault();
                        window.open(state.loadParams.statementLink, '_blank')
                    } else {
                        this.popups.open('acsb-statement-popup');
                    }
                    break;
                case 'position':
                    this._changePosition();
                    state.store();
                    break;
                case 'reset':
                    state.reset();
                    break;
            }
        });
    },

    _bindHover(){
        EJS.events.on(this.$widget, 'mouseenter', () => {
            this.$widget.classList.add('acsb-hovered');
        });
        EJS.events.on(this.$widget, 'mouseleave', () => {
            this.$widget.classList.remove('acsb-hovered');
        });
    },

    _changePosition(){
        const position   = state.widget.position ? state.widget.position : 'right';
        const leftClass  = 'acsb-widget-position-left';
        const rightClass = 'acsb-widget-position-right';

        if( position === 'left' ) {
            this.$widget.classList.remove(leftClass);
            this.$widget.classList.add(rightClass);
            state.updateWidget('position', 'right');
        } else if( position === 'right' ) {
            this.$widget.classList.remove(rightClass);
            this.$widget.classList.add(leftClass);
            state.updateWidget('position', 'left');
        }
    },

    _bindReady(){
        state.ready = true;

        this.$widget.classList.add(this.classes.ready);
        this.$trigger.classList.add(this.classes.ready);

        EJS.pick('[data-acsb="processor"]').classList.add(this.classes.ready);
        EJS.pick('[data-acsb="blocker"]').classList.add(this.classes.ready);
    },

    _populateInitialHtml() {
        if( this.initialPopulated ) {
            return;
        }

        this.initialPopulated = true;

        EJS.elements.append(EJS.elements.htmlToNodes(state.html.trigger)[0], document.body);
        EJS.elements.append(EJS.elements.create('style', {
            'class' : 'acsb-initial-css acsb-styles'
        }, state.html.initialCss), document.body);

        for( let $node of EJS.elements.htmlToNodes(state.html.widget) ) {
            if( $node.nodeType === 1 ) {
                EJS.elements.append($node, document.body);
            }
        }
    },

    _populateFinalHtml() {
        if( this.finalPopulated ) {
            return;
        }

        this.finalPopulated = true;

        EJS.elements.append(EJS.elements.htmlToNodes(state.html.widget)[0], document.body);
        EJS.elements.append(EJS.elements.create('style', {
            'class' : 'acsb-final-css acsb-styles'
        }, state.html.finalCss), document.body);
    },

    _populateStoredParams(){
        const storage = state.getStorage();
        const options = state.loadParams;

        if( storage ) {
            for( let k in storage.widget ) {
                if( ['position', 'language', 'autoshow', 'hidden', 'hideTrigger'].includes(k) ) {
                    options[k] = storage.widget[k];
                }
            }
        }

        for( let k in options ) {
            if( k === 'hidden' && options[k] ) {
                document.body.classList.add('acsb-hide');
            }
            state.updateWidget(k, options[k]);
        }
    },

    _bindBehaviours(){
        EJS.events.on(document, 'keydown', e => {
            const $focused = EJS.elements.focused();

            if( state.open && e.which === 27 ) {
                const $popup = EJS.pick('[data-acsb-popup].acsb-active');

                if( $popup ) {
                    this.popups.close($popup.getAttribute('data-acsb-popup'));
                } else {
                    this.setInactive();
                }
            }

            if( state.open && e.which === 9 ) {
                if( $focused && ! $focused.closest('[data-acsb="widget"]') ) {
                    EJS.elements.focus(EJS.pick('[tabindex="0"]', this.$widget));
                }

                if( $focused.closest('[data-acsb-footer="true"]') ) {
                    EJS.events.prevent(e);
                    EJS.elements.focus(EJS.pick('[tabindex="0"]', this.$widget));
                }
            }

            if( e.which === 13 && $focused && $focused.closest('[data-acsb]') && ! $focused.closest('a[href], button') ) {
                EJS.elements.click($focused);
            }
        });
    },

    processor : {
        start(){
            document.body.classList.add('js-acsb-processing');
            EJS.pick('.acsb-processor').classList.add(Widget.classes.active);
        },

        end(){
            document.body.classList.remove('js-acsb-processing');
            EJS.pick('.acsb-processor').classList.remove(Widget.classes.active);
        }
    },

    mobile : {
        orgOptions : {},
        mobileSize : 980,

        init(){
            if( window.innerWidth < this.mobileSize ) {
                this.setMobile();
            }

            EJS.events.on(window, 'resize', () => {
                if( window.innerWidth < this.mobileSize ) {
                    if( ! state.isMobile ) {
                        this.setMobile();

                        if( state.actions.accessMode && state.actions.accessMode.enabled ) {
                            EJS.utilities.reload();
                        }
                    }
                } else {
                    if( state.isMobile ) {
                        this.unsetMobile();

                        if( state.actions.accessMode && state.actions.accessMode.enabled ) {
                            EJS.utilities.reload();
                        }
                    }
                }
            });
        },

        setMobile(){
            state.isMobile = true;

            Widget.$widget.classList.add(Widget.classes.mobile);
            Widget.$trigger.classList.add(Widget.classes.mobile);

            this.setMobileOptions();

            if( state.widget.hideMobile ) {
                Widget.$trigger.classList.add('acsb-trigger-hidden');
            }

            EJS.elements.insert(EJS.pick('[data-acsb-action="textAlignLeft"]'), EJS.pick('[data-acsb-action="textAlignCenter"]'), true);
            EJS.elements.insert(EJS.pick('[data-acsb-action="lowSaturation"]'), EJS.pick('[data-acsb-action="highContrast"]'), true);
        },

        unsetMobile(){
            state.isMobile = false;

            Widget.$widget.classList.remove(Widget.classes.mobile);
            Widget.$trigger.classList.remove(Widget.classes.mobile);

            this.unsetMobileOptions();

            if( state.widget.hideTrigger ) {
                Widget.$trigger.classList.add('acsb-trigger-hidden');
            } else {
                Widget.$trigger.classList.remove('acsb-trigger-hidden');
            }

            EJS.elements.insert(EJS.pick('[data-acsb-action="textAlignLeft"]'), EJS.pick('[data-acsb-action="lineHeight"]'), true);
            EJS.elements.insert(EJS.pick('[data-acsb-action="lowSaturation"]'), EJS.pick('[data-acsb-action="titleColor"]'), true);
        },

        setOption(option, value) {
            switch( option ) {
                case 'triggerSize':
                    Widget.trigger.setSize(value);
                    break;
                case 'triggerPositionX':
                    Widget.trigger.setPositionX(value);
                    break;
                case 'triggerPositionY':
                    Widget.trigger.setPositionY(value);
                    break;
                case 'triggerRadius':
                    Widget.trigger.setRadius(value);
                    break;
                case 'triggerOffsetX':
                    Widget.trigger.setOffsetX(value);
                    break;
                case 'triggerOffsetY':
                    Widget.trigger.setOffsetY(value);
                    break;
            }
        },

        setMobileOptions(){
            if( ! state.widget.mobile ) {
                return;
            }

            for( let k in state.widget ) {
                if( k in state.widget.mobile ) {
                    this.orgOptions[k] = state.widget[k];
                    this.setOption(k, state.widget.mobile[k]);
                }
            }
        },

        unsetMobileOptions(){
            for( let k in this.orgOptions ) {
                this.setOption(k, this.orgOptions[k]);
            }
        }
    },

    trigger : {
        init(){
            this.bind();

            if( state.widget.hideTrigger ) {
                Widget.$trigger.classList.add('acsb-trigger-hidden');
            }

            if( ! ['small', 'medium', 'big'].includes(state.widget.triggerSize) ) {
                state.widget.triggerSize = 'medium';
            }

            if( ! ['top', 'center', 'bottom'].includes(state.widget.triggerPositionY) ) {
                state.widget.triggerPositionY = 'bottom';
            }

            if( ! ['left', 'center', 'right'].includes(state.widget.triggerPositionX) ) {
                state.widget.triggerPositionX = 'right';
            }

            Widget.$trigger.classList.add('acsb-trigger-size-'+state.widget.triggerSize);
            Widget.$trigger.classList.add('acsb-trigger-position-x-'+state.widget.triggerPositionX);
            Widget.$trigger.classList.add('acsb-trigger-position-y-'+state.widget.triggerPositionY);

            this.setIcon();
            this.setOffsetX();
            this.setOffsetY();
            this.setRadius();

            EJS.events.on(window, config.events.actionEnabled+' '+config.events.actionDisabled, e => {
                this.setCheckmark(e.type === config.events.actionEnabled);
            });
        },

        bind(){
            EJS.events.on(document, 'keydown', e => {
                if( e.altKey && e.which === 57 ) {
                    EJS.events.prevent(e);

                    if( state.open ) {
                        Widget.setInactive();
                    } else {
                        Widget.setActive();
                    }
                }
            });
            EJS.events.on(document, 'click', (e, $target) => {
                if( ! $target.closest('.acsb-trigger, [data-acsb="trigger"], [data-acsb-custom-trigger="true"]') ) {
                    return;
                }

                if( $target.tagName === 'A' ) {
                    EJS.events.prevent(e);
                }

                if( state.open ) {
                    Widget.setInactive();
                } else {
                    Widget.setActive();
                }
            });
        },

        setIcon(){
            const icons = {
                help      : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><g><path d="M24.982,0C11.199,0,0,11.199,0,24.982c0,13.783,11.199,24.983,24.982,24.983c13.783,0,24.983-11.2,24.983-24.983C49.965,11.199,38.765,0,24.982,0z M48.24,24.982c0,4.25-1.146,8.213-3.102,11.601l-5.053-2.93l-5.227-2.986c0.978-1.665,1.551-3.618,1.551-5.685c0-3.159-1.263-5.973-3.33-8.041l8.386-8.384C45.599,12.749,48.24,18.55,48.24,24.982z M15.333,24.982c0-5.341,4.365-9.648,9.648-9.648c5.342,0,9.649,4.365,9.649,9.648c0,5.342-4.366,9.649-9.649,9.649C19.641,34.631,15.333,30.324,15.333,24.982z M24.982,1.723L24.982,1.723v5.915v5.916l0,0c-5.284,0-9.706,3.618-11.027,8.5L2.526,19.009C5.169,9.074,14.243,1.723,24.982,1.723z M4.881,36.641l5.111-2.93l5.169-2.986c1.952,3.388,5.628,5.686,9.82,5.686c1.035,0,2.067-0.172,2.987-0.402l3.044,11.431c-1.953,0.516-3.964,0.802-6.088,0.802C16.425,48.24,8.901,43.532,4.881,36.641z"/></g></svg>',
                wheels    : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 57" enable-background="new 0 0 50 57" xml:space="preserve"><path d="M20.821,0c-2.962,0-5.363,2.402-5.363,5.364s2.401,5.363,5.363,5.363c2.961,0,5.363-2.401,5.363-5.363S23.782,0,20.821,0z M17.932,11.083c-3.158,0.007-3.741,1.995-3.741,3.622v19.138c0,1.645,1.325,2.975,2.969,2.969l13.597-0.06c0,0,4.681,7.089,7.026,10.628c0.703,1.061,1.638,1.999,2.988,1.999c1.781,0,3.421-1.453,3.226-3.226c-0.074-0.695-0.231-1.354-0.652-1.979c-2.091-3.117-6.234-9.859-8.511-12.39c-0.578-0.643-1.377-1.112-2.315-1.109l-11.242,0.04V18.802l8.016,5.542c1.156,0.797,2.726,0.502,3.522-0.653c0.798-1.156,0.504-2.725-0.653-3.523c0,0-8.335-5.75-12.508-8.629C19.22,11.239,18.418,11.083,17.932,11.083z M48.926,16.447c-0.193,0-0.387,0.069-0.535,0.217l-9.995,9.995H24.225c-0.418,0-0.751,0.334-0.751,0.752v0.277c0,0.419,0.333,0.752,0.751,0.752h14.567c0.226,0,0.445-0.088,0.573-0.217l10.292-10.292c0.295-0.296,0.295-0.773,0-1.069l-0.198-0.198C49.313,16.517,49.117,16.447,48.926,16.447z M12.766,21.672C5.423,23.879,0,30.721,0,38.949C0,48.995,8.121,57,17.892,57c7.486,0,14.004-4.687,16.645-11.4l-2.691-4.058c-1.22,6.446-6.914,11.421-13.953,11.421c-7.955,0-14.21-6.363-14.21-14.014c0-5.9,3.735-11.026,9.084-13.062V21.672z"/></svg>',
                wheels2   : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 42.112 50" enable-background="new 0 0 42.112 50" xml:space="preserve"><path d="M35.956,0.257C35.284,0.104,34.614,0,33.944,0c-3.715,0-6.966,2.528-7.894,6.138c-0.259,1.032-0.309,2.115-0.155,3.147l0,0c-0.153-0.154-0.36-0.258-0.567-0.361L14.805,3.972c-1.393-0.67-2.993-0.103-3.715,1.238l-4.488,8.666c-0.722,1.393-0.154,3.096,1.187,3.817c0.413,0.207,0.876,0.31,1.29,0.31c1.032,0,2.011-0.567,2.528-1.548l3.198-6.19l5.416,2.579l-3.662,5.726c-0.258,0-0.516,0-0.774,0C7.119,18.467,0,25.586,0,34.304S7.119,50.09,15.836,50.09c7.841,0,14.341-5.675,15.58-13.153v8.511c0,1.807,1.495,3.3,3.301,3.3c1.807,0,3.303-1.493,3.303-3.3V33.221c0-1.341-0.826-2.527-2.013-3.043l-5.674-2.321c-0.722-1.651-1.755-3.146-2.993-4.436l3.044-4.798c0.567-0.877,0.877-1.806,0.929-2.786c0.206,0.104,0.465,0.155,0.671,0.207c0.671,0.155,1.341,0.258,2.011,0.258c3.716,0,6.965-2.528,7.895-6.139C42.919,5.829,40.289,1.393,35.956,0.257z M15.94,44.828c-5.829,0-10.524-4.695-10.524-10.524c0-5.828,4.695-10.522,10.524-10.522c5.83,0,10.524,4.694,10.524,10.522C26.464,40.133,21.77,44.828,15.94,44.828z"/></svg>',
                people    : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 100 131.3" enable-background="new 0 0 100 131.3" xml:space="preserve"><path d="M71.6,131.3c1,0,2.1-0.3,3.1-0.8c3.9-1.8,5.5-6.2,3.6-10.1c0,0-14.3-32.7-16.9-44.7c-1-4.2-1.6-15.3-1.8-20.5c0-1.8,1-3.4,2.6-3.9l32-9.6c3.9-1,6.2-5.5,5.2-9.4c-1-3.9-5.5-6.2-9.4-5.2c0,0-29.6,9.6-40.3,9.6c-10.4,0-39.8-9.4-39.8-9.4c-3.9-1-8.3,0.8-9.6,4.7c-1.3,4.2,1,8.6,5.2,9.6l32,9.6c1.6,0.5,2.9,2.1,2.6,3.9c-0.3,5.2-0.8,16.4-1.8,20.5c-2.6,12-16.9,44.7-16.9,44.7c-1.8,3.9,0,8.3,3.6,10.1c1,0.5,2.1,0.8,3.1,0.8c2.9,0,5.7-1.6,6.8-4.4l15.3-31.2l14.6,31.4C66.1,129.7,68.7,131.3,71.6,131.3z"/> <circle style="fill: #fff;" cx="50.3" cy="14.6" r="14.6"/></svg>',
                people2   : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 211.3 255" enable-background="new 0 0 211.3 255" xml:space="preserve"><g><circle cx="105.7" cy="41.5" r="41.8"/> <path d="M205.7,153L146.6,94c-4.7-4.9-11.5-7.2-18.2-6.1c-1.8-0.2-3.6-0.2-5.4,0H88.3c-1.7-0.2-3.4-0.2-5.2,0c-6.6-1.2-13.3,0.8-18.1,5.4L5.6,153c-7.9,8.4-7.4,21.7,1,29.5c8,7.5,20.5,7.5,28.5,0l28.7-28.7v76.8c0.1,13.4,10.9,24.3,24.4,24.4h34.8c13.4-0.1,24.3-10.9,24.4-24.4v-76.8l28.7,28.7c8.4,7.9,21.7,7.4,29.5-1C213.2,173.5,213.2,161.1,205.7,153z"/></g></svg>',
                settings  : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><g><path d="M49.057,20.785l-6.01-1.181c-0.394-1.183-0.885-2.364-1.477-3.448l3.548-5.024c0.295-0.493,0.196-1.181-0.198-1.576l-4.333-4.335c-0.395-0.393-1.086-0.491-1.577-0.197l-5.024,3.448c-1.082-0.59-2.265-1.084-3.448-1.379l-1.083-6.106C29.355,0.494,28.765,0,28.173,0h-6.008c-0.591,0-1.184,0.494-1.281,0.987L19.8,6.995c-1.28,0.394-2.463,0.888-3.645,1.478l-5.123-3.448C10.64,4.631,9.851,4.73,9.457,5.123L5.222,9.457c-0.395,0.396-0.494,1.084-0.197,1.577l3.545,5.123c-0.689,1.084-1.083,2.265-1.477,3.448l-6.01,1.181c-0.59,0.101-1.082,0.593-1.082,1.183v6.107c0,0.592,0.492,1.084,1.082,1.183l6.01,1.184c0.394,1.18,0.886,2.364,1.477,3.545l-3.447,5.022c-0.295,0.494-0.295,1.184,0.099,1.578l4.333,4.334c0.394,0.394,1.084,0.491,1.577,0.098l5.123-3.447c1.083,0.59,2.266,1.083,3.546,1.479l1.083,6.009c0.097,0.492,0.69,0.984,1.183,0.984h6.105c0.591,0,1.183-0.492,1.281-0.984l1.082-6.105c1.184-0.397,2.367-0.791,3.448-1.382l5.024,3.351c0.492,0.395,1.184,0.295,1.578-0.099l4.233-4.335c0.493-0.395,0.493-1.083,0.196-1.576l-3.448-5.024c0.594-1.082,1.085-2.267,1.479-3.446l6.01-1.184c0.593-0.099,0.984-0.591,0.984-1.183v-6.107C50.042,21.377,49.649,20.886,49.057,20.785z M25.021,35.463c-5.713,0-10.44-4.727-10.44-10.44c0-5.812,4.727-10.443,10.44-10.443c5.813,0,10.442,4.631,10.442,10.443C35.463,30.736,30.834,35.463,25.021,35.463z"/></g></svg>',
                settings2 : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 40.733" enable-background="new 0 0 50 40.733" xml:space="preserve"><g><g><path d="M26.848,1.851v0.234c3.192,0.822,5.555,3.724,5.555,7.172c0,3.449-2.362,6.349-5.555,7.172v22.452c0,1.021-0.829,1.852-1.852,1.852c-1.023,0-1.852-0.83-1.852-1.852V16.43c-3.194-0.823-5.556-3.725-5.556-7.172c0-3.449,2.363-6.35,5.556-7.172V1.851C23.145,0.828,23.973,0,24.996,0C26.019,0,26.848,0.828,26.848,1.851z M21.292,9.258c0,2.041,1.66,3.702,3.704,3.702c2.041,0,3.701-1.66,3.701-3.702c0-2.042-1.658-3.704-3.701-3.704C22.955,5.554,21.292,7.214,21.292,9.258z"/> <path d="M9.258,24.304L9.258,24.304c3.192,0.823,5.555,3.725,5.555,7.171c0,3.449-2.363,6.349-5.555,7.172v0.234c0,1.021-0.83,1.852-1.852,1.852c-1.023,0-1.852-0.83-1.852-1.852v-0.234C2.36,37.824,0,34.923,0,31.476c0-3.449,2.362-6.349,5.554-7.171V1.851C5.554,0.828,6.383,0,7.406,0c1.022,0,1.852,0.828,1.852,1.851V24.304z M3.702,31.476c0,2.041,1.662,3.705,3.704,3.705s3.703-1.662,3.703-3.705c0-2.041-1.66-3.702-3.703-3.702C5.365,27.773,3.702,29.434,3.702,31.476z"/> <path d="M44.438,15.972L44.438,15.972c3.192,0.822,5.555,3.724,5.555,7.172c0,3.449-2.362,6.349-5.555,7.172v8.565c0,1.021-0.829,1.852-1.853,1.852c-1.021,0-1.852-0.83-1.852-1.852v-8.565c-3.193-0.823-5.553-3.725-5.553-7.172c0-3.449,2.362-6.35,5.553-7.172V1.851c0-1.023,0.83-1.851,1.852-1.851c1.023,0,1.853,0.828,1.853,1.851V15.972z M38.882,23.145c0,2.041,1.66,3.703,3.703,3.703s3.704-1.661,3.704-3.703s-1.661-3.704-3.704-3.704C40.544,19.441,38.882,21.101,38.882,23.145z"/></g></g></svg>',
                display   : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 32.757" enable-background="new 0 0 50 32.757" xml:space="preserve"><g transform="translate(-90 -500)"><g><path d="M138.475,530.754c-0.561-0.121-1.053-0.304-1.478-0.544c-0.563-0.333-0.995-0.687-1.298-1.058c-0.306-0.374-0.555-0.784-0.754-1.243c-1.185-2.791-2.618-6.31-4.303-10.56c-1.686-4.25-4.016-10.031-6.987-17.35h-4.554c-2.141,5.162-4.095,9.879-5.861,14.16c-1.769,4.279-3.532,8.554-5.292,12.818c-0.288,0.728-0.648,1.358-1.081,1.889c-0.433,0.533-0.96,0.98-1.581,1.344c-0.366,0.229-0.862,0.407-1.491,0.533c-0.629,0.129-1.195,0.209-1.697,0.24v1.773h13.251v-1.773c-1.715-0.152-2.942-0.398-3.677-0.742c-0.737-0.339-1.105-0.755-1.105-1.238c0-0.151,0.026-0.418,0.081-0.798c0.05-0.379,0.223-0.994,0.512-1.843c0.228-0.652,0.497-1.395,0.809-2.232c0.24-0.64,0.457-1.201,0.664-1.717h11.536l0.954,2.319l1.607,3.907c0.105,0.255,0.171,0.462,0.19,0.61c0.025,0.152,0.037,0.291,0.037,0.411c0,0.35-0.553,0.64-1.662,0.876c-1.108,0.236-1.716,0.384-2.536,0.444v1.775H140v-1.773C139.545,530.952,139.035,530.878,138.475,530.754z M122.748,518.965h-8.73l4.334-10.974L122.748,518.965z"/> <path d="M116.806,531.281c-0.414-0.091-0.777-0.223-1.091-0.403c-0.414-0.246-0.732-0.505-0.958-0.777c-0.222-0.275-0.406-0.58-0.552-0.916c-0.872-2.056-1.929-4.649-3.172-7.782c-1.239-3.13-2.957-7.391-5.148-12.782h-3.353c-1.576,3.802-3.018,7.281-4.32,10.436c-1.303,3.152-2.604,6.3-3.9,9.443c-0.211,0.534-0.477,1-0.796,1.396c-0.319,0.392-0.707,0.72-1.166,0.984c-0.269,0.17-0.635,0.301-1.1,0.397c-0.466,0.096-0.882,0.151-1.25,0.177v1.304h9.762v-1.307c-1.262-0.111-2.167-0.293-2.708-0.544c-0.54-0.252-0.814-0.556-0.814-0.916c0-0.111,0.021-0.307,0.061-0.586c0.036-0.28,0.162-0.73,0.376-1.357c0.167-0.48,0.365-1.031,0.596-1.646c0.059-0.158,0.409-1.047,0.89-2.264h7.723l2.265,5.586c0.078,0.188,0.124,0.34,0.142,0.452c0.017,0.111,0.027,0.212,0.027,0.303c0,0.255-0.411,0.472-1.226,0.646c-0.819,0.173-1.528,0.283-2.131,0.329v1.304h12.624v-1.307C117.586,531.45,117.22,531.373,116.806,531.281z M98.844,522.413c1.371-3.462,3.133-7.903,3.133-7.903l3.207,7.903H98.844z"/></g></g></svg>',
                display2  : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 50 40.541" enable-background="new 0 0 50 40.541" xml:space="preserve"><g><g><rect x="8.108" y="18.919" width="5.406" height="21.622"/></g> <g><rect y="17.568" width="21.622" height="5.406"/></g> <g><g><rect x="28.379" y="1.352" width="5.404" height="39.189"/></g> <g><rect x="12.162" width="37.838" height="5.406"/></g></g></g></svg>',
                display3  : '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 34.354 20.866" enable-background="new 0 0 34.354 20.866" xml:space="preserve"><g><path d="M7.922,0.354h3.009l7.141,19.675h-2.919l-2.055-5.893H5.379l-2.134,5.893H0.512L7.922,0.354z M12.342,11.966L9.313,3.274l-3.148,8.692H12.342z"/></g><g><path d="M28.789,11.348c0.553-0.071,0.924-0.302,1.111-0.695c0.107-0.215,0.16-0.524,0.16-0.928c0-0.824-0.293-1.423-0.875-1.795c-0.584-0.372-1.42-0.557-2.506-0.557c-1.258,0-2.149,0.341-2.674,1.023c-0.295,0.377-0.486,0.938-0.576,1.682h-2.25c0.046-1.773,0.619-3.006,1.721-3.7c1.1-0.694,2.379-1.041,3.833-1.041c1.686,0,3.053,0.322,4.107,0.964c1.043,0.643,1.564,1.643,1.564,3v8.265c0,0.25,0.051,0.45,0.154,0.604c0.102,0.15,0.318,0.227,0.648,0.227c0.107,0,0.229-0.008,0.363-0.02c0.133-0.014,0.275-0.033,0.428-0.061v1.78c-0.375,0.107-0.66,0.175-0.857,0.201c-0.195,0.026-0.463,0.04-0.803,0.04c-0.83,0-1.434-0.295-1.809-0.885c-0.197-0.313-0.334-0.754-0.416-1.325c-0.488,0.644-1.195,1.2-2.115,1.675c-0.92,0.473-1.932,0.709-3.04,0.709c-1.332,0-2.418-0.403-3.262-1.211c-0.844-0.807-1.266-1.816-1.266-3.029c0-1.329,0.414-2.358,1.246-3.09c0.83-0.732,1.92-1.182,3.268-1.353L28.789,11.348z M23.711,17.861c0.51,0.401,1.112,0.602,1.808,0.602c0.85,0,1.67-0.197,2.465-0.589c1.34-0.651,2.01-1.716,2.01-3.196v-1.939c-0.295,0.189-0.674,0.346-1.137,0.471s-0.916,0.215-1.363,0.268l-1.457,0.188c-0.874,0.116-1.53,0.299-1.969,0.549c-0.746,0.418-1.119,1.088-1.119,2.004C22.949,16.913,23.203,17.461,23.711,17.861z"/></g></svg>'
            };

            let $icon = EJS.elements.create('span', {
                'class' : 'acsb-trigger-icon'
            }, icons[state.widget.triggerIcon] ? icons[state.widget.triggerIcon] : icons.people);

            if( config.isIe ) {
                $icon = EJS.elements.create('span', {
                    'class' : 'acsb-trigger-icon'
                }, '<span class="acsb-entity">&#x267F;</span>');
            }

            EJS.elements.append($icon, Widget.$trigger, true);
        },

        setSize(size){
            for( let v of ['acsb-trigger-size-medium', 'acsb-trigger-size-small', 'acsb-trigger-size-big'] ) {
                Widget.$trigger.classList.remove(v);
            }

            Widget.$trigger.classList.add('acsb-trigger-size-'+size);
            state.widget.triggerSize = size;
        },

        setRadius(radius){
            if( ! radius ) {
                radius = state.widget.triggerRadius || '50%';
            }

            EJS.elements.css(Widget.$trigger, {'border-radius' : radius});
            state.widget.triggerRadius = radius;
        },

        setPositionX(position){
            for( let v of ['acsb-trigger-position-x-right', 'acsb-trigger-position-x-left'] ) {
                Widget.$trigger.classList.remove(v);
            }

            Widget.$trigger.classList.add('acsb-trigger-position-x-'+position);
            state.widget.triggerPositionX = position;
        },

        setPositionY(position){
            for( let str of ['acsb-trigger-position-y-bottom', 'acsb-trigger-position-y-center', 'acsb-trigger-position-y-top'] ) {
                Widget.$trigger.classList.remove(str);
            }

            Widget.$trigger.classList.add('acsb-trigger-position-y-'+position);
            state.widget.triggerPositionY = position;
        },

        setOffsetX(offset){
            const position      = state.widget.triggerPositionX;
            const defaultOffset = 20;

            if( ! offset && offset !== 0 ) {
                if( state.widget.triggerOffsetX === defaultOffset ) {
                    offset = defaultOffset;
                } else {
                    offset = state.widget.triggerOffsetX;
                }
            }

            if( position === 'right' ) {
                EJS.elements.css(Widget.$trigger, {left : 'auto'});
            } else {
                EJS.elements.css(Widget.$trigger, {right : 'auto'});
            }

            EJS.elements.css(Widget.$trigger, {[position] : offset});
            state.widget.triggerOffsetX = offset;
        },

        setOffsetY(offset){
            const position      = state.widget.triggerPositionY;
            const defaultOffset = 20;

            if( ! offset && offset !== 0 ) {
                if( state.widget.triggerOffsetY === defaultOffset ) {
                    offset = defaultOffset;
                } else {
                    offset = state.widget.triggerOffsetY;
                }
            }

            if( position === 'center' ) {
                EJS.elements.css(Widget.$trigger, {top : offset, bottom : '0'});
            } else {
                if( position === 'top' ) {
                    EJS.elements.css(Widget.$trigger, {button : 'auto'});
                } else {
                    EJS.elements.css(Widget.$trigger, {top : 'auto'});
                }
                EJS.elements.css(Widget.$trigger, {[position] : offset});
            }

            state.widget.triggerOffsetY = offset;
        },

        setCheckmark(show){
            if( show ) {
                Widget.$trigger.classList.add('acsb-actions-active');
                Widget.$widget.classList.add('acsb-actions-active');
            } else {
                Widget.$trigger.classList.remove('acsb-actions-active');
                Widget.$widget.classList.remove('acsb-actions-active');
            }
        }
    },

    widget : {
        init(){
            if( state.widget.statementLink ) {
                /*for( let $el of EJS.picks('[data-acsb-popup-trigger="acsb-statement-popup"], [data-acsb-option="statement"]') ) {
                    $el.role = 'link';
                    $el.href = State.widget['statementLink'];
                }*/
            }

            if( state.widget.footerHtml ) {
                EJS.pick('[data-acsb-footer="true"]', Widget.$widget).innerHTML = state.widget.footerHtml;
            }

            if( ! ['left', 'right'].includes(state.widget.position) ) {
                state.widget.position = 'right';
            }

            if( ['he', 'ar', 'ua'].includes(state.widget.language) ) {
                Widget.$widget.classList.add('acsb-rtl');
            }

            Widget.$widget.classList.add('acsb-widget-position-'+state.widget.position);
        }
    },

    loader : {
        start(){
            Widget.$widget.classList.add('acsb-processing');
            document.body.classList.add('js-acsb-loading');
        },

        end(){
            setTimeout(() => {
                Widget.$widget.classList.add('acsb-processing-done');
            }, 150);
            setTimeout(() => {
                Widget.$widget.classList.remove('acsb-processing');
                Widget.$widget.classList.remove('acsb-processing-done');
            }, 500);

            document.body.classList.remove('js-acsb-loading');
        }
    },

    popups : {
        init(){
            EJS.events.on(EJS.picks('[data-acsb-popup-trigger]'), 'click', (e, $target) => {
                e.preventDefault();
                this.open($target.getAttribute('data-acsb-popup-trigger'));
            });
            EJS.events.on(EJS.picks('[data-acsb-popup-close]'), 'click', (e, $target) => {
                e.preventDefault();
                this.close($target.getAttribute('data-acsb-popup-close'));
            });
            EJS.events.on(Widget.$widget, 'keydown', e => {
                const $activePopup = EJS.pick('[data-acsb-popup].acsb-active');

                if( ! $activePopup || e.which !== 9 ) {
                    return;
                }

                EJS.events.prevent(e);

                const $focused = EJS.elements.focused();
                const $options = EJS.picks('[tabindex="0"], input:not([type="hidden"]), a, iframe, select, textarea, button', $activePopup);

                let nextIndex = 0;
                let i         = 0;

                for( let $el of $options ) {
                    if( $el !== $focused ) {
                        i++;
                        continue;
                    }

                    nextIndex = e.shiftKey ? i-1 : i+1;
                    nextIndex = nextIndex < 0 ? $options.length-1 : nextIndex;
                    nextIndex = nextIndex > $options.length-1 ? 0 : nextIndex;
                    i++;
                }

                if( $options[nextIndex] ) {
                    EJS.elements.focus($options[nextIndex]);
                }
            });
        },

        open(type, content){
            const $popup         = EJS.pick('[data-acsb-popup="'+type+'"]');
            const $contentHolder = EJS.pick('[data-acsb-popup-content-holder]', $popup);
            const $messageHtml   = EJS.pick('[data-acsb-popup-message-actual]', $contentHolder);

            if( content && content.length > 1 ) {
                $messageHtml.innerHTML = content;
            }

            for( let $el of EJS.picks('[data-acsb-popup].acsb-active') ) {
                this.close($el.getAttribute('data-acsb-popup'));
            }

            $popup.classList.add(Widget.classes.active);
            setTimeout(() => EJS.pick('[tabindex="0"]', $popup).focus(), 500);
        },

        close(type){
            EJS.pick('[data-acsb-popup="'+type+'"]').classList.remove(Widget.classes.active);
            Widget.$widget.focus();
        },

        closeAll(){
            EJS.elements.classes(EJS.picks('[data-acsb-popup]'), Widget.classes.active, true);
            Widget.$widget.focus();
        }
    },

    tooltips : {
        init(){
            EJS.events.on(document, 'click keydown focusin mouseover', (e, $target) => {
                if( e.type === 'mouseover' && $target.acsbFocusedOver ) {
                    return;
                }
                if( e.type === 'keydown' && $target.getAttribute('data-acsb-tooltip') ) {
                    return;
                }
                this.remove();
            });
            this.bind();
        },

        unbind($el){
            $el.acsbTooltipDisabled = true;
        },

        bind(size, $els = document){
            EJS.events.on($els, 'mouseover focusin', (e, $target) => {
                if( state.isMobile
                    || this.acsbTooltipThrottle
                    || $target.acsbFocusedOver
                    || $target.acsbTooltipDisabled
                    || ! EJS.elements.isElement($target) ) {
                    return;
                }

                const $el = $target.closest('[data-acsb-tooltip], [data-acsb-tooltip-bound="true"]');

                if( $el ) {
                    this.acsbTooltipThrottle = true;

                    setTimeout(() => {
                        this.fire($el, size, e, $el.getAttribute('data-acsb-tooltip-clickable'));
                        this.acsbTooltipThrottle = false;
                    }, 0);
                }
            });
        },

        fire($el, size, e, clickable){
            const attrs = ['data-acsb-tooltip', 'title', 'data-acsb-tmp-title', 'aria-label', 'alt', 'placeholder', 'value'];
            const text  = (() => {
                let res = '';

                for( let attr of attrs ) {
                    res = $el.getAttribute(attr);

                    if( res && res.length > 0 ) {
                        break;
                    }
                }

                if( ! res ) {
                    res = EJS.elements.text($el);
                }

                return res;
            })();

            if( ! text || text.length < 1 ) {
                return;
            }

            const winSize   = EJS.utilities.getWinSize();
            const positions = {y : 0, x : 0};
            const $tooltip  = EJS.elements.create('span', {
                'data-acsb' : 'tooltip',
                'class'     : 'acsb-tooltip acsb-tooltip-'+(clickable ? 'clickable' : 'standard'),
            }, text);

            if( ! $el.closest('[data-acsb]') && size > 0 ) {
                EJS.elements.css($tooltip, {'font-size' : size+'px'});
            }

            EJS.elements.append(EJS.elements.css($tooltip, {
                top  : positions.y+'px',
                left : positions.x+'px',
            }), document.body);

            if( e && e.pageY && e.pageX ) {
                positions.y = e.pageY;
                positions.x = e.pageX;
            }

            if( e.type === 'focusin' ) {
                const offsets = EJS.elements.offsets(e.target);
                positions.y   = offsets.top-$tooltip.offsetHeight;
                positions.x   = offsets.left-$tooltip.offsetWidth;
            }

            positions.y = positions.y < 5 ? 5 : positions.y;
            positions.x = positions.x < 5 ? 5 : positions.x;
            positions.x = winSize.width-($tooltip.offsetWidth+positions.x) < 5 ? winSize.width-$tooltip.offsetWidth-5 : positions.x;

            EJS.elements.css($tooltip, {top : positions.y+'px', left : positions.x+'px'});
        },

        attach($el, text, size){
            $el.setAttribute('data-acsb-tooltip', text);
            this.bind($el, size);
        },

        remove(){
            EJS.elements.remove(EJS.picks('.acsb-tooltip'));
        }
    },

    colors : {
        init(){
            EJS.elements.append(EJS.elements.create('style', {
                type  : 'text/css',
                class : 'acsb-dynamic-colors'
            }, this.getStylesHtml()), document.body);
        },

        getStylesHtml(){
            let leadColor    = '#146ff8';
            let triggerColor = '#146ff8';

            if( state.widget.leadColor && state.widget.leadColor.substr(0, 1) === '#' ) {
                leadColor = state.widget.leadColor;
            }

            if( state.widget.triggerColor && state.widget.triggerColor.substr(0, 1) === '#' ) {
                triggerColor = state.widget.triggerColor;
            }

            let html = 'body .acsb-widget .acsb-hero,\n'+
                '    body .acsb-widget .acsb-footer,\n'+
                '    body .acsb-widget .acsb-main:after,\n'+
                '    body .acsb-widget .acsb-range-button,\n'+
                '    body .acsb-widget .acsb-action-box.acsb-active,\n'+
                '    body .acsb-widget .acsb-action-box:active,\n'+
                '    body .acsb-widget .acsb-button:hover,\n'+
                '    body .acsb-widget .acsb-button:focus,\n'+
                '    body .acsb-widget .acsb-header,\n'+
                '    body .acsb-widget .acsb-button.acsb-button-colorized,\n'+
                '    body .acsb-widget .acsb-loader .acsb-loader-block,\n'+
                '    body .acsb-widget .acsb-profile.acsb-active .acsb-profile-toggle .acsb-toggle:after,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-given-options .acsb-navigator-given-buttons .acsb-navigator-given-button:hover,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-given-options .acsb-navigator-given-buttons .acsb-navigator-given-button:focus,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-all-options .acsb-navigator-option-group .acsb-navigator-option:hover,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-all-options .acsb-navigator-option-group .acsb-navigator-option:focus,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-given-options .acsb-navigator-given-buttons .acsb-navigator-given-button:hover {\n'+
                '        background-color: '+leadColor+' !important;\n'+
                '    }\n'+
                '\n'+
                '    body .acsb-widget .acsb-action-box:active,\n'+
                '    body .acsb-widget .acsb-action-box:hover,\n'+
                '    body .acsb-widget .acsb-button,\n'+
                '    body .acsb-widget .acsb-button.acsb-button-colorized,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-search input.acsb-navigator-search-input:hover,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-search input.acsb-navigator-search-input:focus,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-given-options .acsb-navigator-given-buttons .acsb-navigator-given-button {\n'+
                '        border-color: '+leadColor+' !important;\n'+
                '    }\n'+
                '\n'+
                '    body .acsb-widget .acsb-hero-action,\n'+
                '    body .acsb-widget .acsb-hero-action i,\n'+
                '    body .acsb-widget .acsb-header-option i,\n'+
                '    body .acsb-widget .acsb-range-base,\n'+
                '    body .acsb-widget .acsb-button,\n'+
                '\tbody .acsb-widget .acsb-profile:hover .acsb-profile-content i,\n'+
                '\tbody .acsb-widget .acsb-profile:focus .acsb-profile-content i,\n'+
                '    body .acsb-widget .acsb-profile:hover .acsb-profile-content .acsb-profile-name,\n'+
                '\tbody .acsb-widget .acsb-profile:focus .acsb-profile-content .acsb-profile-name,\n'+
                '    body .acsb-widget .acsb-profile:hover .acsb-profile-content .acsb-profile-text,\n'+
                '    body .acsb-widget .acsb-profile:focus .acsb-profile-content .acsb-profile-text,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-given-options .acsb-navigator-given-links .acsb-navigator-given-link:hover,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-given-options .acsb-navigator-given-links .acsb-navigator-given-link:focus,\n'+
                '    body .acsb-navigator .acsb-navigator-options .acsb-navigator-given-options .acsb-navigator-given-buttons .acsb-navigator-given-button {\n'+
                '        color: '+leadColor+' !important;\n'+
                '    }';

            if( state.widget.triggerColor !== 'default' ) {
                html += 'body .acsb-trigger {\n'+
                    '        background-color: '+triggerColor+' !important;\n'+
                    '    }\n'+
                    '    body .acsb-trigger .acsb-actions-active-icon svg path {\n'+
                    '        fill: '+triggerColor+' !important;\n'+
                    '    }\n'+
                    '    body .acsb-trigger .acsb-actions-active-icon {\n'+
                    '        border-color: '+triggerColor+' !important;\n'+
                    '    }';
            }

            return html;
        }
    },

    language : {
        init(){
            EJS.events.on(EJS.picks('[data-acsb-language]'), 'click', (e, $target) => {
                this.set($target.getAttribute('data-acsb-language'));
            });
        },

        set(language){
            if( ! build_lang.supported.includes(language) ) {
                language = 'en';
            }

            Widget.setInactive();
            state.updateWidget('language', language, true).updateWidget('autoshow', true, true).store();
            EJS.utilities.reload();
        }
    }
}

/* harmony default export */ const widget = (Widget);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/magnifier.js
;

const magnifier = {
    enable(){
        const selectors = 'input,label,a,td,th,i,img,h1,h2,h3,h4,h5,h6,div,li,p,del,abbr,em,span,strong,button';

        for( let $el of EJS.picks(selectors) ) {
            if( $el.closest('[data-acsb], [data-acsb-tooltip-bound="true"]')
                || ($el.tagName === 'DIV' && EJS.pick(selectors, $el))
                || (EJS.elements.text($el).length < 1 && ! ['INPUT', 'IMG'].includes($el.tagName)) ) {
                continue;
            }

            let fontSize = parseInt(EJS.elements.style($el, 'font-size').replace('px', '')) * 2;
            fontSize     = fontSize <= 22 ? 22 : fontSize;
            fontSize     = fontSize >= 37 ? 37 : fontSize;

            $el.acsbTooltipDisabled = false;
            widget.tooltips.bind(fontSize, $el);
            $el.setAttribute('data-acsb-tooltip-bound', 'true');
        }
    },

    disable(){
        for( let $el of EJS.picks('[data-acsb-tooltip-bound="true"]') ) {
            widget.tooltips.unbind($el);
            $el.removeAttribute('data-acsb-tooltip-bound');
        }
    },

    rebind(){
        this.enable();
    }
}

/* harmony default export */ const adjustments_magnifier = (magnifier);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/emphasizeLinks.js
;

const emphasizeLinks = {
    enable(){
        document.body.classList.add('acsb-emphasize-links');

        for( let $el of EJS.picks('*') ) {
            if( ! build_utilities.isClickable($el)
                || $el.closest('[data-acsb], h1, h2, h3, h4, h5, h6, [role="heading"]')
                || EJS.pick('[data-acsb], h1, h2, h3, h4, h5, h6, [role="heading"]', $el) ) {
                continue;
            }
            $el.setAttribute('data-acsb-clickable', 'true');
        }
    },

    disable(){
        document.body.classList.remove('acsb-emphasize-links');
    }
}

/* harmony default export */ const adjustments_emphasizeLinks = (emphasizeLinks);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/emphasizeTitles.js
;

const emphasizeTitles = {
    enable(){
        document.body.classList.add('acsb-emphasize-titles');
        adjustments.screenReader.headings.handleFakeHeadings();
    },

    disable(){
        document.body.classList.remove('acsb-emphasize-titles');
    }
}

/* harmony default export */ const adjustments_emphasizeTitles = (emphasizeTitles);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/build/navi.js
;







const Navi = {
    built       : false,
    shown       : false,
    $navigator  : undefined,
    $closeFocus : undefined,

    init(){
        EJS.elements.append(EJS.elements.htmlToNodes(state.html.navigator)[0], document.body, true);
        EJS.elements.append(EJS.elements.htmlToNodes(state.html.skiplinks)[0], document.body, true);

        EJS.events.on(EJS.pick('[data-acsb-navigator="trigger"]'), 'focusin focusout click', (e, $target) => {
            if( e.type === 'click' ) {
                if( this.shown ) {
                    this.hide();
                } else {
                    this.show();
                }
            }
            if( e.type === 'focusin' ) {
                $target.classList.remove('acsb-sr-only');
            }
            if( e.type === 'focusout' ) {
                $target.classList.add('acsb-sr-only');
            }
        });
        EJS.events.on(document, 'keydown focus focusin mousedown click', e => {
            if( ! this.shown || e.target.closest('[data-acsb-navigator="trigger"]') ) {
                if( this.$closeFocus ) {
                    this.$closeFocus = undefined;
                }
                return;
            }

            const $focused = EJS.elements.focused();

            if( ! $focused || ! $focused.closest('[data-acsb="navigator"]') ) {
                this.hide();
            }

            if( e.which !== 27 ) {
                return;
            }

            this.hide();

            if( this.$closeFocus && this.$closeFocus.tagName !== 'BODY' ) {
                EJS.elements.focus(this.$closeFocus);
            } else {
                let $focuser = EJS.pick('[data-acsb="navigator-focuser"]');

                if( ! $focuser ) {
                    $focuser = EJS.elements.create('div', {
                        'tabindex'                    : '-1',
                        'data-acsb'                   : 'navigator-focuser',
                        'data-acsb-clear-focus-style' : 'true',
                        'data-acsb-force-visible'     : 'true',
                    });
                }

                EJS.elements.insert($focuser, EJS.pick('[data-acsb="navigator-wrapper"]'), true);
                EJS.elements.focus($focuser);
            }
        });
        EJS.events.on(document, 'keydown', e => {
            if( this.shown ) {
                return;
            }

            if( e.altKey && e.which === 50 ) {
                this.$closeFocus = EJS.elements.focused();
                this.show();
            }

            if( ! e.shiftKey
                && e.which === 9
                && this.$navigator
                && e.target.closest('[data-acsb-skip-link]') === EJS.picks('[data-acsb-skip-link]').pop()
                && this.show() ) {
                e.preventDefault();
            }
        });

        if( ! state.widget.hidden ) {
            this.activateSkipLinks();
        }

        this.$navigator = EJS.pick('[data-acsb="navigator"]');
        this.$navigator.classList.add('acsb-ready');
    },

    show(){
        if( ! this.$navigator || (! this.built && ! this.build()) ) {
            return false;
        }

        this.shown = true;
        this.$navigator.classList.add('acsb-focused');
        this.$navigator.setAttribute('aria-hidden', 'false');

        EJS.elements.attrs(EJS.picks('[aria-expanded="false"]'), {'aria-expanded' : 'true'});
        setTimeout(() => EJS.elements.focus(this.$navigator), 0);

        return true;
    },

    hide(){
        this.shown = false;

        this.$navigator.classList.remove('acsb-focused');
        this.$navigator.setAttribute('aria-hidden', 'true');

        EJS.elements.attrs(EJS.picks('[aria-expanded="true"]'), {'aria-expanded' : 'false',});
    },

    build(){
        this.buildOptions();
        this.buildSearch();

        if( EJS.picks('[data-acsb-navigator="option"]', this.$navigator).length < 3 ) {
            this.$navigator = undefined;
            EJS.elements.remove(this.$navigator);
            return false;
        }

        EJS.events.on(this.$navigator, 'keydown', (e, $target) => {
            if( (e.which !== 40 && e.which !== 38) || ! this.shown ) {
                return;
            }

            EJS.events.prevent(e);

            let next       = 0;
            const $focused = EJS.elements.focused();
            const $options = EJS.picks('[tabindex="-1"]:not([aria-hidden="true"])', $target);

            let i = 0;
            for( let $el of $options ) {
                if( $el !== $focused ) {
                    i++;
                    continue;
                }

                next = e.which === 40 ? i+1 : next;
                next = e.which === 38 ? i-1 : next;
                next = next < 0 ? $options.length-1 : next;
                next = next > $options.length-1 ? 0 : next;
                i++;
            }

            EJS.elements.focus($options[next]);
        });

        this.built = true;
        return true;
    },

    buildOptions(){
        const items      = [];
        const menus      = adjustments.keyNav.menus.getAll();
        const $container = EJS.elements.create('div', {
            'class'               : 'acsb-navigator-all-options',
            'data-acsb-navigator' : 'allOptions',
        });

        for( let k in menus ) {
            if( menus[k].items.length <= 1 ) {
                continue;
            }

            const $group = EJS.elements.create('ul', {'class' : 'acsb-navigator-option-group'});

            for( let item of menus[k].items ) {
                if( ! item || items.includes(item.text.toLowerCase()) ) {
                    continue;
                }

                const $li     = EJS.elements.create('li');
                const $option = EJS.elements.create('span', {
                    'role'                : item.href.length > 0 ? 'link' : 'button',
                    'class'               : 'acsb-navigator-option',
                    'tabindex'            : '-1',
                    'data-acsb-navigator' : 'option',
                }, EJS.strings.titleCase(item.text));

                EJS.events.on($option, 'click', () => {
                    if( item.href.length > 0 ) {
                        window.location.href = build_utilities.getUrlAsAbsolute(item.href);
                    } else {
                        EJS.elements.click(item.$el);
                    }
                    this.hide();
                });

                items.push(item.text.toLowerCase());
                EJS.elements.append($option, $li);
                EJS.elements.append($li, $group);
            }

            if( EJS.picks('[data-acsb-navigator="option"]', $group).length > 1 ) {
                EJS.elements.append($group, $container);
            }
        }

        EJS.elements.append($container, EJS.pick('[data-acsb-navigator="options"]', this.$navigator));
    },

    buildSearch(){
        const $el      = EJS.pick('.acsb-navigator');
        const $search  = EJS.pick('[data-acsb-navigator="search"]', $el);
        const $options = EJS.picks('[data-acsb-navigator="option"]', $el);

        if( $options.length < 5 ) {
            EJS.elements.remove($search);
        }

        EJS.events.on($search, 'submit', e => {
            EJS.events.prevent(e);
            const $results = EJS.pick('[data-acsb-navigator="searchResults"]', $el);

            if( $results ) {
                EJS.elements.focus($results);
            }
        });
        EJS.events.on(EJS.pick('input[type="search"]', $search), 'keyup', (e, $input) => {
            if( [37, 38, 39, 40].includes(e.which) ) {
                return;
            }

            const $results = EJS.pick('[data-acsb-navigator="searchResults"]', $el);

            if( $input.value.length > 1 ) {
                $input.setAttribute('aria-invalid', 'false');

                for( let $el of $options ) {
                    if( EJS.strings.inString(EJS.elements.text($el).toLowerCase(), $input.value.toLowerCase()) ) {
                        EJS.elements.css($el, {'display' : 'block'}).setAttribute('aria-hidden', 'false');
                    } else {
                        EJS.elements.css($el, {'display' : 'none'}).setAttribute('aria-hidden', 'true');
                    }
                }
            } else {
                for( let $el of $options ) {
                    EJS.elements.css($el, {'display' : 'block'}).setAttribute('aria-hidden', 'false');
                    $input.setAttribute('aria-invalid', 'true');
                }
            }

            if( $results ) {
                EJS.elements.remove($results);
            }

            if( $input.value.length > 1 ) {
                let visibleResults = 0;

                for( let $el of $options ) {
                    if( $el.getAttribute('aria-hidden') !== 'true' ) {
                        visibleResults = visibleResults+1;
                    }
                }

                EJS.elements.append(EJS.elements.create('span', {
                    'data-acsb-navigator' : 'searchResults',
                    'tabindex'            : '-1',
                    'class'               : 'acsb-navigator-search-results',
                }, visibleResults+' '+build_lang.get('SEARCH_RESULTS')), $search);
            }
        });
    },

    focusMenu(){
        const $menu = EJS.pick('[data-acsb-main-menu="true"]');

        if( $menu ) {
            let focused = false;
            for( let $el of EJS.picks('[data-acsb-now-navigable="true"]', $menu) ) {
                if( $el.closest('[data-acsb]')
                    || $el.getAttribute('data-acsb-sr-only') === 'true'
                    || build_utilities.isFormField($el)
                    || ! build_utilities.isVisible($el) ) {
                    continue;
                }

                focused = true;
                EJS.elements.focus($el);
                break;
            }

            if( ! focused ) {
                EJS.elements.focus($menu);
            }
        }

        window.scrollTo(0, 0);
    },

    focusMiddle(){
        window.scrollTo(0, document.documentElement.scrollHeight / 2-EJS.utilities.getWinSize().height / 2);
        this.focusWindowCenter();
    },

    focusFooter(){
        const $footerMenus = [];
        const $navigables  = [];
        const $footer      = EJS.pick('[data-acsb-page-footer="true"]');
        let $focused       = null;

        if( $footer ) {
            for( let $el of EJS.picks('[data-acsb-now-navigable="true"]', $footer) ) {
                if( $el.closest('[data-acsb]')
                    || $el.getAttribute('data-acsb-sr-only') === 'true'
                    || build_utilities.isFormField($el)
                    || build_utilities.isFormButton($el)
                    || ! build_utilities.isVisible($el) ) {
                    continue;
                }

                $focused = $el;
                EJS.elements.focus($el);
                break;
            }
        }

        if( $focused ) {
            return;
        }

        for( let $el of EJS.picks('[data-acsb-now-navigable="true"], footer [role="navigation"], div[class*="footer"] [role="navigation"]') ) {
            if( $el.closest('[data-acsb]') || ! build_utilities.isVisible($el) ) {
                continue;
            }

            if( $el.getAttribute('data-acsb-now-navigable') === 'true' ) {
                $navigables.push($el);
            }

            if( $el.getAttribute('role') === 'navigation' ) {
                $footerMenus.push($el);
            }
        }

        const $lastMenu      = $footerMenus.pop();
        const $lastNavigable = $navigables.pop();

        if( $lastMenu ) {
            const $firstMenuItem = EJS.pick('[data-acsb-menu="a"]', $lastMenu);

            if( $firstMenuItem ) {
                EJS.elements.focus(($focused = $firstMenuItem));
            }
        }

        if( $focused ) {
            return;
        }

        if( $lastNavigable ) {
            EJS.elements.focus($lastNavigable);
        } else {
            const $generalNavigables = [];

            for( let $el of EJS.picks('a, button, [tabindex="0"]') ) {
                if( ! $el.closest('[data-acsb]') && build_utilities.isVisible($el) ) {
                    $generalNavigables.push($el);
                }
            }

            EJS.elements.focus($generalNavigables.pop());
        }
    },

    focusContent(){
        let focused = false;
        const $main = adjustments.screenReader.landmarks.getMain();

        for( let $el of EJS.picks('h1, h2, h3, p, a', $main ? $main : undefined, false) ) {
            if( ! build_utilities.isVisible($el)
                || $el.closest('[data-acsb]')
                || build_utilities.getShownText($el).length < 1 ) {
                continue;
            }

            focused = true;
            EJS.elements.focus($el);
            break;
        }

        if( ! focused ) {
            EJS.elements.focus($main);
        }
    },

    focusWindowTop(){
        EJS.elements.remove(EJS.picks('[data-acsb-focuser]'));
        EJS.elements.append(EJS.elements.create('span', {
            'class'             : 'acsb-focuser acsb-focuser-top"',
            'data-acsb-focuser' : 'true',
            'tabindex'          : '0',
        }), document.body);

        let $nearestEls = build_utilities.getNearestElements(EJS.pick('[data-acsb-focuser]'), ['[data-acsb-now-navigable="true"]']);

        if( $nearestEls.length < 1 ) {
            $nearestEls = build_utilities.getNearestElements(EJS.pick('[data-acsb-focuser]'), ['[tabindex="0"],a,button,h1,h2,h3,input,select,textarea']);
        }

        for( let obj of $nearestEls ) {
            if( ! build_utilities.isVisible(obj.$el)
                || obj.$el.matches('[data-acsb-focuser]')
                || EJS.elements.style(obj.$el, 'position') === 'fixed' ) {
                continue;
            }

            let inFixed = false;

            for( let $el of EJS.elements.parents(obj.$el, 'body', null, true) ) {
                if( EJS.elements.style($el, 'position') === 'fixed' ) {
                    inFixed = true;
                    break;
                }
            }

            if( inFixed ) {
                continue;
            }

            EJS.elements.focus(obj.$el);
            EJS.elements.remove(EJS.picks('[data-acsb-focuser]'));

            break;
        }
    },

    focusWindowCenter(){
        EJS.elements.remove(EJS.picks('[data-acsb-focuser]'));
        EJS.elements.append(EJS.elements.create('span', {
            'class'             : 'acsb-focuser',
            'tabindex'          : '0',
            'data-acsb-focuser' : 'true'
        }), document.body);

        let $nearestEls = build_utilities.getNearestElements(EJS.pick('[data-acsb-focuser]'), ['[data-acsb-now-navigable="true"]']);

        if( $nearestEls.length < 1 ) {
            $nearestEls = build_utilities.getNearestElements(EJS.pick('[data-acsb-focuser]'), ['[tabindex="0"],a,button,h1,h2,h3,input,select,textarea']);
        }

        for( let k in $nearestEls ) {
            if( ! build_utilities.isVisible($nearestEls[k].$el) || $nearestEls[k].$el.matches('[data-acsb-focuser]') ) {
                continue;
            }

            EJS.elements.focus($nearestEls[k].$el);
            EJS.elements.remove(EJS.picks('[data-acsb-focuser]'));
            break;
        }
    },

    activateSkipLinks(){
        EJS.pick('[data-acsb="skipLinks"]').classList.add('acsb-ready');

        for( let $el of EJS.picks('[data-acsb-skip-link]') ) {
            EJS.events.on($el, 'click', e => {
                if( ! state.actions.accessMode || ! state.actions.accessMode.enabled ) {
                    actions.enable('motorProfile', false, false, true);
                }

                switch( $el.getAttribute('data-acsb-skip-link') ) {
                    case 'widget':
                        widget.setActive();
                        break;
                    case 'menu':
                        EJS.events.prevent(e);
                        this.focusMenu();
                        break;
                    case 'content':
                        EJS.events.prevent(e);
                        this.focusContent();
                        break;
                    case 'footer':
                        EJS.events.prevent(e);
                        this.focusFooter();
                        break;
                    case 'statement':
                        if( state.loadParams.statementLink ) {
                            window.open(state.loadParams.statementLink, '_blank')
                        } else {
                            widget.setActive();
                            widget.popups.open('acsb-statement-popup');
                        }
                        break;
                }
            });
            EJS.events.on($el, 'focus', () => {
                $el.parentElement.classList.add('acsb-active');
                if( this.shown ) {
                    this.hide();
                }
            });
            EJS.events.on($el, 'focusout', () => {
                $el.parentElement.classList.remove('acsb-active');
            });
        }

        if( state.isMobile ) {
            EJS.elements.remove(EJS.picks('[data-acsb-skip-link="menu"], [data-acsb-skip-link="footer"]'));
        }

        const $srTrigger = adjustments.screenReader.srOnly.create(build_lang.get('SR_TRIGGER_BUTTON'), {
            'role'                 : 'button',
            'class'                : 'acsb-skip-link',
            'data-acsb-sr-trigger' : 'true',
        });

        EJS.events.on(document, 'keydown', (e, $target) => {
            if( e.which !== 9
                || e.shiftKey
                || state.active
                || (state.actions.accessMode && state.actions.accessMode.enabled) ) {
                return;
            }

            const $focused  = EJS.elements.focused();
            const $triggers = EJS.picks('[data-acsb-skip-link]');

            if( ! build_utilities.isFormField($focused) && ! $focused.closest('form, [data-acsb="skipLinks"]') ) {
                EJS.events.prevent(e);
                EJS.elements.focus($triggers[0]);
            }

            if( $target === $triggers[1] ) {
                actions.enable('motorProfile', false, false, true);
            }
        });
        EJS.events.on(window, config.events.actionEnabled, e => {
            if( e.detail.action !== 'screenReader' ) {
                return;
            }

            if( ! EJS.pick('[data-acsb-main-menu="true"]') ) {
                EJS.elements.remove(EJS.pick('[data-acsb-skip-link="menu"]'));
            }

            if( ! EJS.pick('[data-acsb-page-footer="true"]') ) {
                EJS.elements.remove(EJS.pick('[data-acsb-skip-link="footer"]'));
            }
        });
        EJS.events.on(EJS.elements.append($srTrigger, document.body, true), 'click', () => {
            if( ! state.actions.accessMode || ! state.actions.accessMode.enabled ) {
                actions.enable('motorProfile', false, false, true);
            }
        });
    },
}

/* harmony default export */ const navi = (Navi);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/actions.js
;






const Actions = {
    attrs : {
        boxes        : 'data-acsb-actions-box',
        actions      : 'data-acsb-action',
        rangeActions : 'data-acsb-range-action',
        selecter     : 'data-acsb-selecter',
        color        : 'data-acsb-color',
    },

    init(){
        for( let $el of EJS.picks('head meta[name="viewport"]') ) {
            if( ! $el.content ) {
                continue;
            }

            for( let str of $el.content.split(',') ) {
                if( str.toLowerCase().includes('maximum-scale=') ) {
                    const value = str.split('=')[1];

                    if( parseInt(value) < 5 ) {
                        $el.content = $el.content.replace('maximum-scale='+value, 'maximum-scale=5');
                    }
                }
                if( str.toLowerCase().includes('user-scalable=no') ) {
                    $el.setAttribute('content', $el.content.replace('user-scalable=no', 'user-scalable=yes'));
                }
            }
        }

        for( let $el of EJS.picks('['+this.attrs.selecter+'] select') ) {
            const type = $el.closest('['+this.attrs.selecter+']').getAttribute(this.attrs.selecter);

            if( typeof this.selecter[type+'Builder'] === 'function' ) {
                this.selecter[type+'Builder'](type, $el);
            }
        }

        EJS.events.on(document, 'keydown', e => {
            if( e.which === 49 && e.altKey
                && (! state.actions.accessMode || ! state.actions.accessMode.enabled) ) {
                this.enable('motorProfile', {}, false);

                if( ! window['acsbChildFrame'] ) {
                    const $el = adjustments.screenReader.srOnly.create(build_lang.get('ACCESS_MODE_IS_ON'), {}, 'span', true);
                    EJS.elements.focus(EJS.elements.append($el, document.body, true));
                }
            }

            if( e.which === 56 && e.altKey ) {
                state.reset();
            }

            if( e.which === 48 && e.altKey ) {
                if( state.widget.hidden ) {
                    state.reset();
                } else {
                    state.reset(false);
                    state.updateWidget('hideTrigger', true).updateWidget('hidden', true).store();
                    EJS.utilities.reload(0);
                }
            }
        });

        EJS.events.on(EJS.picks('['+this.attrs.actions+']'), 'click', (e, $target) => {
            if( EJS.picks('[data-acsb-range-slider]', $target).length > 0 ) {
                return;
            }

            const options = this.getActionOptions($target);

            if( state.actions[options.action] && state.actions[options.action].enabled ) {
                this.disable(options.action, options, true);
            } else {
                this.enable(options.action, options, true);
            }
        });
        EJS.events.on(EJS.picks('['+this.attrs.rangeActions+']'), 'click', (e, $target) => {
            const options = this.getActionOptions($target.closest('['+this.attrs.actions+']'));
            this.range.update(options.action, options, true, $target.getAttribute('data-acsb-range-action') === 'decrease');
        });
        EJS.events.on(EJS.picks('['+this.attrs.color+']'), 'click', (e, $target) => {
            const options = this.getActionOptions($target.closest('['+this.attrs.actions+']'));
            options.color = $target.getAttribute(this.attrs.color);

            if( options.color === 'disable'
                || (state.actions[options.action]
                    && state.actions[options.action].enabled
                    && state.actions[options.action].options.color === options.color) ) {
                this.coloring.disable(options.action, options, true);
            } else {
                this.coloring.enable(options.action, options, true);
            }
        });

        this._enableSearch();
        this._enableAnalytics();
    },

    enable(action, options, showLoader = false, cached = false){
        if( state.actions[action] && state.actions[action].enabled ) {
            return;
        }

        let actionObj   = adjustments[action];
        const $triggers = EJS.picks('[data-acsb="widget"] ['+this.attrs.actions+'="'+action+'"]');

        if( options.actionGroup && options.actionGroup.length > 1 ) {
            actionObj = adjustments[options.actionGroup];
        }

        if( ! actionObj || ! actionObj.enable ) {
            return;
        }

        if( showLoader ) {
            widget.loader.start();
            widget.loader.end();
        }

        EJS.elements.attrs($triggers, {'class' : 'acsb-active', 'aria-pressed' : 'true'});

        if( action.includes('Profile') ) {
            for( let k in state.actions ) {
                if( k.includes('Profile') && state.actions[k].enabled ) {
                    this.disable(k, state.actions[k].options, false);
                }
            }
        }

        state.updateAction(action, true, options, cached).store();
        actionObj.enable(options, cached);

        EJS.events.trigger(window, config.events.actionEnabled, {
            $triggers : $triggers,
            action    : action,
            options   : options
        });
    },

    disable(action, options, showLoader = false){
        let actionObj   = adjustments[action];
        const $triggers = EJS.picks('[data-acsb="widget"] ['+this.attrs.actions+'="'+action+'"]');

        if( options.actionGroup && options.actionGroup.length > 1 ) {
            actionObj = adjustments[options.actionGroup];
        }

        if( ! actionObj || ! actionObj.disable ) {
            return;
        }

        if( showLoader ) {
            widget.loader.start();
            widget.loader.end();
        }

        for( let $trigger of $triggers ) {
            $trigger.classList.remove('acsb-active');
            $trigger.setAttribute('aria-pressed', 'false');
        }

        state.updateAction(action, false, options).store();
        actionObj.disable(options);

        EJS.events.trigger(window, config.events.actionDisabled, {
            $triggers : $triggers,
            action    : action,
            options   : options,
        });
    },

    getActionOptions($action){
        return {
            action            : $action.getAttribute('data-acsb-action'),
            actionGroup       : $action.getAttribute('data-acsb-action-group'),
            specificElement   : $action.getAttribute('data-acsb-action-specific-element'),
            specificIncrement : parseFloat($action.getAttribute('data-acsb-action-specific-increment')),
        };
    },

    populateFromStorage(){
        const storage = state.getStorage();

        if( ! storage ) {
            return;
        }

        if( storage.date && parseInt((new Date()-new Date(storage.date)) / (1000 * 60 * 60 * 24), 10) > 7 ) {
            return EJS.utilities.delStorage('acsbState');
        }

        for( let k in storage.actions ) {
            if( ! storage.actions[k].enabled
                || ! storage.actions[k].options
                || (['keyNav', 'screenReader'].includes(k) && storage.actions['accessMode']) ) {
                continue;
            }

            if( storage.actions[k].options.percent ) {
                if( storage.actions[k].options.decrease ) {
                    this.range.update(k, storage.actions[k].options, false, true, true);
                } else {
                    this.range.update(k, storage.actions[k].options, false, false, true);
                }
            } else {
                if( ! storage.actions[k].options.color ) {
                    this.enable(k, storage.actions[k].options, false, true);
                } else {
                    this.coloring.enable(k, storage.actions[k].options, false, true);
                }
            }
        }
    },

    _enableAnalytics(){
        let reported = [];
        let batch    = [];

        EJS.events.on(window, config.events.actionEnabled, e => {
            if( ! state.actions[e.detail.action] || state.actions[e.detail.action].cached ) {
                return;
            }
            batch.push(e.detail.action);
        });

        setInterval(() => {
            if( batch.length < 1 ) {
                return;
            }

            let profile  = null;
            let toReport = [];

            for( let v of batch ) {
                if( v.includes('Profile') ) {
                    profile = v;
                }
                if( ['screenReader', 'accessMode', 'letterNav', 'motorProfile', 'keyNav'].includes(v) ) {
                    profile = 'motorProfile';
                }
            }

            if( profile ) {
                if( ! reported.includes(profile) ) {
                    toReport.push(profile);
                }
            } else {
                for( let v of batch ) {
                    if( ! reported.includes(v) ) {
                        toReport.push(v);
                    }
                }
            }

            toReport = EJS.arrays.filter(toReport);
            reported = EJS.arrays.filter(reported.concat(toReport));

            if( toReport.length > 0 ) {
                EJS.fetch(config.endpoint+'/'+config.app+'/?remote=processAnalyticsRemote', {
                    actions : JSON.stringify(toReport)
                });
            }
            batch = [];
        }, 300);
    },

    _enableSearch(){
        const $form = EJS.pick('[data-acsb-search="form"]');
        const $wrap = EJS.pick('[data-acsb-search-results="wrapper"]');
        const $list = EJS.pick('[data-acsb-search-results="list"]');

        EJS.events.on($form, 'submit', e => EJS.events.prevent(e));
        EJS.events.on(EJS.pick('[data-acsb-search-results="close"]'), 'click', () => {
            $wrap.classList.remove('acsb-active');
            $list.innerHTML = '';
        });
        EJS.events.on(EJS.pick('[name="acsb_search"]', $form), 'keyup', (e, $input) => {
            if( $input.value.length <= 1 ) {
                $wrap.classList.remove('acsb-active');
                $list.innerHTML = '';
                return;
            }

            EJS.fetch('https://'+state.widget.language+'.wikipedia.org/w/api.php?action=query&format=json&utf8=&explaintext=&extracts=&exintro=&generator=prefixsearch&prop=pageprops|extracts|exintro|extracts|description&redirects=&gpssearch='+$input.value+'&gpslimit=3&origin=*').then(res => {
                res = JSON.parse(res);

                if( $input.value.length <= 1 || ! res.query || ! res.query.pages || Object.keys(res.query.pages).length < 1 ) {
                    return;
                }

                let results = [];

                for( let k in res.query.pages ) {
                    const obj = res.query.pages[k];

                    if( obj.description === 'Disambiguation page providing links to topics that could be referred to by the same search term' ) {
                        continue;
                    }

                    results.push({
                        title       : res.query.pages[k].title,
                        index       : res.query.pages[k].index,
                        description : ! obj.description && obj.extract ? obj.extract : obj.description,
                    });
                }

                if( results.length > 0 ) {
                    $wrap.classList.remove('acsb-active');
                    $list.innerHTML = '';

                    let i = 0;
                    for( let result of EJS.arrays.sort(results, 'index') ) {
                        i++;
                        EJS.elements.append(EJS.elements.htmlToNodes(
                            `<div class="acsb-search-result">
                                <span class="acsb-title">0${String(i)} ${result.title}</span>
                                <p class="acsb-text">${result.description ? result.description : ''}</p>
                                <a target="_blank" class="acsb-link" href="https://${state.widget.language}.wikipedia.org/wiki/${result.title}">
                                    ${build_lang.get('MORE_IN_WIKIPEDIA')}
                                </a>
                             </div>`
                        )[0], $list);
                    }

                    $wrap.classList.add('acsb-active');
                }
            });
        });
    },

    selecter : {
        usefulLinksBuilder(type, select){
            EJS.events.on(select, 'focus', () => {
                if( select.acsbSelecterBound ) {
                    return;
                }

                if( ! state.actions.accessMode || ! state.actions.accessMode.enabled ) {
                    adjustments.keyNav.menus.process();
                }

                const groups = [];
                const menus  = adjustments.keyNav.menus.getAll();

                for( let k in menus ) {
                    const group = [];

                    for( let item of menus[k].items ) {
                        group.push({lbl : EJS.strings.sentenceCase(item.text), val : item.href});
                    }

                    groups.push(group);
                }

                for( let group of groups ) {
                    const $optGroup = EJS.elements.create('optgroup', {label : ''});

                    for( let k in group ) {
                        EJS.elements.append(EJS.elements.create('option', {value : group[k].val}, group[k].lbl), $optGroup);
                    }

                    EJS.elements.append($optGroup, select);
                }

                EJS.events.on(select, 'change', () => {
                    switch( select.value ) {
                        case 'homepage':
                            window.location.href = document.location.origin;
                            EJS.utilities.reload();
                            break;
                        case 'content':
                            navi.focusContent();
                            break;
                        case 'top':
                            navi.focusMenu();
                            break;
                        case 'middle':
                            navi.focusMiddle();
                            break;
                        case 'bottom':
                            navi.focusFooter();
                            break;
                        default:
                            for( let menu of menus ) {
                                for( let item of menu.items ) {
                                    if( item.href === select.value ) {
                                        EJS.elements.click(item.$el);
                                    }
                                }
                            }
                            break;
                    }

                    widget.setInactive();
                });

                select.acsbSelecterBound = true;
            });
        }
    },

    coloring : {
        enable(action, options, showLoader = false, cached = false){
            let cssProp = 'color';
            let $els    = [];

            switch( action ) {
                case 'textColor':
                    $els = EJS.picks('p, ul, li, a, label, span, div, section, body, article, main, aside');
                    break;
                case 'titleColor':
                    $els = EJS.picks('h1, h2, h3, h4, h5, h6');
                    break;
                case 'backgroundColor':
                    $els    = EJS.picks('*');
                    cssProp = 'background-color';
                    if( ! document.body.getAttribute('data-acsb-active-background-color') ) {
                        EJS.elements.css(document.body, {'background-color' : options.color});
                    }
                    break;
            }

            for( let $el of $els ) {
                if( $el.closest('[data-acsb]') ) {
                    continue;
                }

                if( action === 'backgroundColor' && $el.getAttribute('data-acsb-active-background-color') === options.color
                    || action === 'titleColor' && $el.getAttribute('data-acsb-active-title-color') === options.color
                    || action === 'textColor' && $el.getAttribute('data-acsb-active-color') === options.color ) {
                    continue;
                }

                const styles    = {};
                styles[cssProp] = options.color;

                if( cssProp === 'background-color' ) {
                    if( EJS.elements.style($el, 'background-color') !== 'rgba(0, 0, 0, 0)'
                        && $el.childNodes.length > 0 ) {
                        EJS.elements.css($el, styles, true);
                        $el.setAttribute('data-acsb-active-background-color', options.color);
                    }
                } else {
                    EJS.elements.css($el, styles, true);
                    if( action === 'titleColor' ) {
                        $el.setAttribute('data-acsb-active-title-color', options.color);
                    } else {
                        $el.setAttribute('data-acsb-active-color', options.color);
                    }
                }
            }

            const $action = EJS.pick('[data-acsb-action="'+action+'"]');

            for( let $el of EJS.picks('[data-acsb-color]', $action) ) {
                if( $el.getAttribute('data-acsb-color') === options.color ) {
                    $el.classList.add('acsb-active');
                } else {
                    $el.classList.remove('acsb-active');
                }
            }

            if( showLoader ) {
                widget.loader.start();
                widget.loader.end();
            }

            state.updateAction(action, true, options, cached).store();
            EJS.events.trigger(window, config.events.actionEnabled, {
                action   : action,
                $trigger : $action,
                options  : options,
            });
        },

        disable(action, options, showLoader = false){
            const $action = EJS.pick('[data-acsb-action="'+action+'"]');

            for( let $el of EJS.picks('[data-acsb-color]', $action) ) {
                $el.classList.remove('acsb-active');
            }

            for( let $el of EJS.picks('[data-acsb-active-color], [data-acsb-active-background-color], [data-acsb-active-title-color]') ) {
                if( $el.getAttribute('data-acsb-active-color') && action === 'textColor' ) {
                    EJS.elements.css($el, {color : ''});
                }

                if( $el.getAttribute('data-acsb-active-title-color') && action === 'titleColor' ) {
                    EJS.elements.css($el, {color : ''});
                }

                if( $el.getAttribute('data-acsb-active-background-color') && action === 'backgroundColor' ) {
                    EJS.elements.css($el, {'background-color' : ''});
                }
            }

            if( action === 'backgroundColor' ) {
                EJS.elements.css(document.body, {'background-color' : ''});
            }

            if( showLoader ) {
                widget.loader.start();
                widget.loader.end();
            }

            state.updateAction(action, false, options).store();
            EJS.events.trigger(window, config.events.actionDisabled, {
                action   : action,
                $trigger : $action,
                options  : options,
            });
        },

        rebind(options){
            this.enable(options.action, options, false, false);
        },
    },

    range : {
        update(action, options, showLoader = false, decrease = false, cached = false){
            const $el   = EJS.pick('[data-acsb-action="'+action+'"]');
            const $base = EJS.pick('[data-acsb-range-current-number]', $el);

            if( ! options.percent && options.percent !== 0 ) {
                if( decrease ) {
                    options.percent = -2;
                } else {
                    options.percent = 2;
                }
            }

            if( state.actions[action] && state.actions[action].options.percent ) {
                options.percent = options.percent === 0 ? 0 : state.actions[action].options.percent+options.percent;
            }

            if( ! options.cssProperty ) {
                options.cssProperty = $el.getAttribute('data-acsb-action-css-property');
            }

            if( showLoader ) {
                widget.loader.start();
                widget.loader.end();
            }

            if( decrease ) {
                this.decrease(options);
            } else {
                this.increase(options);
            }

            if( options.percent * 5 > 0 ) {
                $base.innerHTML = '+'+options.percent * 5+'%';
            } else if( options.percent * 5 === 0 ) {
                $base.innerHTML = $base.getAttribute('data-acsb-range-default');
            } else {
                $base.innerHTML = options.percent * 5+'%';
            }

            state.updateAction(action, true, options, cached).store();
            EJS.events.trigger(window, config.events.actionEnabled, {
                action   : action,
                $trigger : $el,
                options  : options,
            });
        },

        increase(options, rebind = false){
            this.apply(false, options, rebind);
        },

        decrease(options, rebind = false){
            this.apply(true, options, rebind);
        },

        apply(decrease, options, rebind = false){
            let $els = [];

            if( options.specificElement && options.specificElement.length > 0 ) {
                $els = EJS.picks(options.specificElement);
            } else {
                $els = EJS.picks('*');
            }

            for( let $el of $els ) {
                if( (rebind && $el.acsbRangeBound)
                    || ['SCRIPT', 'STYLE', 'IMG', 'HTML'].includes($el.tagName)
                    || $el.closest('[data-acsb]')
                    || ! EJS.elements.hasTextNodes($el) ) {
                    continue;
                }

                if( $el.tagName !== 'BODY'
                    && $el.childNodes
                    && $el.childNodes[0]
                    && $el.childNodes[0].nodeValue
                    && $el.childNodes[0].nodeValue.trim().length < 1 ) {
                    continue;
                }

                $el.acsbRangeBound = true;

                let orgVal = $el.getAttribute('data-acsb-original-'+options.cssProperty+'-value');

                if( ! orgVal ) {
                    orgVal = EJS.elements.style($el, options.cssProperty);

                    if( ! decrease && options.cssProperty === 'font-size' && parseInt(orgVal.replace('px', '')) < 11 ) {
                        orgVal = '11px';
                    }

                    $el.setAttribute('data-acsb-original-'+options.cssProperty+'-value', orgVal);
                }

                orgVal = orgVal === 'normal' ? '0px' : orgVal;

                let unitType   = orgVal === 'normal' ? 'px' : orgVal.slice(-2);
                let value      = isNaN(parseFloat(orgVal)) ? 0 : parseFloat(orgVal);
                let finalValue = value;

                if( ! unitType || unitType === '0' ) {
                    unitType = 'px';
                }

                const styles = {};

                if( options.percent === 0 ) {
                    styles[options.cssProperty] = finalValue = orgVal;
                } else {
                    const difference = Math.ceil(Math.abs((value / 100) * options.percent));
                    finalValue       = value+difference;

                    if( options.percent < 0 ) {
                        finalValue = value-difference;
                    }

                    if( options.specificIncrement !== 0 ) {
                        finalValue = options.percent / 5 / options.specificIncrement+value;
                    }

                    if( options.cssProperty === 'font-size' && ! decrease && finalValue < 12 ) {
                        styles['font-size'] = '12px';
                    }

                    styles[options.cssProperty] = finalValue+unitType;
                }

                if( options.cssProperty === 'zoom' ) {
                    if( navigator.userAgent.toLowerCase().includes('firefox') ) {
                        let $ffWrap = EJS.pick('.acsb-ff-wrapper');

                        if( ! $ffWrap ) {
                            $ffWrap = EJS.elements.append(EJS.elements.create('div', {'class' : 'acsb-ff-wrapper'}), document.body);
                        }

                        for( let $el of EJS.picks('body > *') ) {
                            if( $el.closest('[data-acsb], .acsb-ff-wrapper') ) {
                                continue;
                            }
                            EJS.elements.append($el, $ffWrap);
                        }

                        EJS.elements.css($ffWrap, {
                            'transform'        : 'scale('+(finalValue+1)+')',
                            'transform-origin' : 'top center',
                        });
                    } else {
                        for( let $el of EJS.picks('body > *') ) {
                            EJS.elements.css($el, styles, true);
                        }
                    }
                } else {
                    EJS.elements.css($el, styles, true);
                }
            }
        },

        rebind(options){
            if( options.decrease ) {
                this.decrease(options, true);
            } else {
                this.increase(options, true);
            }
        }
    }
}

/* harmony default export */ const actions = (Actions);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/textAlign.js
;

const textAlign = {
    enable(options){
        this.reset([options.action]);
        document.body.classList.add('acsb-text-align-'+options.action.replace('textAlign', '').toLowerCase());
    },

    disable(options){
        document.body.classList.remove('acsb-text-align-'+
            options.action.replace('textAlign', '').toLowerCase());
    },

    reset(excludes){
        const actionsToReset   = [];
        const alignmentActions = [
            'textAlignLeft',
            'textAlignRight',
            'textAlignCenter',
        ];

        for( let v of alignmentActions ) {
            if( ! excludes.includes(v) ) {
                actionsToReset.push(v);
            }
        }

        for( let v of actionsToReset ) {
            actions.disable(v, {actionGroup : 'textAlign', action : v}, false);
        }
    }

}

/* harmony default export */ const adjustments_textAlign = (textAlign);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/contrast.js
;



const contrast = {
    enable(options){
        this.reset([options.action]);
        this.apply(false, options);
    },

    disable(options){
        this.apply(true, options);
    },

    remove(type){
        EJS.elements.classes(EJS.picks('.acsb-'+type+'-contrast'), 'acsb-'+type+'-contrast', true);
        EJS.elements.classes(EJS.picks('.acsb-ignore-contrast'), 'acsb-ignore-contrast', true);
    },

    applyContrast(type){
        EJS.pick('html').classList.add('acsb-'+type+'-contrast');

        if( ['desaturate', 'monochrome', 'saturation', 'contrast'].includes(type) ) {
            return;
        }

        for( let $el of EJS.picks('*') ) {
            if( $el.closest('[data-acsb]')
                || ['PICTURE', 'BODY', 'HTML', 'STYLE', 'SCRIPT', 'BR', 'IMG'].includes($el.tagName) ) {
                continue;
            }

            const bgImage = EJS.elements.style($el, 'background-image');

            if( bgImage !== 'none' ) {
                if( EJS.strings.inString(bgImage, '-gradient') ) {
                    EJS.elements.css($el, {'background-image' : 'none'});
                } else {
                    $el.classList.add('acsb-bg-image');
                }
            }

            if( build_utilities.isClickable($el) ) {
                $el.setAttribute('data-acsb-clickable', 'true');
            }

            if( adjustments.screenReader.clickables.isButton($el) ) {
                $el.classList.add('acsb-outline-contrast');
            }

            if( EJS.elements.style($el, 'background-color') !== 'rgba(0, 0, 0, 0)' && $el.textContent.length > 0 ) {
                $el.classList.add('acsb-contrast');
                continue;
            }

            if( ['I', 'SPAN'].includes($el.tagName) && $el.innerText.length < 1 && $el.offsetWidth >= 16 && $el.offsetHeight >= 16 ) {
                $el.classList.add('acsb-contrast');
                continue;
            }

            for( let node of $el.childNodes ) {
                if( node.nodeType === 3 && EJS.strings.removeWhites(node.nodeValue).length > 0 ) {
                    $el.classList.add('acsb-contrast');
                }
            }
        }
    },

    reset(excludes){
        const actionsToReset  = [];
        const contrastActions = [
            'monochrome',
            'lowSaturation',
            'darkContrast',
            'lightContrast',
            'highSaturation',
            'highContrast',
        ];

        for( let v of contrastActions ) {
            if( ! excludes.includes(v) ) {
                actionsToReset.push(v);
            }
        }

        for( let v of actionsToReset ) {
            actions.disable(v, {actionGroup : 'contrast', action : v}, false);
        }
    },

    apply(disable, options){
        switch( options.action ) {
            case 'monochrome':
                if( disable ) {
                    document.querySelector('html').classList.remove('acsb-monochrome');
                } else {
                    document.querySelector('html').classList.add('acsb-monochrome');
                }
                break;
            case 'darkContrast':
                if( disable ) {
                    this.remove('dark');
                } else {
                    this.applyContrast('dark');
                }
                break;
            case 'lightContrast':
                if( disable ) {
                    this.remove('light');
                } else {
                    this.applyContrast('light');
                }
                break;
            case 'lowSaturation':
                if( disable ) {
                    this.remove('desaturate');
                } else {
                    this.applyContrast('desaturate');
                }
                break;
            case 'highSaturation':
                if( disable ) {
                    this.remove('saturation');
                } else {
                    this.applyContrast('saturation');
                }
                break;
            case 'highContrast':
                if( disable ) {
                    this.remove('contrast');
                } else {
                    this.applyContrast('contrast');
                }
                break;
        }
    },

    rebind(options){
        this.apply(false, options);
    },

    getRatio(rgb1, rgb2){
        const lum1      = this.getLuminance(rgb1[0], rgb1[1], rgb1[2]);
        const lum2      = this.getLuminance(rgb2[0], rgb2[1], rgb2[2]);
        const brightest = Math.max(lum1, lum2);
        const darkest   = Math.min(lum1, lum2);

        return (brightest+0.05) / (darkest+0.05);
    },

    getLuminance(r, g, b){
        const a = [r, g, b].map(v => {
            v /= 255;
            return v <= 0.03928 ? v / 12.92 : Math.pow((v+0.055) / 1.055, 2.4);
        });
        return a[0] * 0.2126+a[1] * 0.7152+a[2] * 0.0722;
    }
}

/* harmony default export */ const adjustments_contrast = (contrast);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/mute.js
const mute = {
    enable(){
        for( let $el of EJS.picks('video, audio, iframe') ) {
            $el.setAttribute('muted', 'true');

            if( $el.tagName !== 'IFRAME' ) {
                continue;
            }

            let src    = $el.getAttribute('src').replace('mute=0', 'mute=1').replace('muted=0', 'muted=1');
            let allow  = $el.getAttribute('allow');
            let params = '?mute=1&muted=1&autoplay=1';

            if( src.includes('?') ) {
                params = params.replace('?', '&');
            }

            if( allow && allow.includes('autoplay') ) {
                $el.setAttribute('allow', allow.replace('autoplay', ''));
            }

            if( src.includes('enablejsapi') ) {
                src = src.replace('enablejsapi', 'killjsapi');
            }

            $el.setAttribute('src', src+params);
        }
    },

    disable(){
        for( let $el of EJS.picks('video, audio, iframe') ) {
            $el.removeAttribute('muted');

            if( $el.tagName === 'IFRAME' ) {
                $el.setAttribute('src', $el.getAttribute('src').replace('mute=1', 'mute=0'));
            }
        }
    }
}

/* harmony default export */ const adjustments_mute = (mute);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/cursor.js
;

const cursor = {
    enable(options){
        this.reset([options.action]);

        for( let $el of EJS.picks('*') ) {
            if( EJS.elements.style($el, 'cursor') === 'pointer' ) {
                $el.classList.add('acsb-cursor-pointer');
            }
        }

        document.body.classList.add('acsb-big-'+options.action.replace('big', '').replace('Cursor', '').toLowerCase()+'-cursor');
    },

    disable(options){
        EJS.elements.classes(EJS.picks('.acsb-cursor-pointer'), 'acsb-cursor-pointer', true);
        document.body.classList.remove('acsb-big-'+options.action.replace('big', '').replace('Cursor', '').toLowerCase()+'-cursor');
    },

    reset(excludes){
        const actionsToReset = [];

        for( let v of ['bigBlackCursor', 'bigWhiteCursor'] ) {
            if( ! excludes.includes(v) ) {
                actionsToReset.push(v);
            }
        }

        for( let v of actionsToReset ) {
            actions.disable(v, {actionGroup : 'cursor', action : v}, false);
        }
    }
}

/* harmony default export */ const adjustments_cursor = (cursor);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/hideImages.js
const hideImages = {
    enable(){
        document.body.classList.add('acsb-hide-images');
    },

    disable(){
        document.body.classList.remove('acsb-hide-images');
    }
}

/* harmony default export */ const adjustments_hideImages = (hideImages);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/readMode.js
;


const readMode = {
    enable(){
        for( let $el of EJS.picks('svg, img, i, button, fieldset, form, input, select, textarea') ) {
            if( ! $el.closest('[data-acsb]') ) {
                EJS.elements.remove($el);
            }
        }

        for( let $el of EJS.picks('span, div') ) {
            if( $el.closest('[data-acsb]') ) {
                continue;
            }

            if( adjustments.screenReader.srOnly.isSrOnly($el) ) {
                EJS.elements.remove($el);
            }

            if( build_utilities.isClickable($el) ) {
                $el.setAttribute('data-acsb-clickable', 'true');

                if( adjustments.screenReader.clickables.isButton($el) ) {
                    EJS.elements.remove($el);
                }
            }
        }

        for( let $el of EJS.picks('*') ) {
            if( this.shouldRemove($el) ) {
                EJS.elements.remove($el);
            }

            if( ! $el.closest('[data-acsb]') ) {
                if( $el.getAttribute('style') ) {
                    $el.removeAttribute('style');
                }

                if( $el.getAttribute('class') ) {
                    $el.removeAttribute('class');
                }
                if( $el.getAttribute('id') ) {
                    $el.removeAttribute('id');
                }
            }
        }

        for( let $menu of EJS.picks('ul, ol, div') ) {
            if( $menu.closest('[data-acsb]') ) {
                continue;
            }

            if( adjustments.keyNav.menus.isMenu($menu) || adjustments.keyNav.menus.isFakeMenu($menu) ) {
                EJS.elements.remove($menu);
            }
        }

        document.body.classList.add('acsb-read-mode');
    },

    disable(){
        EJS.utilities.reload();
    },

    shouldRemove($el){
        if( $el.closest('[data-acsb]')
            || EJS.strings.inString($el.className, 'acsb')
            || ($el.src && $el.src.includes('acsb'))
            || ($el.href && $el.href.includes('acsb')) ) {
            return false;
        }

        if( $el.matches('style, link[rel="stylesheet"], script')
            || EJS.elements.text($el).length < 1
            || ! build_utilities.isVisible($el) ) {
            return true;
        }

        return false;
    }
}

/* harmony default export */ const adjustments_readMode = (readMode);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/readingGuide.js
const readingGuide = {
    enable(){
        document.body.classList.add('acsb-reading-guide');
        const $el = EJS.elements.create('div', {'class' : 'acsb-reading-guide-element'});
        EJS.elements.append($el, document.body);

        EJS.events.on(window, 'mousemove', e => {
            const zoom      = parseFloat(EJS.elements.style(document.body, 'zoom'));
            const topDelta  = e.clientY * zoom-e.clientY;
            const leftDelta = e.clientX * zoom-e.clientX;

            EJS.elements.css($el, {
                top  : e.clientY-topDelta+'px',
                left : e.clientX-leftDelta-$el.offsetWidth / 2+'px'
            });
        });
    },

    disable(){
        document.body.classList.remove('acsb-reading-guide');
        EJS.elements.remove(EJS.picks('.acsb-reading-guide-element'));
    }
}

/* harmony default export */ const adjustments_readingGuide = (readingGuide);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/readingMask.js
const readingMask = {
    enable(){
        const $top    = EJS.elements.create('div', {
            'class' : 'acsb-reading-mask-element acsb-reading-mark-element-top',
        });
        const $bottom = EJS.elements.create('div', {
            'class' : 'acsb-reading-mask-element acsb-reading-mark-element-bottom',
        });

        EJS.elements.append($top, document.body);
        EJS.elements.append($bottom, document.body);
        document.body.classList.add('acsb-reading-mask');

        EJS.events.on(window, 'mousemove', e => {
            const zoom = parseFloat(EJS.elements.style(document.body, 'zoom'));
            const top  = e.clientY * zoom-e.clientY;
            const left = e.clientX * zoom-e.clientX;

            EJS.elements.css($top, {height : e.clientY-top-75+'px'});
            EJS.elements.css($bottom, {height : window.innerHeight-e.clientY-left-75+'px'});
        });
    },

    disable(){
        document.body.classList.remove('acsb-reading-mask');
        EJS.elements.remove(EJS.picks('.acsb-reading-mask-element'));
    }
}

/* harmony default export */ const adjustments_readingMask = (readingMask);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/stopAnimations.js
;



const stopAnimations = {
    enable(){
        document.body.classList.add('acsb-stop-animations');

        this.stopVideos();
        this.stopSliders();
        this.stopGifs();
        this.stopCanvas();

        EJS.events.on(window, config.events.domChanged, () => {
            if( state.actions.stopAnimations && state.actions.stopAnimations.enabled ) {
                this.rebind();
            }
        });
    },

    disable(){
        document.body.classList.remove('acsb-stop-animations');

        for( let $video of EJS.picks('video') ) {
            if( $video.getAttribute('data-acsb-autoplay') === 'true' ) {
                $video.play();
            }

            this.acsbPauseVideoBound = false;
            $video.removeAttribute('data-acsb-autoplay');
        }

        for( let $el of EJS.picks('[data-acsb-gif-original-src]') ) {
            $el.acsbGifFreezed   = false;
            $el.acsbStopGifBound = false;
            $el.setAttribute('src', $el.getAttribute('data-acsb-gif-original-src'));
        }

        for( let $el of EJS.picks('[data-acsb-freeze-bg]') ) {
            $el.acsbStopGifBound = false;
            EJS.elements.css($el, {'background-image' : $el.getAttribute('data-acsb-freeze-bg')});
        }
    },

    stopVideos(){
        for( let $video of EJS.picks('video') ) {
            if( $video.acsbPauseVideoBound ) {
                continue;
            }

            this.acsbPauseVideoBound = true;
            $video.setAttribute('data-acsb-autoplay', $video.autoplay ? 'true' : 'false');
            $video.pause();
        }

        for( let $iframe of EJS.picks('iframe') ) {
            if( $iframe.acsbPauseIframeBound ) {
                continue;
            }

            $iframe.acsbPauseIframeBound = true;

            EJS.events.on($iframe, 'load', (e, $target) => {
                const src = $target.getAttribute('src');

                if( (src && src.includes('autoplay=0')) ) {
                    return;
                }

                $target.acsbPauseIframeLoadBound = true;
                this.stopVideos();
            });

            let src     = $iframe.getAttribute('src');
            const allow = $iframe.getAttribute('allow');

            if( src ) {
                if( src.includes('enablejsapi') ) {
                    src = src.replace('enablejsapi', 'killjsapi');
                }

                src = EJS.strings.removeChars(src.trim(), ['autoplay=1', 'autoplay=0', 'loop=1', 'loop=0']);
                $iframe.setAttribute('src', EJS.uris.setParams(src, {'loop' : '0', 'autoplay' : '0'}));
            }

            if( allow && EJS.strings.inString(allow, 'autoplay') ) {
                $iframe.setAttribute('allow', allow.replace('autoplay', ''));
            }
        }
    },

    stopSliders(){
        adjustments.keyNav.carousels.process();
    },

    stopGifs(){
        const $gifs      = [];
        const $toProcess = [];

        for( let $el of EJS.picks('*') ) {
            if( $el.tagName === 'IMG' || $el.acsbStopGifBound ) {
                continue;
            }

            $el.acsbStopGifBound = true;
            const bgImage        = EJS.elements.style($el, 'background-image');

            if( bgImage !== 'none' && (bgImage.includes('.gif') || bgImage.includes('data:image/gif')) ) {
                $el.setAttribute('data-acsb-freeze-bg', bgImage);
                EJS.elements.css($el, {'background-image' : 'none'});
            }
        }

        for( let $img of EJS.picks('img') ) {
            if( $img.acsbStopGifBound ) {
                continue;
            }

            $img.acsbStopGifBound = true;
            const src             = $img.getAttribute('src');

            if( ! src
                || src.length < 5
                || (! src.includes('.gif') && ! src.includes('data:image/gif')) ) {
                continue;
            }

            if( $img.complete ) {
                $img.acsbGifFreezed = true;
                $gifs.push($img);
            } else {
                EJS.events.on($img, 'load', () => this.stopGifs());
            }
        }

        if( $gifs.length < 1 ) {
            return;
        }

        for( let $gif of $gifs ) {
            if( $gif.src.includes('data:image/') ) {
                this.freezeGif($gif, $gif.src);
            } else {
                if( $gif.src.includes(config.domain) ) {
                    this.freezeGif($gif, $gif.src);
                } else {
                    $toProcess.push($gif);
                }
            }
        }

        if( $toProcess.length < 1 ) {
            return;
        }

        for( let $el of $toProcess ) {
            const src = EJS.uris.getFormatted($el.getAttribute('src'), false, true);
            $el.classList.add('acsb-loading-gif');

            EJS.fetch(config.endpoint+'/'+config.app+'/?remote=getBase64DataRemote&image='+src+'&domain='+config.domain, [], [], 'GET').then(res => {
                res = JSON.parse(res);

                if( res && res.options.result ) {
                    this.freezeGif($el, res.options.result);
                }
            });
        }
    },

    rebind(){
        this.stopVideos();
        this.stopSliders();
        this.stopCanvas();
        this.stopGifs();
    },

    freezeGif($img, base64){
        if( ! base64 ) {
            return;
        }

        const $canvas = EJS.elements.create('canvas');
        const width   = ($canvas.width = $img.width);
        const height  = ($canvas.height = $img.height);

        EJS.events.on($img, 'load', () => {
            if( ! $img.acsbGifFreezed ) {
                return;
            }

            $img.classList.remove('acsb-loading-gif');
            $canvas.getContext('2d').drawImage($img, 0, 0, width, height);
            $img.setAttribute('src', $canvas.toDataURL('image/gif'));
        });

        EJS.elements.attrs($img, {
            'data-acsb-gif-original-src' : $img.getAttribute('src'),
            'src'                        : base64,
            'class'                      : 'acsb-loading-gif',
        });
    },

    stopCanvas(){
        EJS.elements.remove(EJS.picks('canvas[data-acsb-canvas]'));
    }
}

/* harmony default export */ const adjustments_stopAnimations = (stopAnimations);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/emphasizeHover.js
const emphasizeHover = {
    enable(){
        document.body.classList.add('acsb-emphasize-hover');
    },

    disable(){
        document.body.classList.remove('acsb-emphasize-hover');
    }
}

/* harmony default export */ const adjustments_emphasizeHover = (emphasizeHover);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/emphasizeFocus.js
const emphasizeFocus = {
    enable(){
        document.body.classList.add('acsb-emphasize-focus');
    },

    disable(){
        document.body.classList.remove('acsb-emphasize-focus');
    }
}

/* harmony default export */ const adjustments_emphasizeFocus = (emphasizeFocus);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/seizuresProfile.js
;

const seizuresProfile = {
    enable(options, cached){
        actions.enable('stopAnimations', {}, true, cached);
        actions.enable('lowSaturation', {
            action      : 'lowSaturation',
            actionGroup : 'contrast'
        }, false, cached);
    },

    disable(){
        actions.disable('stopAnimations', {}, true);
        actions.disable('lowSaturation', {
            action      : 'lowSaturation',
            actionGroup : 'contrast'
        }, false);
    }
}

/* harmony default export */ const adjustments_seizuresProfile = (seizuresProfile);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/visionProfile.js
;


const visionProfile = {
    enable(options, cached){
        actions.enable('readableFont', {}, true, cached);
        actions.enable('highSaturation', {
            action      : 'highSaturation',
            actionGroup : 'contrast',
        }, false, cached);

        for( let $el of EJS.picks('*') ) {
            const fontSize = parseInt(EJS.elements.style($el, 'font-size'));

            if( EJS.elements.text($el).length < 1 || fontSize >= 11 ) {
                continue;
            }

            $el.setAttribute('data-acsb-org-font-size', fontSize);
            EJS.elements.css($el, {'font-size' : '12px'}, true);
        }

        if( ! cached && (! state.actions.zoom || state.actions.zoom.options.percent < 20) ) {
            actions.range.update('zoom', {
                action            : 'zoom',
                cssProperty       : 'zoom',
                specificElement   : 'body',
                percent           : 0,
                specificIncrement : 0,
            }, false, false, cached);
            actions.range.update('zoom', {
                action            : 'zoom',
                cssProperty       : 'zoom',
                specificElement   : 'body',
                percent           : 20,
                specificIncrement : 25,
            }, false, false, cached);
        }
    },

    disable(){
        actions.disable('readableFont', {}, false);
        actions.disable('highSaturation', {
            action      : 'highSaturation',
            actionGroup : 'contrast',
        }, false);
        actions.range.update('zoom', {
            action            : 'zoom',
            cssProperty       : 'zoom',
            specificElement   : 'body',
            percent           : 0,
            specificIncrement : 25,
        }, false, false, false);

        for( let $el of EJS.picks('[data-acsb-org-font-size]') ) {
            EJS.elements.css($el, {'font-size' : $el.getAttribute('data-acsb-org-font-size')+'px'}, true);
        }
    }
}

/* harmony default export */ const adjustments_visionProfile = (visionProfile);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/cognitiveProfile.js
;


const cognitiveProfile = {
    enable(options, cached){
        actions.enable('stopAnimations', {}, true, cached);
        actions.enable('emphasizeLinks', {}, false, cached);
        actions.enable('emphasizeTitles', {}, false, cached);

        if( ! cached && (! state.actions.zoom || state.actions.zoom.options.percent < 5) ) {
            actions.range.update('zoom', {
                action            : 'zoom',
                cssProperty       : 'zoom',
                specificElement   : 'body',
                percent           : 0,
                specificIncrement : 0,
            }, false, false, cached);
            actions.range.update('zoom', {
                action            : 'zoom',
                cssProperty       : 'zoom',
                specificElement   : 'body',
                percent           : 5,
                specificIncrement : 25,
            }, false, false, cached);
        }
    },

    disable(){
        actions.disable('stopAnimations', {}, false);
        actions.disable('emphasizeLinks', {}, false);
        actions.disable('emphasizeTitles', {}, false);
        actions.range.update('zoom', {
            action            : 'zoom',
            cssProperty       : 'zoom',
            specificElement   : 'body',
            percent           : 0,
            specificIncrement : 25,
        }, false, false);
    }
}

/* harmony default export */ const adjustments_cognitiveProfile = (cognitiveProfile);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/adhdProfile.js
;


const adhdProfile = {
    enable(options, cached){
        if( ! state.isMobile ) {
            actions.enable('readingMask', {}, false, cached);
        }

        actions.enable('stopAnimations', {}, true, cached);
        actions.enable('highSaturation', {
            action      : 'highSaturation',
            actionGroup : 'contrast',
        }, false, cached);

        if( ! cached && (! state.actions.zoom || state.actions.zoom.options.percent < 5) ) {
            actions.range.update('zoom', {
                action            : 'zoom',
                cssProperty       : 'zoom',
                specificElement   : 'body',
                percent           : 0,
                specificIncrement : 0,
            }, false, false, cached);
            actions.range.update('zoom', {
                action            : 'zoom',
                cssProperty       : 'zoom',
                specificElement   : 'body',
                percent           : 5,
                specificIncrement : 25,
            }, false, false, cached);
        }

    },

    disable(){
        actions.disable('stopAnimations', {}, false);
        actions.disable('readingMask', {}, false);
        actions.disable('highSaturation', {
            action      : 'highSaturation',
            actionGroup : 'contrast',
        }, false);
        actions.range.update('zoom', {
            action            : 'zoom',
            cssProperty       : 'zoom',
            specificElement   : 'body',
            percent           : 0,
            specificIncrement : 25,
        }, false, false);
    }
}

/* harmony default export */ const adjustments_adhdProfile = (adhdProfile);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/motorProfile.js
;


const motorProfile = {
    enable(){
        actions.enable('accessMode', {}, true, state.actions.motorProfile && state.actions.motorProfile.cached);
    },

    disable(){
        actions.disable('accessMode', {}, true, true);
    }
}

/* harmony default export */ const adjustments_motorProfile = (motorProfile);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/accessMode.js
;




const accessMode = {
    actions : ['keyNav', 'screenReader'],

    enable(){
        if( config.debug ) {
            console.clear();
            this.perf1 = performance.now();
        }

        if( state.widget.hidden ) {
            state.updateWidget('hidden', false).store();
            return EJS.utilities.reload();
        }

        const cached = state.actions.accessMode && state.actions.accessMode.cached;

        for( let action of this.actions ) {
            if( ! adjustments[action] ) {
                continue;
            }

            if( action === 'keyNav' ) {
                actions.enable(action, {}, false, cached);
            } else {
                setTimeout(() => actions.enable(action, {}, false, cached), 0);
            }
        }

        if( ! cached && ! window['acsbChildFrame'] ) {
            adjustments.screenReader.playAudio('success');
        }

        document.body.classList.remove('acsb-hide');

        if( config.debug ) {
            this.perf2 = performance.now();
            console.log('acsb: accessMode took: '+Math.round(this.perf2-this.perf1)+'ms');
        }
    },

    disable(){
        for( let action of this.actions ) {
            if( adjustments[action] ) {
                actions.disable(action, actions.getActionOptions(EJS.pick('[data-acsb-action="'+action+'"]')), false, false);
            }
        }

        state.updateWidget('autoshow', 'true').store();
        EJS.utilities.reload();
    }
}

/* harmony default export */ const adjustments_accessMode = (accessMode);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/screenReader.js
;







const screenReader = {
    rebinds : 0,

    init(){
        if( this.rebinds < 1 ) {
            EJS.elements.remove(EJS.picks('noscript').concat(EJS.picks('[data-acsb-sr-trigger="true"]')));
            EJS.events.on(window, config.events.keynavRebind, () => {
                this.rebinds = this.rebinds+1;
                this.init();
            });
        }

        this.handleGeneralities();
        this.handlePageTitle();
        this.handleTables();
        this.handleFigureElements();
        this.handleBasicRoles();
        this.handleNonImageAlts();
        this.handleIncorrectAria();
        this.handleBreadCrumbs();
        this.handleReviewStars();

        this.srOnly.process();
        this.headings.process();
        this.decorations.process();
        this.landmarks.process();
        this.clickables.process();
        this.forms.process();
        this.scrapper.process();
        this.alts.process();
    },

    enable(){
        if( ! state.actions.accessMode || ! state.actions.accessMode.enabled ) {
            actions.disable('screenReader', false);
            actions.enable('accessMode', false, false);
        } else {
            this.init();
        }
    },

    disable(){
        if( actions.accessMode && actions.accessMode.enabled ) {
            actions.disable('accessMode', false);
        }
    },

    greetUsers(){
        if( window['acsbChildFrame']
            || (widget.hidden && widget.hidden)
            || (state.actions.accessMode && state.actions.accessMode.enabled) ) {
            return;
        }

        let greet = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform) ? build_lang.get('SCREEN_READERS_GREETING_MAC') : build_lang.get('SCREEN_READERS_GREETING');

        if( state.isMobile ) {
            greet = build_lang.get('SCREEN_READERS_GREETING_MOBILE');
        }

        if( document.hasFocus() ) {
            build_utilities.throwAlert(greet, false, true);
        }

        setTimeout(() => this.greetUsers(), 10000);
    },

    playAudio(file){
        if( window['acsbChildFrame'] ) {
            return;
        }

        try {
            setTimeout(() => new Audio(config.endpoint+'/'+config.app+'/dist/audio/'+file+'.mp3').play(), 0);
        } catch( e ) {
        }
    },

    handleDocLang(){
        const $html = EJS.pick('html');
        const lang  = $html.getAttribute('lang');

        if( ! lang || lang.length < 2 || lang.length > 5 ) {
            $html.setAttribute('lang', build_lang.getDocLang());
        }
    },

    handleGeneralities(){
        for( let $el of EJS.picks('marquee') ) {
            $el.stop();
        }

        for( let $el of EJS.picks('ul, ol') ) {
            const $lis = EJS.picks('li', $el);

            if( $lis.length <= 1 && EJS.elements.parents($el, 'ul, ol', true).length < 1 ) {
                EJS.elements.attrs($lis, {'role' : 'presentation'});
                $el.setAttribute('role', 'presentation');
            }
        }

        EJS.elements.attrs(EJS.picks('[role="application"]'), ['role'], true)
    },

    handleFigureElements(){
        for( let $el of EJS.picks('figure') ) {
            if( $el.acsbFigureBound ) {
                continue;
            }

            $el.acsbFigureBound = true;

            if( build_utilities.getShownText($el).length < 1 ) {
                $el.setAttribute('role', 'none');
            }
        }
    },

    handlePageTitle(){
        if( this.rebinds > 0 ) {
            return;
        }

        let $title = EJS.pick('title');
        let firstH1Text;

        const $firstH1  = EJS.pick('h1');
        const titleText = EJS.elements.text($title);

        if( $firstH1 ) {
            firstH1Text = EJS.elements.text($firstH1);
        }

        if( ! $title ) {
            $title = EJS.elements.create('title');
            EJS.elements.append($title, document.querySelector('head'));
        }

        if( titleText.split(' ').length > 3 ) {
            return;
        }

        if( firstH1Text
            && $title
            && ! EJS.strings.inString(titleText, firstH1Text)
            && ! EJS.strings.inString(firstH1Text, titleText) ) {
            $title.textContent = titleText+' | '+firstH1Text;
        } else {
            const $firstH2 = EJS.pick('h2');

            if( $firstH1 && firstH1Text !== titleText ) {
                $title.textContent = titleText+' | '+firstH1Text;
            } else {
                if( $firstH2 ) {
                    $title.textContent = titleText+' | '+EJS.elements.text($firstH2);
                }
            }
        }
    },

    handleReviewStars(){
        const selector = 'img[src*="star" i], [class*="star" i], [class*="rating" i], [class*="rate" i], [data-acsb-possible-star="true" i]';
        let emptyStarsClasses;
        let fullStarsClasses;

        for( let $el of EJS.picks('[itemprop="ratingValue"]') ) {
            if( $el.acsbReviewItemPropBound ) {
                continue;
            }

            $el.acsbReviewItemPropBound = true;
            $el.setAttribute('aria-label', EJS.elements.text($el)+' '+build_lang.get('RATING'));
        }

        for( let $el of EJS.picks(selector) ) {
            if( $el.acsbPossibleStarBound ) {
                continue;
            }

            $el.acsbPossibleStarBound = true;

            if( $el.parentElement && EJS.picks(selector, $el.parentElement).length === 1 ) {
                const $stars = EJS.picks('svg, img, i', $el.parentElement);

                if( $stars.length === 5 ) {
                    EJS.elements.classes($stars, 'acsb-star')
                } else {
                    $el.parentElement.setAttribute('data-acsb-possible-star', 'true');
                }
            }
        }

        for( let $el of EJS.picks(selector) ) {
            if( ! $el.parentElement || $el.parentElement.acsbStarsProcessed ) {
                continue;
            }

            $el.parentElement.acsbStarsProcessed = true;

            if( EJS.strings.inString($el.getAttribute('class'), 'start') ) {
                continue;
            }

            let hasDesc     = $el.parentElement['aria-label'];
            let $all        = [$el].concat(EJS.elements.next($el, selector, true));
            let prevClasses = null;
            let verdict     = 5;

            if( $all.length !== 5 ) {
                continue;
            }

            let i = 0;
            for( let $innerEl of $all ) {
                const classes = $innerEl.getAttribute('class');

                if( prevClasses && classes !== prevClasses ) {
                    verdict           = i;
                    emptyStarsClasses = classes;
                    fullStarsClasses  = prevClasses;
                    break;
                }

                prevClasses = classes;
                i++;
            }

            for( let $innerEl of EJS.picks('*', $el.parentElement) ) {
                if( $innerEl === $el || $all.includes($innerEl) ) {
                    continue;
                }

                if( this.srOnly.isSrOnly($innerEl) ) {
                    hasDesc = true;
                }
            }

            if( ! hasDesc ) {
                EJS.elements.insert(this.srOnly.create(verdict+'/5'+' '+build_lang.get('RATING'), {'data-acsb-verdict' : verdict}), $el);
            }
        }

        for( let $el of EJS.picks('[data-acsb-verdict]') ) {
            if( $el.acsbVerdictBound ) {
                continue;
            }

            $el.acsbVerdictBound = true;

            EJS.elements.attrs(EJS.picks(selector, $el.parentElement), {
                'data-acsb-hidden'       : 'true',
                'aria-hidden'            : 'true',
                'data-acsb-force-hidden' : 'true'
            });

            if( $el.getAttribute('data-acsb-verdict') === '5' ) {
                const $nextStar = EJS.elements.next($el, '[class*="star"], [class*="rating"]')[0];

                if( ! $nextStar ) {
                    continue;
                }

                const nextStarClasses = $nextStar.getAttribute('class');

                if( nextStarClasses === emptyStarsClasses ) {
                    $el.setAttribute('data-acsb-verdict', '0');
                    $el.textContent = build_lang.get('NO_RATING');
                } else if( nextStarClasses === fullStarsClasses ) {
                    $el.setAttribute('data-acsb-verdict', '5');
                    $el.textContent = '5/5'+' '+build_lang.get('RATING');
                }
            }
        }
    },

    handleBreadCrumbs(){
        for( let $el of EJS.picks('[class*="breadc"]') ) {
            if( $el.acsbBreadCrumbsBound ) {
                continue;
            }

            $el.acsbBreadCrumbsBound = true;

            if( $el.closest('[data-acsb-bc="true"]')
                || ! ['DIV', 'SPAN', 'UL', 'OL', 'NAV'].includes($el.tagName)
                || ! EJS.pick('a', $el) ) {

                const $parent = $el.closest('UL', 'OL', 'NAV', 'DIV');

                if( $parent && EJS.pick('a', $parent) && ! $el.closest('[data-acsb-bc="true"]') ) {
                    $el = $parent;
                } else {
                    continue;
                }
            }

            let $nav = $el.closest('[role="navigation"], nav');

            if( ! $nav ) {
                $nav = EJS.pick('[role="navigation"], nav', $el);
                $nav = $nav ? $nav : $el;
            }

            for( let $a of EJS.picks('a', $nav) ) {
                if( window.location.href.toLowerCase() === build_utilities.getUrlAsAbsolute($a.href).toLowerCase() ) {
                    $a.setAttribute('aria-current', 'page');
                }
            }

            EJS.elements.attrs($nav, {
                'role'         : 'navigation',
                'data-acsb-bc' : 'true',
                'aria-label'   : build_lang.get('BREADCRUMBS'),
            });
        }
    },

    handleIncorrectAria(){
        for( let attr of ['aria-describedby', 'aria-labelledby'] ) {
            for( let $el of EJS.picks('['+attr+']') ) {
                if( $el.acsbLabelledByBound ) {
                    continue;
                }

                $el.acsbLabelledByBound = true;

                const id = $el.getAttribute(attr);

                if( ! id || id.length < 1 || ! EJS.pick('#'+id) ) {
                    $el.removeAttribute(attr);
                }
            }
        }

        for( let $title of EJS.picks('[title]') ) {
            if( $title.acsbTitleBound ) {
                continue;
            }

            $title.acsbTitleBound = true;

            const title = $title.getAttribute('title');

            if( ! title || title.length < 1 || title === $title.textContent ) {
                $title.removeAttribute('title');
            }
        }
    },

    handleWaveProcess(){
        for( let $form of EJS.picks('form') ) {
            if( ! build_utilities.isVisible($form) ) {
                EJS.elements.remove($form);
            }
        }

        for( let $field of EJS.picks('input, select, textarea') ) {
            if( ! build_utilities.isVisible($field) ) {
                EJS.elements.remove($field);
                continue;
            }

            screenReader.forms.field.process($field);

            if( ! $field.getAttribute('aria-label') ) {
                $field.setAttribute('aria-label', Math.random().toString(36).substr(2, 7));
            }

            $field.removeAttribute('title');
        }

        for( let $img of EJS.picks('img') ) {
            const alt = $img.getAttribute('alt');
            const src = $img.getAttribute('src');

            if( ! src || src.length < 5 ) {
                EJS.elements.remove($img);
            } else if( ! alt || alt.length < 1 ) {
                $img.alt = EJS.uris.getFileName(src, true);
            } else {
                const $dups = EJS.picks('img[alt="'+alt+'"]');

                if( $dups.length > 0 ) {
                    $img.alt = alt+' '+0;

                    let i = 0;
                    for( let $dup of $dups ) {
                        i++;
                        $dup.alt = alt+' '+i+1;
                    }
                }
            }
        }

        for( let $a of EJS.picks('a') ) {
            const href = $a.getAttribute('href');
            const text = EJS.elements.text($a);

            if( href && ! EJS.strings.inString(href, '#') ) {
                const $dups = EJS.picks('a[href="'+href+'"]');

                if( $dups.length > 0 ) {
                    $a.setAttribute('href', EJS.uris.setParams(href, {adv : '0'}));

                    let i = 0;
                    for( let $dup of $dups ) {
                        i++;
                        $a.setAttribute('href', EJS.uris.setParams(href, {adv : i+1}));
                    }
                }
            }

            if( ! text && ! $a.getAttribute('aria-label') ) {
                EJS.elements.remove($a);
            }
        }
    },

    handleNonImageAlts(){
        for( let $el of EJS.picks('[alt]') ) {
            if( $el.tagName === 'IMG' || $el.acsbNonImageAltBound ) {
                continue;
            }

            $el.acsbNonImageAltBound = true;

            let alt   = $el.getAttribute('alt');
            let title = $el.getAttribute('title');
            let text;

            alt   = alt && alt.length > 0 ? alt.trim() : null;
            title = title && title.length > 0 ? title.trim() : null;

            if( alt && alt.length > 0 ) {
                text = alt;
            }

            if( title && alt.length > 0 ) {
                if( ! text ) {
                    text = title;
                } else if( ! EJS.strings.inString(text, title) && ! EJS.strings.inString(title, text) ) {
                    text = text+' | '+title;
                }
            }

            if( text ) {
                $el.setAttribute('title', text);
            }

            $el.removeAttribute('alt');
        }
    },

    handleBasicRoles(){
        for( let $br of EJS.picks('br') ) {
            if( $br.acsbBrBound ) {
                continue;
            }

            $br.acsbBrBound = true;

            if( EJS.elements.text($br.parentElement).length < 150 ) {
                $br.setAttribute('role', 'none');
            }
        }

        for( let $icon of EJS.picks('i, span, svg') ) {
            if( $icon.acsbPresentationBound ) {
                continue;
            }

            $icon.acsbPresentationBound = true;

            if( $icon.getAttribute('data-acsb-clickable')
                || EJS.pick('a, img, input, select, textarea', $icon)
                || $icon.tagName === 'SPAN' && EJS.picks('*', $icon).length > 1
                || $icon.matches('[data-acsb-sr-only]')
                || $icon.closest('[data-acsb]') ) {
                continue;
            }

            if( ! $icon.getAttribute('role') && EJS.elements.text($icon).length < 1 && ! $icon.getAttribute('aria-label') ) {
                EJS.elements.attrs($icon, {
                    'aria-hidden'            : 'true',
                    'data-acsb-hidden'       : 'true',
                    'data-acsb-force-hidden' : 'true'
                });
            }
        }
    },

    handleTables(){
        for( let $table of EJS.picks('table') ) {
            if( $table.acsbTablesBound ) {
                continue;
            }

            $table.acsbTablesBound = true;

            if( $table.getAttribute('role') || EJS.pick('thead', $table) ) {
                continue;
            }

            EJS.elements.attrs(EJS.picks('table', $table), {'role' : 'presentation'})

            if( EJS.picks('tr', $table).length <= 1
                || EJS.pick('li, form, input, select, textarea, div, table, h1, h2, h3', $table) ) {
                $table.setAttribute('role', 'presentation');
            } else {
                EJS.elements.attrs(EJS.picks('tr:first-child td'), {'role' : 'columnheader'})
            }
        }
    },

    srOnly : {
        process(){
            for( let $el of EJS.picks('span[data-acsb-hidden="true"], a[data-acsb-hidden="true"], div[data-acsb-hidden="true"], strong[data-acsb-hidden="true"]') ) {
                if( $el.acsbGivenSrOnlyBound ) {
                    continue;
                }

                $el.acsbGivenSrOnlyBound = true;

                if( $el.closest('[data-acsb-sr-only]') || ! this.isSrOnly($el) ) {
                    continue;
                }

                if( EJS.elements.style($el, 'display') === 'none' ) {
                    $el.classList.add('acsb-sr-only');
                }

                $el.classList.add('acsb-given-sr-only');
            }

            for( let $el of EJS.picks(this.getSelectors().join(',')) ) {
                if( $el.acsbSelectorsSrOnlyBound ) {
                    continue;
                }

                $el.acsbSelectorsSrOnlyBound = true;

                if( $el.closest('[data-acsb]') ) {
                    continue;
                }

                EJS.elements.attrs($el, {
                    'aria-hidden'             : 'false',
                    'data-acsb-hidden'        : 'false',
                    'data-acsb-sr-only'       : 'true',
                    'data-acsb-force-visible' : 'true',
                });
            }
        },

        isSrOnly($el){
            if( $el.closest('[data-acsb]')
                || EJS.elements.text($el).length < 1
                || EJS.elements.style($el, 'background-image') !== 'none'
                || ! ['SPAN', 'A', 'DIV', 'STRONG'].includes($el.tagName) ) {
                return false;
            }

            if( $el.matches(this.getSelectors().join(',')) ) {
                return true;
            }

            let spansOnly   = true;
            const $children = EJS.picks('*', $el);

            for( let $child of $children ) {
                if( $child.tagName !== 'SPAN' || build_utilities.isClickable($child) ) {
                    spansOnly = false;
                    break;
                }
            }

            if( $children.length > 0 && ! spansOnly ) {
                return false;
            }

            if( ! build_utilities.isClickable($el)
                && ($el.getAttribute('data-acsb-hidden') === 'true' || ! build_utilities.isVisible($el)) ) {
                return true;
            }

            return false;
        },

        getSelectors(){
            return [
                '.sr-only',
                '.sronly',
                '.sr-text',
                '.srtext',
                '.show-for-sr',
                '.text-for-sr',
                '.visually-hidden',
                '.acsb-sr-only',
                '.screen-reader',
                '.acsb-given-sr-only',
                '.screen-reader-only',
                '.screen-reader-text',
                '.elementor-screen-only',
            ];
        },

        create(text, attrs = {}, tag = 'span', navigable = false){
            if( navigable ) {
                attrs['tabindex']                  = '0';
                attrs['data-acsb-clickable']       = 'true';
                attrs['data-acsb-force-navigable'] = 'true';
            }

            if( ! attrs['class'] ) {
                attrs['class'] = 'acsb-sr-only';
            } else {
                attrs['class'] = 'acsb-sr-only'+' '+attrs['class'];
            }

            const $el = EJS.elements.create(tag, Object.assign(attrs, {
                'data-acsb-sr-only'       : 'true',
                'data-acsb-force-visible' : 'true'
            }), text);

            if( navigable ) {
                adjustments.keyNav.navigation.makeNavigable($el);
            }

            return $el;
        }
    },

    headings : {
        badFakeSelectors : 'h1, h2, h3, h4, h5, h6, [data-acsb], [data-acsb-navigable="true"], [data-acsb-clickable="true"], [data-acsb-sr-only="true"]',

        process(){
            this.handleEmptyHeadings();
            this.handleLengthyHeadings();
            this.handleMultipleH1();
            this.handleFakeHeadings();

            if( screenReader.rebinds < 1 ) {
                this.handleHeadingHierarchy();
            }
        },

        handleEmptyHeadings(){
            for( let $title of EJS.picks('h1, h2, h3, h4, h5, h6') ) {
                if( $title.acsbTitleBound ) {
                    continue;
                }

                $title.acsbTitleBound = true;

                if( EJS.elements.text($title).length < 1
                    && ! EJS.pick('img[alt]', $title)
                    && ! EJS.pick('svg', $title)
                    && EJS.elements.style($title, 'background-image') === 'none' ) {
                    EJS.elements.remove($title);
                }
            }
        },

        handleLengthyHeadings(){
            for( let $title of EJS.picks('h1, h2, h3, h4, h5, h6') ) {
                if( EJS.elements.text($title).length > 160 ) {
                    $title.setAttribute('role', 'presentation');
                }
            }
        },

        handleHeadingHierarchy(){
            let exists  = [];
            let missing = [];

            for( let v of [1, 2, 3, 4, 5, 6] ) {
                for( let $heading of EJS.picks(`h${v},[role="heading"][aria-level="${v}"]`) ) {
                    if( $heading && build_utilities.isVisible($heading) && ! exists.includes(v) ) {
                        exists.push(v);
                        break;
                    }
                }
            }

            for( let v of [1, 2, 3, 4, 5, 6] ) {
                if( ! exists.includes(v) && Math.max.apply(null, exists) > v ) {
                    missing.push(v);
                }
            }

            for( let missingLevel of missing ) {
                let changed = false;

                for( let existingLevel of exists ) {
                    if( existingLevel < missingLevel ) {
                        continue;
                    }

                    const $title = (() => {
                        for( let $el of EJS.picks('h'+existingLevel) ) {
                            if( build_utilities.isVisible($el) ) {
                                return $el;
                            }
                        }
                    })();

                    if( ! $title ) {
                        missing = [];
                        changed = true;
                        break;
                    }

                    const newTag    = 'h'+missingLevel;
                    const uuid      = EJS.strings.random();
                    const $newTitle = EJS.elements.create(newTag, {}, EJS.elements.text($title));

                    build_utilities.addDynamicCss('body '+newTag+'.'+uuid+'{'+document.defaultView.getComputedStyle($title, '').cssText+'}', 'titles');
                    EJS.elements.copyAttrs($title, $newTitle);
                    EJS.elements.attrs($newTitle, {'class' : uuid, 'data-acsb-title' : 'true'});
                    EJS.elements.insert($newTitle, $title);
                    EJS.elements.remove($title);

                    changed = true;
                    break;
                }

                if( changed ) {
                    missing = [];
                    break;
                }
            }

            if( missing.length > 0 ) {
                this.handleHeadingHierarchy();
            } else {
                if( ! EJS.pick('h1') && EJS.pick('head title') ) {
                    let $appendTo = document.body;

                    for( let $el of EJS.picks('p, img, form, ul, a') ) {
                        if( $el.closest('[data-acsb]') || ! build_utilities.isVisible($el) ) {
                            continue;
                        }
                        $appendTo = $el;
                    }

                    EJS.elements.append(EJS.elements.create('h1', {
                        'class'             : 'acsb-sr-only',
                        'data-acsb-title'   : 'true',
                        'data-acsb-sr-only' : 'true',
                    }, EJS.elements.text(EJS.pick('head title'))), $appendTo, true);
                }
            }
        },

        handleMultipleH1(){
            if( this.acsbMultipleH1Bound ) {
                return;
            }

            this.acsbMultipleH1Bound = true;

            let $h1s        = EJS.picks('h1');
            let $visibleH1s = [];

            if( $h1s.length > 1 ) {
                for( let $h1 of $h1s ) {
                    if( ! $h1.closest('[data-acsb-hidden="true"]') ) {
                        $visibleH1s.push($h1);
                    }
                }
            }

            if( $visibleH1s.length <= 1 ) {
                return;
            }

            let i = 0;
            for( let $h1 of $h1s ) {
                if( i < 1 ) {
                    i++;
                    continue;
                }

                const uuid      = EJS.strings.random();
                const text      = EJS.elements.text($h1);
                const $newTitle = EJS.elements.create('h2', {'class' : uuid, 'data-acsb-title' : 'true',});
                const elClasses = $h1.getAttribute('class');

                for( let $node of EJS.elements.htmlToNodes($h1.innerHTML) ) {
                    EJS.elements.append($node, $newTitle);
                }

                if( text !== EJS.elements.text($newTitle) ) {
                    $newTitle.textContent = text;
                }

                if( elClasses ) {
                    EJS.elements.classes($newTitle, EJS.arrays.filter(elClasses.split(' ')).join(' '))
                }

                build_utilities.addDynamicCss('.'+uuid+'{'+document.defaultView.getComputedStyle($h1, '').cssText+'}', 'titles');
                EJS.elements.insert($newTitle, $h1);
                EJS.elements.remove($h1);
                i++;
            }
        },

        handleFakeHeadings(){
            let missingLevel = 6;

            for( let v of [2, 3, 4, 5] ) {
                const $current = EJS.pick('h'+v), $next = EJS.pick('h'+(v+1));

                if( $current || $next ) {
                    continue;
                }

                if( ! $current ) {
                    missingLevel = $next ? v+2 : v;
                }

                missingLevel = missingLevel > 6 ? 6 : missingLevel;
                break;
            }

            for( let $el of EJS.picks('strong, b, em, span, p, div, [class*="title"]') ) {
                if( $el.acsbFakeTitleBound ) {
                    continue;
                }

                $el.acsbFakeTitleBound = true;

                if( this.isFakeHeading($el) || this.isSmallFakeHeading($el) ) {
                    EJS.elements.attrs($el, {'role' : 'heading', 'aria-level' : missingLevel});
                }
            }
        },

        isFakeHeading($el){
            if( $el.closest(this.badFakeSelectors) || EJS.pick(this.badFakeSelectors, $el) ) {
                return false;
            }

            const fontSize = parseInt(EJS.elements.style($el, 'font-size').replace('px', ''));
            const text     = EJS.elements.text($el);

            if( text.length <= 3
                || fontSize < 20
                || text.split(' ').length > 20
                || EJS.strings.isNumber(text.replace(/[\W\-_\.]/gm, '')) ) {
                return false;
            }

            const $p     = $el.closest('p');
            let oneLineP = false;

            if( $p ) {
                const pText = EJS.elements.text($p);

                if( pText.length > 0 && $p.innerText.split('\n').length === 1 ) {
                    oneLineP = true;
                }

                if( pText.length > text.length && ! oneLineP ) {
                    return false;
                }
            }

            if( text.length > 70 && ! oneLineP ) {
                return false;
            }

            return true;
        },

        isSmallFakeHeading($el){
            const fontSize = parseInt(EJS.elements.style($el, 'font-size'));

            if( fontSize >= 20
                || fontSize < 15
                || $el.closest(this.badFakeSelectors)
                || EJS.pick(this.badFakeSelectors, $el)
                || $el.innerText.split('\n').length > 1
                || parseInt(EJS.elements.style($el, 'font-weight')) < 700 ) {
                return false;
            }

            const text = EJS.elements.text($el);

            if( text.length <= 3
                || text.split(' ').length > 20
                || EJS.strings.isNumber(text.replace(/[\W\-_\.]/gm, '')) ) {
                return false;
            }

            let isOneLine = false;
            let $parent   = $el.parentElement;

            while( $parent && $parent.tagName !== 'BODY' ) {
                if( $parent.innerText !== text && $parent.innerText.split('\n').includes(text) ) {
                    isOneLine = true;
                    break;
                }
                $parent = $parent.parentElement;
            }

            return isOneLine;
        }
    },

    decorations : {
        process(){
            this.handleDeletedNumbers();
            this.handleEmphasizedText();
        },

        handleDeletedNumbers(){
            for( let $el of EJS.picks('span, div, strike, em, del, s') ) {
                if( $el.acsbTextDecorationDeleteBound ) {
                    continue;
                }

                $el.acsbTextDecorationDeleteBound = true;

                const text = EJS.elements.text($el);

                if( text.length < 1 || EJS.pick('[data-acsb-sr-only]', $el) ) {
                    continue;
                }

                if( ! ['DEL', 'STRIKE', 'S'].includes($el.tagName)
                    && ! EJS.elements.style($el, 'text-decoration').includes('line-through') ) {
                    continue;
                }

                const number = text.replace(/\D/g, '');

                if( number.length < 0 ) {
                    continue;
                }

                EJS.elements.append(screenReader.srOnly.create(build_lang.get('DELETED_NUMBER')), $el, true);
            }
        },

        handleEmphasizedText(){
            for( let $el of EJS.picks('span, b, p, div') ) {
                if( $el.acsbEmphasizedTextBound ) {
                    continue;
                }

                $el.acsbEmphasizedTextBound = true;

                if( $el.closest('h1, h2, h3, h4, h5, h6, strong, em, [data-acsb], [data-acsb-sr-only], [role]')
                    || ! $el.childNodes[0]
                    || $el.childNodes[0].nodeType !== 3
                    || EJS.elements.text($el).length < 1 ) {
                    continue;
                }

                if( parseInt(EJS.elements.style($el, 'font-weight')) >= 700 ) {
                    EJS.elements.append(EJS.elements.create('strong', {}, $el.childNodes[0].nodeValue), $el);
                    $el.childNodes[0].nodeValue = '';
                } else if( EJS.elements.style($el, 'font-style') === 'italic' ) {
                    EJS.elements.append(EJS.elements.create('em', {}, $el.childNodes[0].nodeValue), $el);
                    $el.childNodes[0].nodeValue = '';
                }
            }
        }
    },

    clickables : {
        presetLinks : {},

        process(){
            this.processClickables();
            this.handleTabs();
        },

        isButton($el){
            if( ! $el
                || ! $el.matches('[data-acsb-clickable="true"]')
                || EJS.elements.parents($el, 'a, [role="button"]', true).length > 0
                || ($el.tagName === 'IMG' && ($el.offsetWidth > 50 || $el.offsetHeight > 50))
                || $el.offsetWidth >= EJS.utilities.getWinSize().width
                || $el.offsetHeight >= EJS.utilities.getWinSize().height
                || EJS.picks('form, input, select, iframe, textarea, [role="navigation"]', $el).length > 0 ) {
                return false;
            }

            let isButton = false;

            if( $el.tagName === 'A' ) {
                const href = $el.getAttribute('href');

                if( ! href || href.substr(0, 10).toLowerCase() === 'javascript' || href === '#' ) {
                    isButton = true;
                }

                if( href && href.substring(0, 1) === '#' && (! EJS.pick(href) || $el.getAttribute('role') === 'button') ) {
                    isButton = true;
                }
            }

            if( $el.tagName === 'INPUT' && ['button', 'image', 'submit'].includes($el.type) ) {
                isButton = true;
            }

            if( $el.tagName === 'LABEL' && ! $el.closest('form') ) {
                isButton = true;
            }

            if( ['BUTTON', 'SPAN', 'IMG', 'I', 'LI', 'DIV'].includes($el.tagName) ) {
                isButton = true;
            }

            return isButton;
        },

        isCarouselPagination($el){
            let matches     = false;
            const selectors = [
                '.n2-ow',
                '.owl-dot',
                '.owl-page',
                '.tp-bullet',
                '.uk-dotnav',
                '.tp-thumb',
                '.swiper-pagination-bullet',
                '.nivo-control',
                '.acsb-carousel-dot',
                '.bx-pager-item',
                '[uk-slideshow-item]',
                '[uk-slider-item]',
                '[data-slide-to]',
                '.swiper-pagination-bullet',
                '.nextend-bullet-bar',
                '.tp-thumbs',
                '.slick-dots',
                '.rslides_tabs',
                '.ls-bottom-slidebuttons',
                '.et-pb-controllers',
                '.flex-control-nav',
                '.flex-control-paging',
                '.jcarousel-pagination',
                '[data-jcarouselpagination="true"]',
                '.uk-dotnav',
                '.carousel-indicators',
                '.flex-control-nav',
                '.flex-control-paging',
                '.flickity-page-dots',
                '.cycle-pager',
            ];

            for( let selector of selectors ) {
                if( $el.closest(selector) ) {
                    matches = true;
                    break;
                }
            }

            return matches;
        },

        isCarouselNextButton($el){
            let matches     = false;
            const selectors = [
                '.owl-next',
                '.bx-next',
                '.next',
                '.nivo-prevNext',
                '.flex-next',
                '.slick-next',
                '.slick-arrow',
                '.slick-next',
                '.et-pb-arrow-next',
                '.tp-rightarrow',
                '.acsb-carousel-next',
                '.flickity-prev-next-button.next',
                '.fusion-nav-next',
                '.ls-nav-next',
                '.swiper-button-next',
                '[data-slide="next"]',
                '.nextend-arrow-next',
                '.uk-slidenav-next',
                '.jcarousel-control-next',
                '.acsb-carousel-next',
            ];

            if( $el.matches('[class*="next"], [class*="right"]') && $el.closest('[data-acsb-carousel="true"]') ) {
                matches = true;
            } else {
                for( let selector of selectors ) {
                    if( $el.closest(selector) ) {
                        matches = true;
                        break;
                    }
                }
            }

            return matches;
        },

        isCarouselPrevButton($el){
            let matches     = false;
            const selectors = [
                '.owl-prev',
                '.bx-prev',
                '.flex-prev',
                '.slick-prev',
                '.nivo-prevNav',
                '.prev',
                '.previous',
                '.acsb-carousel-prev',
                '.et-pb-arrow-prev',
                '.tp-leftarrow',
                '.flickity-prev-next-button.previous',
                '.fusion-nav-prev',
                '.ls-nav-prev',
                '.swiper-button-prev',
                '.nextend-arrow-previous',
                '.uk-slidenav-previous',
                '.jcarousel-control-prev',
                '.cycle-prev',
                '[data-slide="prev"]',
            ];

            if( $el.matches('[class*="prev"], [class*="left"]') && $el.closest('[data-acsb-carousel="true"]') ) {
                matches = true;
            } else {
                for( let selector of selectors ) {
                    if( $el.closest(selector) ) {
                        matches = true;
                        break;
                    }
                }
            }

            return matches;
        },

        getTextualOpsObject($el){
            let matches = {
                close     : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('REMOVE'),
                    exacts  : ['x', ''],
                    strings : ['close', 'remove', 'cross', 'dismiss', 'hide', 'cancel', 'delete', 'trash', 'bin', 'exit'],
                },
                next      : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('NEXT'),
                    exacts  : [],
                    strings : ['next', 'nxt', 'arrow', 'right'],
                },
                previous  : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('PREVIOUS'),
                    exacts  : [],
                    strings : ['previous', 'prev', 'prv', 'left'],
                },
                contact   : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('CONTACT'),
                    exacts  : [],
                    strings : ['contact', 'envelop', 'mail', 'phone'],
                },
                search    : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('SEARCH'),
                    exacts  : [],
                    strings : ['search', 'srch', 'magnifier'],
                },
                cart      : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('CART'),
                    exacts  : [],
                    strings : ['cart', 'bag', 'basket', 'shop'],
                },
                menu      : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('MENU'),
                    exacts  : [],
                    strings : ['hamburger', 'menu', 'nav', 'bars', 'lines'],
                },
                download  : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('MENU'),
                    exacts  : [],
                    strings : ['download'],
                },
                order     : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('ORDER'),
                    exacts  : [],
                    strings : ['order'],
                },
                share     : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('SHARE'),
                    exacts  : [],
                    strings : ['share'],
                },
                move      : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('MOVE'),
                    exacts  : [],
                    strings : ['slide', 'range', 'move'],
                },
                account   : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('ACCOUNT'),
                    exacts  : [],
                    strings : [
                        'login',
                        'log-in',
                        'signup',
                        'sign-up',
                        'register',
                        'user',
                        'account',
                        'profile',
                    ],
                },
                date      : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('DATE'),
                    exacts  : [],
                    strings : ['date', 'picker'],
                },
                address   : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('ADDRESS'),
                    exacts  : [],
                    strings : ['pin', 'address', 'map', 'location'],
                },
                favorites : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('FAVORITES'),
                    exacts  : [],
                    strings : ['wishlist', 'favorite', 'heart'],
                },
                scroll    : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('SCROLL'),
                    exacts  : [],
                    strings : ['scroll', 'up', 'top'],
                },
                enlarge   : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('ENLARGE'),
                    exacts  : [],
                    strings : ['zoom', 'large', 'big'],
                },
                print     : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('PRINT'),
                    exacts  : [],
                    strings : ['print'],
                },
                plus      : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('PLUS'),
                    exacts  : ['+'],
                    strings : ['plus', 'increase'],
                },
                minus     : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('MINUS'),
                    exacts  : ['-'],
                    strings : ['minus', 'decrease', 'reduce'],
                },
                video     : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('VIDEO'),
                    exacts  : [],
                    strings : ['video', 'play', 'youtube', 'vimeo'],
                },
                pause     : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('PAUSE'),
                    exacts  : [],
                    strings : ['pause', 'stop', 'halt', 'hold'],
                },
                country   : {
                    occurs  : {},
                    total   : 0,
                    text    : build_lang.get('COUNTRY'),
                    exacts  : [],
                    strings : ['flag', 'lang', 'country', 'usa', 'english'],
                }
            };
            let html    = (() => {
                let res = EJS.strings.removeChars($el.outerHTML.toLowerCase(), [
                    'data-acsb-navigable',
                    'data-acsb-now-navigable',
                    'data-acsb-menu-root-link',
                    'menuitem',
                    'shopping',
                    'tabindex',
                    'backup',
                    'group',
                    'setup',
                    'topic',
                    'stop',
                    'index',
                    'closed',
                    'bind',
                    'binary',
                    'binge',
                    'left:',
                    'right:',
                    'popup',
                    'upload',
                    'data-acsb-menu',
                    'prevent',
                    'display',
                    'player',
                ]);

                for( let $icon of EJS.picks('span, i', $el) ) {
                    res = res+EJS.elements.text($icon);
                }

                if( $el.closest('[data-acsb-menu="a"], [role="menuitem"]') ) {
                    res = EJS.strings.removeChars(res, ['nav', 'menu']);
                }

                const bgImage = EJS.elements.style($el, 'background-image');

                if( bgImage !== 'none' ) {
                    res = res+' '+bgImage;
                }

                return res.replace(window.location.hostname.replace('www', ''), '');
            })();
            let text    = EJS.elements.text($el).toLowerCase();

            if( typeof this.acsbTextualOpsProcessor !== 'function' ) {
                this.acsbTextualOpsProcessor = (type, texts, exacts, text, html, matches) => {
                    for( let v of exacts ) {
                        if( text === v ) {
                            matches[type].total     = matches[type].total+1;
                            matches[type].occurs[v] = 1;
                        }
                    }

                    for( let v of texts ) {
                        matches[type].total     = matches[type].total+(EJS.strings.getOccures(html, v));
                        matches[type].occurs[v] = EJS.strings.getOccures(html, v);
                    }

                    return matches;
                };
            }

            matches = this.acsbTextualOpsProcessor('close', matches['close'].strings, matches['close'].exacts, text, html, matches);

            if( matches.close.total < 1 ) {
                for( let k in matches ) {
                    matches = this.acsbTextualOpsProcessor(k, matches[k].strings, matches[k].exacts, text, html, matches);
                }
            }

            let occurs = 0;
            let method = null;

            for( let k in matches ) {
                if( matches[k].total > occurs ) {
                    occurs = matches[k].total;
                    method = k;
                }
            }

            const results = {occurs : 0, text : '', matched : '', method : null};

            if( method ) {
                results.method = method;
                results.occurs = occurs;
                results.text   = matches[method].text;
            }

            return results;
        },

        getClickableText($el){
            let text = EJS.elements.text($el, true, ['svg']);

            if( ! text ) {
                const ariaLabel = $el.getAttribute('aria-label');
                const title     = $el.getAttribute('title');
                const isInput   = $el.matches('input[type="button"], input[type="submit"]') && $el.value;

                if( ariaLabel ) {
                    text = ariaLabel;
                } else if( isInput ) {
                    text = $el.value;
                } else if( title ) {
                    text = title;
                }

                if( text ) {
                    EJS.elements.attrs($el, ['aria-label', 'title'], true);

                    if( isInput ) {
                        $el.setAttribute('aria-label', text);
                    } else {
                        EJS.elements.append(screenReader.srOnly.create(text), $el);
                    }
                }
            }

            return text;
        },

        setTextualOpsTags($el){
            if( $el.getAttribute('data-acsb-clickable') === 'true' ) {
                const textualOpsObject = screenReader.clickables.getTextualOpsObject($el);

                if( textualOpsObject.method ) {
                    $el.setAttribute('data-acsb-textual-ops', textualOpsObject.method);
                }
            } else {
                for( let $innerEl of EJS.picks('[data-acsb-clickable="true"]', $el) ) {
                    const textualOpsObject = screenReader.clickables.getTextualOpsObject($innerEl);

                    if( textualOpsObject ) {
                        $innerEl.setAttribute('data-acsb-textual-ops', textualOpsObject.method);
                    }
                }
            }
        },

        handleCarouselsPagination(){
            for( let $el of EJS.picks('[data-acsb-carousel="true"]') ) {
                if( $el.acsbCarouselPagingBound ) {
                    continue;
                }

                $el.acsbCarouselPagingBound = true;

                let i = 0;
                for( let $pag of EJS.picks('[data-acsb-carousel-paging="true"]', $el) ) {
                    i++;

                    const $srOnly = EJS.pick('[data-acsb-sr-only="true"]', $pag);

                    if( $srOnly && ! EJS.elements.text($srOnly).includes(String(i)) ) {
                        $srOnly.textContent = $srOnly.textContent+' | '+String(i);
                    }

                    EJS.events.on($el, 'acsbHit', () => {
                        const $carousel = $el.closest('[data-acsb-carousel="true"]');

                        if( $carousel ) {
                            EJS.elements.attrs(EJS.picks('[data-acsb-carousel-paging="true"][aria-selected="true"]', $carousel), {'aria-selected' : 'false'})
                        }

                        $pag.setAttribute('aria-selected', 'true');
                    });
                }
            }
        },

        handleTabs(){
            for( let $el of EJS.picks('div, nav, section, ul, ol') ) {
                if( $el.acsbTabsBound ) {
                    continue;
                }

                $el.acsbTabsBound = true;

                if( $el.closest('[data-acsb], [data-acsb-tablist="true"], [data-acsb-carousel="true"]')
                    || EJS.pick('[data-acsb], [data-acsb-tablist="true"], [data-acsb-carousel="true"], [data-acsb-dropdown]', $el) ) {
                    continue;
                }

                const $navBtns = EJS.picks('[data-acsb-now-navigable="true"][role="button"], a[href^="#"][data-acsb-now-navigable="true"]', $el);

                if( $navBtns.length < 3 ) {
                    continue;
                }

                let badElements = false;
                let hasLinks    = false;
                let noText      = false;

                for( let $link of EJS.picks('a[data-acsb-now-navigable="true"]', $el) ) {
                    if( ! $link.href.includes('#') ) {
                        hasLinks = true;
                        break;
                    }
                }

                if( hasLinks ) {
                    continue;
                }

                for( let $navBtn of $navBtns ) {
                    if( build_utilities.getShownText($navBtn).length < 1 ) {
                        noText = true;
                    }
                }

                if( noText ) {
                    continue;
                }

                for( let $innerEl of EJS.picks('form, input, select, textarea, iframe, ul, ol, nav, section, [role="tablist"], [role="navigation"]', $el) ) {
                    if( ! $innerEl.closest('[data-acsb-hidden="true"]') ) {
                        badElements = true;
                        break;
                    }
                }

                if( ! badElements ) {
                    for( let $navBtn of $navBtns ) {
                        let $parent  = $navBtn.parentElement;
                        let $wrapper = $navBtn.parentElement;

                        if( EJS.picks('[role="button"], a[href^="#"]', $parent).length > 1 ) {
                            continue;
                        }

                        while( $parent ) {
                            if( EJS.picks('[role="button"], a[href^="#"]', $parent).length > 1 ) {
                                break;
                            }
                            $wrapper = $parent;
                            $parent  = $parent.parentElement;
                        }

                        if( build_utilities.getShownText($navBtn).length !== build_utilities.getShownText($wrapper).length ) {
                            badElements = true;
                            break;
                        }
                    }
                }

                if( badElements ) {
                    continue;
                }

                let $nav     = $navBtns[0].closest('[role="navigation"]');
                let $tabList = $navBtns[0].parentElement;

                EJS.elements.attrs($navBtns, {'role' : 'tab'});

                while( $tabList ) {
                    if( EJS.picks('[role="tab"]', $tabList).length >= 3 ) {
                        break;
                    }
                    $tabList = $tabList.parentElement;
                }

                if( $nav
                    && EJS.picks('[data-ascb-menu="ul"]', $nav).length <= 1
                    && EJS.picks('[data-ascb-menu="ul"]', $el).length <= 1 ) {
                    $nav.setAttribute('role', 'presentation');
                }

                if( $tabList ) {
                    EJS.elements.attrs($tabList, {'role' : 'tablist', 'data-acsb-tablist' : 'true'});

                    if( ['OL', 'UL'].includes($tabList.tagName) ) {
                        for( let $li of EJS.picks('li', $tabList) ) {
                            if( $li.getAttribute('role') !== 'tab' ) {
                                $li.setAttribute('role', 'none');
                            }
                        }
                    }
                }

                EJS.events.on($navBtns, 'keydown', e => {
                    if( [37, 39].includes(e.which) ) {
                        EJS.events.prevent(e);
                        adjustments.keyNav.navigation.bindArrowNav($navBtns, 'left-right', e.which);
                    }
                });
            }
        },

        processState($el, state, elClicked){
            if( ! $el.acsbOriginalClass ) {
                return;
            }

            const elClasses = $el.getAttribute('class');
            const isActive  = EJS.strings.inString(elClasses, 'active');
            const wasActive = EJS.strings.inString($el.acsbOriginalClass, 'active');

            const classesBeforeChange = $el.acsbOriginalClass ? $el.acsbOriginalClass.split(' ') : [];
            const classesAfterChange  = elClasses ? elClasses.split(' ') : [];

            let currentState;
            let newState;

            if( state === 'expanded' ) {
                currentState = $el.getAttribute('aria-expanded');
            } else if( state === 'selected' ) {
                currentState = $el.getAttribute('aria-selected');
            } else {
                currentState = $el.getAttribute('aria-pressed');
            }

            if( classesAfterChange.length === classesBeforeChange.length ) {
                if( ! EJS.arrays.areIdentical(classesBeforeChange, classesAfterChange) ) {
                    if( ! currentState || currentState === 'false' ) {
                        newState = 'true';
                    } else if( currentState === 'true' ) {
                        newState = 'false';
                    }
                }
            }

            if( (isActive && ! wasActive) || classesAfterChange.length > classesBeforeChange.length ) {
                if( ! currentState || currentState === 'false' ) {
                    newState = 'true';
                }
            }

            if( (wasActive && ! isActive) || classesAfterChange.length < classesBeforeChange.length ) {
                if( ! currentState || currentState === 'true' ) {
                    newState = 'false';
                }
            }

            if( newState === 'true' && ! elClicked ) {
                return;
            }

            if( (state === 'expanded' || state === 'selected') && elClicked && newState === 'false' ) {
                return;
            }

            if( newState === 'true' || newState === 'false' ) {
                switch( state ) {
                    case 'selected':
                        $el.setAttribute('aria-selected', newState);
                        break;
                    case 'expanded':
                        $el.setAttribute('aria-expanded', newState);
                        break;
                    case 'pressed':
                        $el.setAttribute('aria-pressed', newState);
                        break;
                }
            }

            $el.acsbOriginalClass = elClasses;
        },

        processClickables($els){
            if( Object.keys(this.presetLinks).length < 1 ) {
                this.presetLinks = {
                    'facebook.com'    : 'Facebook',
                    'yahoo.com'       : 'Yahoo',
                    'yandex.com'      : 'Yandex',
                    'xing.com'        : 'Xing',
                    'medium.com'      : 'Medium',
                    'linkedin.com'    : 'LinkedIn',
                    'dribbble.com'    : 'Dribbble',
                    'github.com'      : 'Github',
                    'snapchat.com'    : 'Snapchat',
                    'instagram.com'   : 'Instagram',
                    'twitter.com'     : 'Twitter',
                    'tripadvisor.com' : 'Trip Advisor',
                    'yelp.com'        : 'Yelp',
                    'tiktok.com'      : 'TikTok',
                    'whatsapp.com'    : 'WhatsApp',
                    'whatsapp://'     : 'WhatsApp',
                    'youtube.com'     : 'YouTube',
                    'reddit.com'      : 'Reddit',
                    'tumblr.com'      : 'Tumblr',
                    'flickr.com'      : 'Flickr',
                    'pinterest.com'   : 'Pinterest',
                    'maps.google.com' : 'Google Maps',
                    'rss'             : build_lang.get('RSS'),
                    'feed'            : build_lang.get('RSS'),
                    'cart'            : build_lang.get('CART'),
                    'bag'             : build_lang.get('CART'),
                    'checkout'        : build_lang.get('CART'),
                    'wishlist'        : build_lang.get('FAVORITES'),
                    'favorites'       : build_lang.get('FAVORITES'),
                    'saves'           : build_lang.get('FAVORITES'),
                    'search'          : build_lang.get('SEARCH'),
                    'register'        : build_lang.get('ACCOUNT'),
                    'user'            : build_lang.get('ACCOUNT'),
                    'signup'          : build_lang.get('ACCOUNT'),
                    'profile'         : build_lang.get('ACCOUNT'),
                    'sign-up'         : build_lang.get('ACCOUNT'),
                    'login'           : build_lang.get('ACCOUNT'),
                    'log-in'          : build_lang.get('ACCOUNT'),
                    'account'         : build_lang.get('ACCOUNT'),
                    'stores'          : build_lang.get('LOCATIONS'),
                    'locator'         : build_lang.get('LOCATIONS'),
                    'shops'           : build_lang.get('LOCATIONS'),
                    'locations'       : build_lang.get('LOCATIONS'),
                    'contact'         : build_lang.get('CONTACT'),
                    'quote'           : build_lang.get('CONTACT')
                };
            }

            if( ! $els || $els.length < 1 ) {
                $els = EJS.picks('[data-acsb-clickable="true"]');
            }

            for( let $el of $els ) {
                if( $el.acsbClickableBound ) {
                    continue;
                }

                $el.acsbClickableBound = true;

                if( ! $el.matches('[data-acsb-clickable="true"]')
                    || $el.matches('[data-acsb-iframe-explainer="true"]') ) {
                    continue;
                }

                if( screenReader.clickables.isButton($el) ) {
                    this.processButton($el);
                } else if( $el.tagName === 'A' ) {
                    if( $el.href.includes('#')
                        && $el.closest('[data-acsb-carousel="true"]')
                        && (this.isCarouselNextButton($el) || this.isCarouselPrevButton($el) || this.isCarouselPagination($el)) ) {
                        this.processButton($el);
                    } else {
                        this.processLink($el);
                    }
                }
            }

            this.handleCarouselsPagination();
        },

        processLink($link){
            const href = $link.getAttribute('href');

            if( ! href ) {
                return;
            }

            if( href.length < 1 ) {
                $link.setAttribute('href', $link.href);
            }

            if( window.location.href.toLowerCase() === build_utilities.getUrlAsAbsolute(href).toLowerCase() ) {
                $link.setAttribute('aria-current', 'page');
            }

            if( EJS.strings.inString(href, '.pdf') ) {
                return EJS.elements.append(screenReader.srOnly.create(build_lang.get('FRONT_PDF_LINK')), $link, true);
            }

            if( EJS.strings.inString(href, 'tel:') ) {
                return EJS.elements.append(screenReader.srOnly.create(build_lang.get('FRONT_TELEPHONE_LINK')), $link, true);
            }

            if( EJS.strings.inString(href, 'mailto:') ) {
                return EJS.elements.append(screenReader.srOnly.create(build_lang.get('FRONT_EMAIL_LINK')), $link, true);
            }

            if( $link.href === document.location.origin
                || $link.href.substring(0, $link.href.length-1) === document.location.origin ) {
                return EJS.elements.append(screenReader.srOnly.create(build_lang.get('HOMEPAGE')), $link, true);
            }

            let imgLink    = false;
            let presetLink = false;
            let text       = this.getClickableText($link);
            let searchHref = href.replace(window.location.hostname.replace('www', ''), '').toLowerCase();

            if( EJS.strings.isNumber(text) ) {
                text = '';
            }

            if( $link.getAttribute('target') === '_blank' ) {
                EJS.elements.append(screenReader.srOnly.create(build_lang.get('NEW_WINDOW')), $link);
            }

            for( let v of ['png', 'jpg', 'jpeg', 'webp', 'gif', 'svg'] ) {
                if( ! EJS.strings.inString(href, '.'+v) ) {
                    continue;
                }

                imgLink = true;
                EJS.elements.append(screenReader.srOnly.create(build_lang.get('FRONT_IMAGE_LINK')), $link, true);
                break;
            }

            for( let key in this.presetLinks ) {
                if( ! EJS.strings.inString(searchHref, key) ) {
                    continue;
                }

                if( text.length <= 3 && ! EJS.strings.inString(text, this.presetLinks[key]) ) {
                    let alt = '';

                    for( let $img of EJS.picks('img', $link) ) {
                        if( build_utilities.isVisible($img) && $img.alt && EJS.strings.inString($img.alt, this.presetLinks[key]) ) {
                            EJS.elements.attrs($img, {'role' : 'presentation'});
                            alt += $img.alt+' ';
                        }
                    }

                    EJS.elements.append(screenReader.srOnly.create(alt ? alt.trim() : this.presetLinks[key]), $link, true);
                }

                presetLink = true;
                break;
            }

            if( presetLink || imgLink ) {
                return;
            }

            if( href.substring(0, 1) === '#' ) {
                if( href.length >= 2 && text.length < 1 ) {
                    const $section = EJS.pick(href);
                    const hrefText = href.replace('#', '').replace('-', ' ').replace('_', ' ');

                    if( $section ) {
                        const selector       = 'h1, h2, h3, h4, h5, h6, .title';
                        const $sectionTitles = EJS.picks(selector, $section);
                        const nextTitles     = EJS.elements.next($section, selector);
                        const prevTitles     = EJS.elements.previous($section, selector);

                        if( $sectionTitles.length > 0 ) {
                            return EJS.elements.append(screenReader.srOnly.create(EJS.elements.text($sectionTitles[0])), $link, true);
                        }

                        if( nextTitles.length > 0 ) {
                            return EJS.elements.append(screenReader.srOnly.create(nextTitles[0], $link), true);
                        }

                        if( prevTitles.length > 0 ) {
                            return EJS.elements.append(screenReader.srOnly.create(prevTitles[0], $link), true);
                        }
                    }

                    if( hrefText >= 3 ) {
                        return EJS.elements.append(hrefText, $link);
                    }
                }

                return;
            }

            if( ! text
                || (text.split(' ').length <= 2
                    && build_utilities.isVisible($link)
                    && ! EJS.pick('img', $link)
                    && ! $link.closest('[role="navigation"]')) ) {
                screenReader.scrapper.setScrapeUrl($link, href);
            }
        },

        processButton($btn){
            if( $btn.getAttribute('role') !== 'tab' ) {
                $btn.setAttribute('role', 'button');
            }

            let isCarouselBtn = false;
            let text          = this.getClickableText($btn);

            if( text.length > 0 ) {
                for( let $svg of EJS.picks('svg', $btn) ) {
                    EJS.elements.attrs($svg, {
                        'aria-hidden'            : 'true',
                        'data-acsb-hidden'       : 'true',
                        'data-acsb-force-hidden' : 'true'
                    });
                }
            }

            if( text.length === 1 ) {
                let matched = false;

                switch( text.toLowerCase() ) {
                    case 'x':
                    case '':
                    case '':
                        matched = true;
                        EJS.elements.append(screenReader.srOnly.create(build_lang.get('REMOVE')), $btn, true);
                        break;
                    case '+':
                        matched = true;
                        EJS.elements.append(screenReader.srOnly.create(build_lang.get('PLUS')), $btn, true);
                        break;
                    case '-':
                        matched = true;
                        EJS.elements.append(screenReader.srOnly.create(build_lang.get('MINUS')), $btn, true);
                        break;
                }

                if( matched ) {
                    return;
                }
            }

            (() => {
                let desc;

                if( this.isCarouselPagination($btn) ) {
                    isCarouselBtn = true;
                    desc          = build_lang.get('CAROUSEL_NAVIGATION');
                    $btn.setAttribute('data-acsb-carousel-paging', 'true');
                } else {
                    if( this.isCarouselNextButton($btn) ) {
                        isCarouselBtn = true;
                        desc          = build_lang.get('NEXT');
                    }

                    if( this.isCarouselPrevButton($btn) ) {
                        isCarouselBtn = true;
                        desc          = build_lang.get('PREVIOUS');
                    }
                }

                if( isCarouselBtn ) {
                    if( EJS.strings.isNumber(text) ) {
                        $btn.textContent = '';
                        EJS.elements.append(screenReader.srOnly.create((desc+' '+text).trim()), $btn, true);
                    } else if( text.length < 1 ) {
                        EJS.elements.append(screenReader.srOnly.create(desc), $btn, true);
                    }

                    EJS.events.on($btn, 'acsbHit', () => {
                        const $carousel = $btn.closest('[data-acsb-carousel="true"]');

                        if( $carousel ) {
                            $carousel.setAttribute('aria-live', 'polite');
                            setTimeout(() => $carousel.removeAttribute('aria-live'), 3000);
                        }
                    });
                }
            })();

            if( isCarouselBtn || text.length > 0 ) {
                return;
            }

            const textualOps = this.getTextualOpsObject($btn);

            if( ! textualOps.method || textualOps.text.length < 1 ) {
                if( ! EJS.pick('img', $btn) && build_utilities.isVisible($btn) && ! $btn.matches('[data-acsb-overlay]') ) {
                    EJS.elements.attrs($btn, {
                        'aria-hidden'                 : 'true',
                        'data-acsb-hidden'            : 'true',
                        'data-acsb-force-hidden'      : 'true',
                        'data-acsb-force-unnavigable' : 'true',
                    });
                    adjustments.keyNav.navigation.makeUnnavigable($btn);
                }
                return;
            }

            if( $btn.matches('input[type="button"], input[type="submit"]') ) {
                $btn.setAttribute('aria-label', textualOps.text);
            } else {
                EJS.elements.append(screenReader.srOnly.create(textualOps.text), $btn, true);
            }
        }
    },

    landmarks : {
        process(){
            if( screenReader.rebinds > 0 ) {
                return;
            }

            this.handleFooter();
            this.handleMain();
            this.handleMenus();
            this.handleArticles();
        },

        getMain(){
            let $main = EJS.pick('main, [role="main"]');

            if( $main && build_utilities.isVisible($main) ) {
                return $main;
            }

            let $title;
            let $result;

            for( let $el of EJS.picks('h1, h2, h3', document, false) ) {
                if( $title
                    || ! build_utilities.isVisible($el)
                    || build_utilities.getShownText($el).length < 1
                    || $el.closest('[data-acsb], [role="navigation"]') ) {
                    continue;
                }
                $title = $el;
                break;
            }

            if( $title ) {
                let $parent     = $title.parentElement;
                const titleText = EJS.elements.text($title);

                while( $parent && $parent.tagName !== 'BODY' ) {
                    if( titleText !== EJS.elements.text($parent) && $parent.outerHTML.trim().length > 100 ) {
                        $result = $parent;
                        break;
                    }
                    $parent = $parent.parentElement;
                }
            }

            return $result;
        },

        getFooter(){
            let $footer;

            for( let $el of EJS.picks('footer') ) {
                if( $el.outerHTML.trim().length > 100 && build_utilities.isVisible($el) ) {
                    $footer = $el;
                }
            }

            if( ! $footer ) {
                const $footers     = [];
                const windowHeight = EJS.utilities.getWinSize().height;
                const $firstMenu   = EJS.pick('[role="navigation"]');
                const selectors    = [
                    'div[class*="footer" i]',
                    'div[class*="footer" i]',
                    'div[id*="footer" i]',
                    'div[id*="footer" i]',
                    'section[class*="footer" i]',
                    'section[class*="footer" i]',
                    'section[id*="footer" i]',
                    'section[id*="footer" i]',
                ];

                for( let $el of EJS.picks(selectors.join(',')) ) {
                    if( $el.closest('[data-acsb]')
                        || $el.contains($firstMenu)
                        || EJS.pick('[role="main"]', $el)
                        || EJS.picks('a, p, ul', $el).length < 5
                        || EJS.elements.offsets($el).top <= windowHeight ) {
                        continue;
                    }

                    let footerCandidate = true;

                    for( let $candidate of $footers ) {
                        if( $candidate.contains($el) ) {
                            footerCandidate = false;
                            break;
                        }
                    }

                    if( footerCandidate ) {
                        $footers.push($el);
                    }
                }

                $footer = $footers.pop();
            }

            return $footer;
        },

        getMenu(){
            const $mainMenu = EJS.pick('[data-acsb-main-menu="true"]');

            if( $mainMenu ) {
                return $mainMenu;
            }

            const data = {$el : undefined, itemCount : 0};

            for( let $nav of EJS.picks('[role="navigation"]') ) {
                const $clickables = EJS.picks('[data-acsb-clickable="true"][data-acsb-now-navigable="true"], [data-acsb-dropdown] [data-acsb-clickable="true"]', $nav);

                if( $nav.closest('[data-acsb]')
                    || $clickables.length < 1
                    || ! build_utilities.isVisible($nav)
                    || EJS.elements.offsets($nav).top > 200 ) {
                    continue;
                }

                const itemCount = $clickables.length;

                if( itemCount > data.itemCount ) {
                    data.$el       = $nav;
                    data.itemCount = itemCount;
                }
            }

            return data.$el;
        },

        handleMain(){
            const $main = this.getMain();

            if( $main ) {
                EJS.elements.attrs($main, {'data-acsb-main' : 'true', 'role' : 'main'});
            }
        },

        handleFooter(){
            const $footer = this.getFooter();

            if( ! $footer ) {
                return;
            }

            EJS.elements.attrs($footer, {
                'data-acsb-page-footer' : 'true',
                'role'                  : 'contentinfo',
                'aria-label'            : build_lang.get('FOOTER')
            });
        },

        handleMenus(){
            const $menu   = this.getMenu();
            const $header = EJS.pick('header');
            const $footer = EJS.pick('[data-acsb-page-footer="true"]');

            if( $footer ) {
                let i      = 0;
                let titles = 'h1, h2, h3, h4, h5, h6, [role="heading"]';

                for( let $el of EJS.picks('[role="navigation"]', $footer) ) {
                    if( $el.getAttribute('aria-label') ) {
                        continue;
                    }

                    let ariaLabel  = EJS.elements.nodesText($el);
                    const $firstLi = EJS.pick('li', $el);

                    if( $firstLi && ! EJS.pick('[data-acsb-clickable="true"]', $firstLi) ) {
                        const firstLiText = build_utilities.getShownText($firstLi);

                        if( firstLiText.length > 0 ) {
                            ariaLabel = firstLiText;
                        }
                    }

                    if( $el.previousElementSibling && $el.previousElementSibling.matches(titles) ) {
                        ariaLabel = EJS.elements.text($el.previousElementSibling);
                    } else {
                        const $visibles = [];

                        for( let $heading of EJS.picks(titles, $el) ) {
                            if( $visibles.length > 0 ) {
                                ariaLabel = null;
                                break;
                            }

                            if( build_utilities.isVisible($heading) ) {
                                ariaLabel = EJS.elements.text($heading);
                                $visibles.push($heading);
                            }
                        }
                    }

                    if( ! ariaLabel ) {
                        ariaLabel = i === 0 ? build_lang.get('FOOTER_MENU') : build_lang.get('FOOTER_MENU')+' '+(i+1);
                    }

                    $el.setAttribute('aria-label', ariaLabel);
                    i++;
                }
            }

            if( $menu ) {
                $menu.setAttribute('data-acsb-main-menu', 'true');

                if( ! $menu.getAttribute('aria-label') ) {
                    $menu.setAttribute('aria-label', build_lang.get('MAIN_MENU'));
                }
            }

            if( $header ) {
                let i = 0;
                for( let $el of EJS.picks('[role="navigation"]:not([aria-label]', $header) ) {
                    $el.setAttribute('aria-label', i === 0 ? build_lang.get('HEADER_MENU') : build_lang.get('HEADER_MENU')+' '+(i+1));
                }
            }

            for( let $el of EJS.picks('nav:not([role])') ) {
                $el.setAttribute('role', 'presentation');
            }

            let i = 0;
            for( let $el of EJS.picks('[role="navigation"]:not([aria-label])') ) {
                $el.setAttribute('aria-label', i === 0 ? build_lang.get('GENERIC_MENU') : build_lang.get('GENERIC_MENU')+' '+(i+1));
            }
        },

        handleArticles(){
            for( let $article of EJS.picks('article') ) {
                if( EJS.elements.text($article).length < 500 && ! $article.getAttribute('role') ) {
                    $article.setAttribute('role', 'presentation');
                }
            }
        },
    },

    scrapper : {
        inProcess : [],

        process(){
            this.handleScrapedUrls();
        },

        scrape(urls){
            if( urls.length < 1 ) {
                return;
            }

            EJS.fetch(config.cache+'/app/'+config.domain+'/meta.json', [], [], 'GET').then(res => {
                let cache = res ? JSON.parse(res) : {};

                if( ! cache ) {
                    return;
                }

                const results   = {};
                const toProcess = [];

                for( let url in cache ) {
                    if( ! cache[url] || ! cache[url][state.lang] || results[url] ) {
                        continue;
                    }

                    results[url] = {
                        title       : cache[url][state.lang].title,
                        description : cache[url][state.lang].description,
                    };
                }

                for( let url of urls ) {
                    url = EJS.uris.getFormatted(url, false, true);

                    if( ! results[url] && ! this.inProcess.includes(url) ) {
                        toProcess.push(url);
                        this.inProcess.push(url);
                    }
                }

                if( Object.keys(results).length > 0 ) {
                    this.deployResults(results);
                }

                if( toProcess.length > 0 && ! state.siteCfg.blockMeta ) {
                    EJS.fetch(config.endpoint+'/'+config.app+'/', {
                        remote   : 'processMetaRemote',
                        urls     : JSON.stringify(toProcess),
                        domain   : config.domain,
                        language : state.lang,
                    }, [], 'POST');
                }

                setTimeout(() => {
                    if( this.inProcess.length > 0 ) {
                        const reProcesses = [];

                        for( let url of urls ) {
                            if( this.inProcess.includes(EJS.uris.getFormatted(url, false, true)) ) {
                                reProcesses.push(url);
                            }
                        }

                        if( reProcesses.length > 0 ) {
                            this.scrape(reProcesses);
                        }
                    }
                }, 10000);
            });
        },

        setScrapeUrl($el, url){
            const absoluteUrl = build_utilities.getUrlAsAbsolute(url);

            if( ! url
                || ! absoluteUrl
                || absoluteUrl.length < 5
                || ! EJS.uris.isUrlValid(absoluteUrl)
                || url.substr(0, 10).toLowerCase() === 'javascript' ) {
                return;
            }

            $el.setAttribute('data-acsb-scrape-url', absoluteUrl.split('#')[0].split('?')[0]);
        },

        deployResults(results){
            for( let $el of EJS.picks('[data-acsb-scrape-url]') ) {
                const url = EJS.uris.getFormatted($el.getAttribute('data-acsb-scrape-url'), false, true);

                let data = '';
                let desc = '';

                if( url ) {
                    for( let k in results ) {
                        if( k === url ) {
                            data = results[k];
                            break;
                        }
                    }
                }

                if( ! data ) {
                    continue;
                }

                if( this.inProcess.includes(url) ) {
                    let i = 0;
                    for( let urlInProcess of this.inProcess ) {
                        if( results[urlInProcess] === url ) {
                            delete this.inProcess[i];
                            break;
                        }
                        i++;
                    }
                }

                if( data['description'] && data['description'].length > 0 ) {
                    desc = EJS.strings.htmlDecode(data['description']);
                }

                if( data['title'] && data['title'].length > 0 ) {
                    desc = EJS.strings.htmlDecode(data['title']);
                }

                if( $el.tagName === 'IFRAME' ) {
                    if( desc && desc.length > 0 ) {
                        const $explainer = EJS.elements.previous($el, '[data-acsb-iframe-explainer="true"]')[0];

                        if( $explainer ) {
                            const brand = $explainer.getAttribute('data-acsb-url-brand');

                            desc = brand+' Iframe: '+desc;
                            $el.setAttribute('aria-label', desc);
                            $explainer.textContent = EJS.elements.text($explainer).replace(brand+' Iframe: ', desc+'. ');
                            $explainer.setAttribute('data-acsb-tooltip', $explainer.textContent);
                        }
                    }
                } else {
                    const text = EJS.elements.text($el);

                    if( desc && desc.length > 0 ) {
                        if( desc.length >= text.length
                            && ! EJS.strings.inString(text, desc)
                            && ! EJS.strings.inString(desc, text) ) {
                            EJS.elements.append(screenReader.srOnly.create(desc), $el);
                        }
                    } else if( EJS.elements.text($el).length < 1 ) {
                        const textualOpsObject = screenReader.clickables.getTextualOpsObject($el);

                        if( textualOpsObject.text.length > 0 && ! EJS.strings.inString(text, textualOpsObject.text) ) {
                            EJS.elements.append(screenReader.srOnly.create(textualOpsObject.text), $el);
                        }
                    }
                }

                $el.removeAttribute('data-acsb-scrape-url');
            }

            if( this.inProcess.length > 0 ) {
                this.inProcess = EJS.arrays.filter(this.inProcess);
            }
        },

        handleScrapedUrls(){
            const urls = [];

            for( let $el of EJS.picks('[data-acsb-scrape-url]') ) {
                if( $el.acsbScrapperProcessed ) {
                    continue;
                }

                $el.acsbScrapperProcessed = true;

                const url = $el.getAttribute('data-acsb-scrape-url');

                if( ! url || url.length < 5 || urls.includes(url) || ! EJS.uris.isUrlValid(url) ) {
                    continue;
                }

                urls.push(EJS.uris.getFormatted(url, false, true));
            }

            this.scrape(urls);
        }
    },

    alts : {
        inProcess : [],

        process(){
            const images      = this.getImagesForProcess();
            const bgImages    = this.getBgImagesForProcess();
            const otherImages = this.getOtherImagesForProcess();

            this.processImages(images.concat(bgImages).concat(otherImages));
        },

        processImages(images){
            if( images.length < 1 ) {
                return;
            }

            const urls = [];

            for( let obj of images ) {
                if( obj.$img.acsbAltProcessed ) {
                    continue;
                }

                const alt = obj.$img.getAttribute('alt');
                const url = EJS.uris.getFormatted(obj.url, false, true);

                if( (! alt || alt.length < 1) && obj.$img.tagName === 'IMG' && ! this.inProcess.includes(url) ) {
                    obj.$img.acsbAltProcessing = true;
                    obj.$img.setAttribute('alt', build_lang.get('PROCESSING_DATA_PLEASE_WAIT'));
                }

                if( ! urls.includes(url) ) {
                    urls.push(url);
                }
            }

            if( urls.length < 1 ) {
                return;
            }

            EJS.fetch(config.cache+'/app/'+config.domain+'/images.json', [], [], 'GET').then(res => {
                const cache     = res ? JSON.parse(res) : {};
                const results   = {};
                const toProcess = [];

                for( let url of urls ) {
                    for( let k in cache ) {
                        if( url === k && 'ocr' in cache[k] && state.lang in cache[k] ) {
                            results[url] = {url : url, ocr : cache[k].ocr, imr : cache[k][state.lang]};
                        }
                    }

                    if( ! results[url] && ! this.inProcess.includes(url) ) {
                        this.inProcess.push(url);
                        toProcess.push(url);
                    }
                }

                if( Object.keys(results).length > 0 ) {
                    this.deployResults(images, results);
                }

                if( toProcess.length > 0 && ! state.siteCfg.blockImages ) {
                    EJS.fetch(config.endpoint+'/'+config.app+'/', {
                        remote   : 'processImagesRemote',
                        images   : JSON.stringify(toProcess), domain : config.domain,
                        language : state.lang,
                    }, [], 'POST');
                }
            });

            setTimeout(() => {
                if( this.inProcess.length > 0 ) {
                    const reProcesses = [];

                    for( let k in images ) {
                        if( this.inProcess.includes(EJS.uris.getFormatted(images[k].url, false, true)) ) {
                            reProcesses.push(images[k]);
                        }
                    }

                    if( reProcesses.length > 0 ) {
                        this.processImages(reProcesses);
                    }
                }
            }, 10000);
        },

        deployResults(images, results){
            for( let obj of images ) {
                if( obj.$img.acsbAltProcessed ) {
                    continue;
                }

                for( let url in results ) {
                    const img = results[url];

                    if( EJS.uris.getFormatted(obj.url, false, true) !== img.url ) {
                        continue;
                    }

                    if( this.inProcess.includes(url) ) {
                        let i = 0;
                        for( let urlInProcess of this.inProcess ) {
                            if( urlInProcess === url ) {
                                delete this.inProcess[i];
                                continue;
                            }
                            i++;
                        }
                    }

                    if( obj.$img.alt === build_lang.get('PROCESSING_DATA_PLEASE_WAIT') ) {
                        obj.$img.removeAttribute('alt');
                    }

                    obj.$img.acsbAltProcessed  = true;
                    obj.$img.acsbAltProcessing = false;

                    if( (! img.ocr && ! img.imr) ) {
                        continue;
                    }

                    let desc = '';
                    let imr  = '';
                    let ocr  = '';

                    if( img.imr ) {
                        const parts = img.imr.toLowerCase().split(',');

                        if( parts.length >= 3 ) {
                            let i = 0;
                            for( let v of parts ) {
                                if( i > 1 ) {
                                    imr += build_lang.get('AND').toLowerCase()+' '+v;
                                    break;
                                } else {
                                    imr += v+' ';
                                }
                                i++;
                            }
                        } else {
                            imr = img.imr;
                        }

                        imr = EJS.strings.sentenceCase(imr.replace(/\s+/g, ' '));
                    }

                    if( img.ocr ) {
                        ocr = img.ocr;
                    }

                    obj.$img.acsbImr = imr;
                    obj.$img.acsbOcr = ocr;

                    if( ocr.length > 150 && imr.length > 0 ) {
                        desc = imr+'. '+ocr;
                    } else {
                        desc = ocr;

                        if( imr.length > 0 ) {
                            if( desc.length > 0 ) {
                                desc = desc+'. '+imr;
                            } else {
                                desc = imr;
                            }
                        }
                    }

                    obj.$img.setAttribute('data-acsb-force-visible', 'true');
                    setTimeout(() => obj.$img.removeAttribute('data-acsb-force-visible'), 300);

                    obj.$img.src           = '';
                    obj.$img.src           = obj.url;
                    obj.$img.acsbAltMethod = 'AI';
                    obj.$img.setAttribute('data-acsb-alt-candidate', desc);
                }
            }

            this.promoteAllAltCandidates();

            if( this.inProcess.length > 0 ) {
                this.inProcess = EJS.arrays.filter(this.inProcess);
            }
        },

        buildAltCandidate($img){
            if( $img.closest('[data-acsb]') ) {
                return;
            }

            let src          = $img.getAttribute('src');
            const background = $img.getAttribute('data-acsb-bg-image');

            if( background && background.length > 4 ) {
                src = $img.getAttribute('data-acsb-bg-image');
            }

            if( ! src || src.length < 5 ) {
                return;
            }

            const alt       = $img.getAttribute('alt');
            const title     = $img.getAttribute('title');
            const ariaLabel = $img.getAttribute('aria-label');

            let candidate;
            let method;

            if( alt ) {
                candidate = title;
                method    = 'alt';
            }

            if( ! candidate && ariaLabel > 0 ) {
                candidate = ariaLabel;
                method    = 'ariaLabel';
            }

            if( ! candidate && title ) {
                candidate = title;
                method    = 'title';
            }

            if( ! candidate ) {
                candidate = EJS.uris.getFileName(src, true);
                method    = 'file';

                for( let v of candidate.split(' ') ) {
                    if( candidate === v ) {
                        continue;
                    }

                    if( EJS.strings.isNumber(v.toLowerCase().replace('px', ''))
                        || EJS.strings.isNumber(v.toLowerCase().replace('x', '')) ) {
                        candidate.replace(' '+v);
                    }
                }
            }

            $img.acsbAltMethod = method;
            $img.setAttribute('data-acsb-alt-candidate', candidate.substring(0, 100).replace(/"/g, '&quot;'));
        },

        getImagesForProcess(){
            const images = [];

            for( let $img of EJS.picks('img') ) {
                if( ! $img.acsbLoadProcessBound && ! $img.complete ) {
                    $img.acsbLoadProcessBound = true;
                    EJS.events.on($img, 'load', () => this.process());
                    continue;
                }

                if( $img.acsbAltBound || $img.acsbAltProcessed || this.isImageLoadingLazy($img) ) {
                    continue;
                }

                $img.acsbAltBound = true;

                let alt   = $img.getAttribute('alt');
                let title = $img.getAttribute('title');

                if( title === alt ) {
                    $img.removeAttribute('title');
                } else if( title && title.trim().length > 0 ) {
                    if( ! alt || alt.trim().length < 1 ) {
                        alt = title;
                    } else {
                        alt = alt+' | '+title.trim();
                    }

                    $img.setAttribute('alt', alt);
                    $img.removeAttribute('title');
                }

                if( $img.offsetWidth <= 16 && $img.offsetWidth <= 16 && ! $img.getAttribute('role') ) {
                    $img.setAttribute('role', 'presentation');
                }

                if( alt && ! this.isOverrideableAlt($img) ) {
                    let $parent    = $img.parentElement;
                    let matched    = false;
                    let iterations = 0;

                    while( $parent && iterations < 3 && ! matched ) {
                        if( ! $parent.parentElement
                            || $parent.tagName === 'BODY'
                            || $parent.parentElement.tagName === 'BODY' ) {
                            matched = false;
                            break;
                        }

                        if( EJS.strings.inString(EJS.elements.text($parent), alt) ) {
                            matched = true;
                        }

                        iterations = iterations+1;
                        $parent    = $parent.parentElement;
                    }

                    if( matched ) {
                        $img.setAttribute('role', 'presentation');
                    }

                    continue;
                }

                const src = this.calculateSrc($img);

                if( ! src || src.length < 5 ) {
                    EJS.elements.attrs($img, {'alt' : 'acsb Corrupt Image', 'role' : 'presentation'});
                    continue;
                }

                this.buildAltCandidate($img);

                if( $img.acsbAltMethod === 'file' && $img.offsetWidth >= 16 && $img.offsetWidth >= 16 ) {
                    images.push({$img : $img, url : src});
                } else {
                    this.promoteAltCandidate($img);
                }
            }

            return images;
        },

        getBgImagesForProcess(){
            const images = [];

            for( let $el of EJS.picks('div, li, a, figure, aside') ) {
                if( $el.acsbBgAltBound || $el.acsbAltProcessed ) {
                    continue;
                }

                const bgImage = EJS.elements.style($el, 'background-image');

                if( (bgImage === 'none' || ! bgImage) && EJS.strings.inString(EJS.elements.html($el), 'lazy') ) {
                    continue;
                }

                $el.acsbBgAltBound = true;

                if( ! bgImage
                    || bgImage === 'none'
                    || bgImage.length < 5
                    || $el.tagName === 'IMG'
                    || $el.offsetHeight < 50
                    || $el.offsetWidth < 50
                    || $el.getAttribute('role') === 'button'
                    || $el.getAttribute('data-acsb')
                    || bgImage.includes('-gradient')
                    || build_utilities.getShownText($el).length > 0 ) {
                    continue;
                }

                const bgImageUrl = build_utilities.getUrlAsAbsolute(bgImage.replace('url(', '').replace(')', '').replace(/\"/gi, ''));

                $el.setAttribute('data-acsb-bg-image', bgImageUrl);
                this.buildAltCandidate($el);

                if( $el.acsbAltMethod === 'file' && bgImageUrl && $el.offsetWidth !== 1 && $el.offsetHeight !== 1 ) {
                    images.push({$img : $el, url : bgImageUrl.split('#')[0]});
                }
            }

            return images;
        },

        getOtherImagesForProcess(){
            const images = [];

            for( let $input of EJS.picks('input[type="image"]') ) {
                if( $input.acsbOtherAltsBound || $input.acsbAltProcessed ) {
                    continue;
                }

                $input.acsbOtherAltsBound = true;

                const alt       = $input.getAttribute('alt');
                const title     = $input.getAttribute('title');
                const ariaLabel = $input.getAttribute('aria-label');
                const src       = $input.getAttribute('src');

                if( ! src || src.length < 5 ) {
                    EJS.elements.remove($input);
                    continue;
                }

                EJS.elements.attrs($input, ['aria-label', 'title'], true);

                if( alt && alt.length > 0 ) {
                    continue;
                }

                if( ariaLabel ) {
                    $input.setAttribute('alt', ariaLabel);
                    continue;
                }

                if( title ) {
                    $input.setAttribute('alt', title);
                    continue;
                }

                if( $input.value.length > 0 ) {
                    $input.setAttribute('alt', $input.value);
                    continue;
                }

                images.push({img : $input, url : build_utilities.getUrlAsAbsolute(src).split('#')[0]});
            }

            return images;
        },

        isOverrideableAlt($img){
            if( ! $img.alt
                || $img.getAttribute('data-acsb-override') === 'true'
                || EJS.strings.inString($img.alt, 'acsbo') ) {
                return true;
            }

            let overrideable = false;
            const sentences  = $img.alt.split(' ');

            if( sentences.length === 1 && sentences[0].length > 10 ) {
                return true;
            }

            if( $img.src.length >= 5 && EJS.strings.inString($img.alt, '.'+EJS.uris.getImageExt($img.src), false) ) {
                return true;
            }

            for( let sentence of sentences ) {
                const x = sentence.toLowerCase().split('x');
                if( x.length === 2 && EJS.strings.isNumber(x[0]) && EJS.strings.isNumber(x[1]) ) {
                    overrideable = true;
                    break;
                }
            }

            return overrideable;
        },

        isImageLoadingLazy($img){
            const html = EJS.elements.html($img).toLowerCase();
            const src  = $img.getAttribute('src');

            if( ! $img.complete || ! src ) {
                if( html.includes('lazy')
                    || html.includes('lzy')
                    || (! src && html.includes('src'))
                    || (! src && html.includes('url'))
                    || (src && src.length >= 5 && ! EJS.uris.isUrlValid(src)) ) {
                    if( ($img.offsetWidth === 0 && $img.offsetHeight === 0) || ! src || src.length < 1 ) {
                        return true;
                    }
                }
            }

            if( src && src.substring(0, 5) === 'data:' ) {
                return true;
            }

            return false;
        },

        promoteAllAltCandidates(){
            for( let $el of EJS.picks('[data-acsb-alt-candidate]') ) {
                if( $el.acsbAltProcessing ) {
                    continue;
                }
                this.promoteAltCandidate($el);
            }
        },

        promoteAltCandidate($img){
            const candidate  = $img.getAttribute('data-acsb-alt-candidate');
            const background = $img.getAttribute('data-acsb-bg-image');

            if( ! candidate ) {
                return;
            }

            if( background && background.length >= 5 && $img.tagName !== 'IMG' ) {
                if( $img.acsbAltMethod !== 'file' ) {
                    EJS.elements.append(screenReader.srOnly.create(null, {
                        'role'       : 'img',
                        'aria-label' : candidate,
                    }), $img, true);
                }
            } else {
                $img.setAttribute('alt', candidate);
            }

            if( $img.acsbAltMethod === 'file' && $img.tagName === 'IMG' ) {
                $img.setAttribute('role', 'presentation');
            }

            $img.removeAttribute('data-acsb-alt-candidate');
            this.promoteUsemapCandidates($img);
        },

        promoteUsemapCandidates(img){
            const mapName = img.getAttribute('usemap');

            if( ! mapName ) {
                return;
            }

            const $map = EJS.pick('[name="'+mapName.replace('#', '')+'"]');

            if( ! $map ) {
                return;
            }

            const $areas    = EJS.picks('area', $map);
            const candidate = img.getAttribute('data-acsb-alt-candidate');

            if( ! $areas[0] ) {
                EJS.elements.remove($map);
            }

            let i = 0;
            for( let $area in $areas ) {
                const alt     = $area.getAttribute('alt');
                const acsbAlt = $area.getAttribute('data-acsb-first-alt');

                if( i === 0 ) {
                    if( ! alt || alt.length < 1 || acsbAlt === 'true' ) {
                        EJS.elements.attrs($area, {'data-acsb-first-alt' : 'true', 'alt' : candidate});

                        if( acsbAlt === 'true' ) {
                            $area.removeAttribute('data-acsb-first-alt');
                        }
                    }
                } else {
                    if( ! alt || alt.length > 1 ) {
                        $area.setAttribute('alt', 'Area '+i);
                    }
                }
                i++;
            }
        },

        calculateSrc($img){
            let src     = $img.getAttribute('src');
            let srcset  = $img.getAttribute('srcset');
            let dsrcset = $img.getAttribute('data-srcset');

            if( ! srcset && dsrcset ) {
                srcset = build_utilities.getUrlAsAbsolute(dsrcset);
            }

            if( (! src || src.length < 5) && srcset && srcset.length >= 5 ) {
                let srcArray = srcset.split(',');
                let srcItem  = srcArray[Math.round(srcArray.length / 2)];

                if( srcItem && srcItem.length >= 5 ) {
                    const parts = srcItem.trim().split(' ');

                    if( parts[1] && EJS.strings.inString(parts[1], 'w') ) {
                        srcItem = parts[0].trim();
                    }

                    src      = srcItem;
                    $img.src = src;
                    $img.removeAttribute('srcset');
                }
            }

            return $img.src;
        }
    },

    forms : {
        process(){
            this.handleForms();
            this.handleStrayElements();

            if( screenReader.rebinds < 1 ) {
                this.handleSuccessReload();
                EJS.events.on(window, config.events.elementShow, e => {
                    const $forms       = EJS.picks(e.detail.$el, 'form');
                    const $closestForm = e.detail.$el.closest('form');

                    if( $closestForm ) {
                        $forms.push($closestForm);
                    }

                    for( let $form of $forms ) {
                        if( $form.acsbFormBound && EJS.pick('[data-acsb-textual-type="null"]', $form) ) {
                            this.handleFormFields($form);
                        }
                    }
                });
            }
        },

        enforceUuid($forms){
            for( let $form of $forms ) {
                if( $form.acsbFormsUuidBound ) {
                    continue;
                }

                $form.acsbFormsUuidBound = true;

                if( ! $form.id ) {
                    return;
                }

                let i = 0;
                for( let $el of EJS.picks('form#'+$form.id) ) {
                    if( $el !== $form ) {
                        $el.setAttribute('id', $el.id+i);
                    }
                    i++;
                }
            }

            for( let $field of EJS.picks('input, select, textarea') ) {
                if( $field.acsbFieldsUuidBound ) {
                    return;
                }

                $field.acsbFieldsUuidBound = true;

                let i = 0;

                for( let $el of EJS.picks($field.tagName.toLowerCase()+'#'+$field.id) ) {
                    if( $el !== $field ) {
                        $el.id = ($field.id)+(+i);
                    }
                    i++;
                }
            }
        },

        isCartForm($form){
            let match  = false;
            const html = $form.outerHTML.replace(/<select.*>.*?<\/select>/gi, '');

            for( let str of ['cart', 'bag', 'basket', 'checkout', 'coupon', 'promo', 'quantity', 'qty'] ) {
                if( EJS.strings.inString(html, str) ) {
                    match = true;
                    break;
                }
            }

            if( match ) {
                for( let $field of EJS.picks('input, select, textarea', $form) ) {
                    if( ['hidden', 'button', 'submit', 'img'].includes($field.type)
                        || ! ['email', 'phone'].includes(this.field.textualType.getType($field, EJS.pick('label[for="'+$field.id+'"]')))
                        || ! build_utilities.isVisible($field) ) {
                        continue;
                    }

                    match = false;
                    break;
                }
            }

            return match;
        },

        isSearchForm($form){
            if( EJS.picks('select, textarea, input[type="checkbox"], input[type="radio"]', $form).length > 0 ) {
                return false;
            }

            const $fields = [];
            let isSearch  = false;

            for( let $input of EJS.picks('input', $form) ) {
                if( ! ['checkbox', 'radio', 'hidden', 'submit', 'img', 'button'].includes($input.type) ) {
                    $fields.push($input);
                }
            }

            if( $fields.length > 1 ) {
                return false;
            }

            for( let $field of $fields ) {
                if( EJS.strings.inString(EJS.elements.html($form), 'search') ) {
                    isSearch = true;
                } else {
                    if( this.field.textualType.getType($field, EJS.pick('label[for="'+$field.id+'"]')) === 'search' ) {
                        isSearch = true;
                    }
                }
            }

            return isSearch;
        },

        isWrapperForm($form){
            if( EJS.pick('h1, h2, h3, h4, h5, h6', $form)
                && EJS.pick('p', $form)
                && EJS.pick('img', $form)
                && EJS.pick('[role="navigation"]', $form) ) {
                return true;
            }
            return false;
        },

        handleForms($forms){
            $forms = $forms || EJS.picks('form');
            this.enforceUuid($forms);

            for( let $form of $forms ) {
                if( $form.acsbFormBound || $form.closest('[data-acsb]') || ! build_utilities.isVisible($form) ) {
                    continue;
                }

                $form.acsbFormBound = true;

                let type = 'standard';

                if( this.isWrapperForm($form) ) {
                    type = 'wrapper';
                }

                if( this.isSearchForm($form) ) {
                    type = 'search';

                    if( EJS.elements.text($form) === EJS.elements.text($form.parentElement) ) {
                        $form.parentElement.setAttribute('role', 'search');
                    } else {
                        $form.setAttribute('role', 'search');
                    }
                }

                if( this.isCartForm($form) ) {
                    type = 'cart';
                }

                $form.removeAttribute('novalidate');
                EJS.elements.attrs($form, {
                    'data-acsb-form-uuid' : EJS.strings.random(),
                    'data-acsb-form-type' : type,
                });

                this.handleFormFields($form);
                this.handleMissingButtons($form);

                if( type === 'search' ) {
                    this.submissions.handleSearchProcess($form);
                } else if( type !== 'wrapper' ) {
                    this.submissions.handleStandardProcess($form);
                }
            }
        },

        handleMissingButtons($form){
            const type = $form.getAttribute('data-acsb-form-type');

            if( ['wrapper', 'cart'].includes(type)
                || EJS.picks('button:not([type="button"]), [type="image"]', $form).length > 0 ) {
                return;
            }

            const btnText  = type === 'search' ? build_lang.get('SEARCH') : build_lang.get('SUBMIT');
            const $fields  = EJS.picks('input, select, textarea', $form);
            let $newButton = EJS.elements.create('button', {
                'class'                  : 'acsb-hidden',
                'type'                   : 'submit',
                'aria-hidden'            : 'true',
                'data-acsb-hidden'       : 'true',
                'data-acsb-force-hidden' : 'true',
            }, btnText);

            let $possibleButton;

            for( let $btn of EJS.picks('a[role="button"], span[role="button"], div[role="button"]', $form) ) {
                if( EJS.picks('*', $btn).length > 5
                    || EJS.picks('input, textarea, select, label, [data-acsb-possible-button="true"]', $btn).length > 0
                    || $btn.closest('label, [data-acsb-possible-button="true"]') ) {
                    continue;
                }

                $possibleButton = $btn;
                EJS.elements.attrs($btn, {
                    'data-acsb-possible-button' : 'true',
                    'data-acsb-force-navigable' : 'true',
                    'tabindex'                  : '0',
                });
            }

            if( $possibleButton ) {
                EJS.elements.insert($newButton, $possibleButton);
                EJS.events.on($possibleButton, 'click', e => {
                    if( ! $form.checkValidity() ) {
                        e.preventDefault();
                        EJS.elements.click($newButton);
                    }
                });
            } else {
                $newButton = EJS.elements.create('button', {
                    'type'              : 'submit',
                    'class'             : 'acsb-sr-only',
                    'data-acsb-sr-only' : 'true'
                }, btnText);
                EJS.elements.append($newButton, $form);
            }

            EJS.events.on($fields, 'keydown', e => {
                if( e.which !== 13
                    || ($form.tagName === 'FORM' && $form.checkValidity())
                    || ['file', 'checkbox', 'radio'].includes(e.target.type) ) {
                    return;
                }
                EJS.elements.click($newButton);
            });
        },

        handleFormFields($form){
            const $fields = EJS.picks('input, select, textarea', $form);

            for( let $field of $fields ) {
                $field.acsbFormFieldBound = false;
                this.field.process($field);
            }

            if( ['cart', 'wrapper'].includes($form.getAttribute('data-acsb-form-type')) ) {
                return;
            }

            const $visibleInputs = EJS.picks('input[data-acsb-field-visible="true"]');

            if( $visibleInputs.length <= 3 ) {
                for( let $input of $visibleInputs ) {
                    this.field.makeRequired($input);
                }
            } else {
                if( $visibleInputs.length > 1
                    && $visibleInputs.length < 10
                    && $form.getAttribute('data-acsb-form-type') === 'standard'
                    && ! EJS.pick('[aria-required="true"]', $form) ) {
                    for( let $field of $fields ) {
                        if( $field.getAttribute('data-acsb-field-visible') === 'true' ) {
                            this.field.makeRequired($field);
                        }
                    }
                }
            }
        },

        handleStrayElements(){
            for( let $field of EJS.picks('input, textarea, select') ) {
                if( $field.acsbStrayFieldBound ) {
                    continue;
                }

                $field.acsbStrayFieldBound = true;

                if( $field.closest('form, [data-acsb]') ) {
                    continue;
                }

                this.field.process($field);

                if( $field.getAttribute('data-acsb-textual-type') === 'search' ) {
                    let text       = EJS.elements.text($field.parentElement);
                    let $images    = EJS.picks('img, svg', $field.parentElement);
                    let $parent    = $field.parentElement;
                    let $orgParent = $field.parentElement;
                    let matched    = false;

                    while( ! matched ) {
                        if( $parent.tagName === 'BODY' ) {
                            break;
                        }

                        if( text === EJS.elements.text($parent) && $images.length === EJS.picks('img, svg', $parent).length ) {
                            $orgParent = $parent;
                            $parent    = $parent.parentElement;
                        } else {
                            matched = true;
                            break;
                        }
                    }

                    EJS.elements.attrs($orgParent, {'role' : 'search', 'aria-label' : build_lang.get('SEARCH')});
                    this.handleForms([$orgParent]);
                }
            }

            for( let $label of EJS.picks('label') ) {
                if( $label.acsbStrayLabelBound ) {
                    continue;
                }

                $label.acsbStrayLabelBound = true;

                if( $label.getAttribute('role')
                    || EJS.elements.text($label).length < 1
                    || $label.closest('form, [data-acsb]')
                    || EJS.pick('input, textarea, select', $label) ) {
                    continue;
                }

                if( parseInt(EJS.elements.style($label, 'font-size').replace('px', '')) >= 20 ) {
                    $label.setAttribute('role', 'heading');
                } else {
                    $label.setAttribute('role', 'presentation');
                }
            }
        },

        handleSuccessReload(){
            if( window.acsbSuccessReloadProcessed ) {
                return;
            }

            const submission = state.getStorage('acsbFormSubmission');

            if( submission && submission['acsbFormSubmission'] === 'success' ) {
                build_utilities.throwAlert(build_lang.get('FRONT_VALIDATIONS_SUCCESS'), true, true);
                EJS.utilities.delStorage('acsbFormSubmission');
            }

            window.acsbSuccessReloadProcessed = true;
        },

        submissions : {
            handleSubmission($form){
                if( $form.acsbProcessing ) {
                    return;
                }

                const data         = this.getSubmissionData($form);
                const $domChanges  = [];
                const $formChanges = [];

                $form.acsbProcessing = true;
                $form.removeAttribute('novalidate');

                EJS.events.on(window, config.events.domChanged, e => {
                    for( let $el of e.detail.$elements ) {
                        if( ! build_utilities.isVisible($el)
                            || EJS.elements.text($el).length < 1
                            || ['BUTTON', 'BODY'].includes($el.tagName)
                            || $el.matches('[data-acsb-sr-only="true"]')
                            || $el.closest('[data-acsb], [data-acsb-carousel="true"], button') ) {
                            continue;
                        }

                        if( $el.closest('form') ) {
                            $formChanges.push($el);
                        } else {
                            $domChanges.push($el);
                        }
                    }
                });

                setTimeout(() => {
                    let $focused = EJS.elements.focused();

                    if( $focused && build_utilities.isFormField($focused) && ! $focused.checkValidity() ) {
                        $form.acsbProcessing = false;
                    } else {
                        widget.processor.start();
                        build_utilities.throwAlert(build_lang.get('PROCESSING_DATA_PLEASE_WAIT'), true, true);

                        setTimeout(() => {
                            let $change;

                            for( let $el of $formChanges.concat($domChanges) ) {
                                if( ! document.body.contains($el) || ! build_utilities.isVisible($el) ) {
                                    continue;
                                }

                                let matched = false;
                                let html    = $el.outerHTML;

                                if( $el.closest('[role="alert"]') || EJS.pick('[role="alert"]', $el) ) {
                                    matched = true;
                                }

                                if( ! matched ) {
                                    for( let v of ['alert', 'success', 'fail', 'message', 'error'] ) {
                                        if( EJS.strings.inString(html, v) ) {
                                            matched = true;
                                            break;
                                        }
                                    }
                                }

                                if( matched ) {
                                    $change = $el;
                                    break;
                                }
                            }

                            if( ! $change ) {
                                for( let $formChange of $formChanges ) {
                                    if( ! document.body.contains($formChange) || ! build_utilities.isVisible($formChange) ) {
                                        continue;
                                    }
                                    $change = $formChange;
                                    break;
                                }
                            }

                            if( ! $change && $domChanges.length > 0 ) {
                                if( $form.getAttribute('data-acsb-form-type') === 'cart' ) {
                                    for( let $el of $domChanges ) {
                                        if( ! document.body.contains($el) || ! build_utilities.isVisible($el) ) {
                                            continue;
                                        }
                                        $change = $el;
                                        break;
                                    }
                                } else {
                                    for( let $el of $domChanges ) {
                                        if( EJS.elements.next($el, 'form')[0] === $form || EJS.elements.previous($el, 'form')[0] === $form ) {
                                            $change = $el;
                                        }
                                    }
                                }
                            }

                            $focused = EJS.elements.focused();

                            if( $change ) {
                                if( ! $focused || ! $focused.closest('form') || ! build_utilities.isFormField($focused) ) {
                                    EJS.elements.focus($change);
                                }
                            } else {
                                if( this.validateSubmission($form, data) ) {
                                    screenReader.playAudio('success');
                                    build_utilities.throwAlert(build_lang.get('FRONT_VALIDATIONS_SUCCESS'));
                                } else {
                                    screenReader.playAudio('error');
                                    build_utilities.throwAlert(build_lang.get('FRONT_VALIDATIONS_FAILED'));

                                    if( ! $focused || ! $focused.closest('form') || ! build_utilities.isFormField($focused) ) {
                                        const $firstInvalid = EJS.pick('[aria-invalid="true"]', $form);
                                        const $firstField   = EJS.pick('input, select, textarea', $form);

                                        if( $firstInvalid ) {
                                            $firstInvalid.focus();
                                        } else if( $firstField ) {
                                            $firstField.focus();
                                        }
                                    }
                                }
                            }

                            $form.acsbProcessing = false;
                            widget.processor.end();
                        }, 5000);
                    }
                }, 300);
            },

            handleSearchProcess($form){
                const $buttons = EJS.picks('button, [type="button"], [type="submit"], [type="image"], [data-acsb-possible-button="true"]', $form);
                const $field   = EJS.pick('input[data-acsb-textual-type="search"]', $form);

                let searching = false;
                let $changes  = [];

                EJS.events.on(window, config.events.domChanged, e => {
                    if( ! searching ) {
                        return;
                    }

                    $changes = $changes.concat(e.detail.$elements);
                });

                if( ! this.initSearchProcess ) {
                    let timer;

                    this.initSearchProcess = () => {
                        if( timer ) {
                            clearTimeout(timer);
                        }

                        searching = true;
                        timer     = setTimeout(() => searching = false, 1000);
                    };
                }

                EJS.events.on($field, 'keydown', () => this.initSearchProcess());
                EJS.events.on($buttons, 'click', () => {
                    this.initSearchProcess();

                    setTimeout(() => {
                        const $results = [];

                        for( let $change of $changes ) {
                            if( $change.tagName === 'BODY'
                                || $change.closest('[data-acsb], [data-acsb-carousel="true"]')
                                || ! build_utilities.isVisible($change) ) {
                                continue;
                            }

                            for( let $el of $change.tagName === 'A' ? [$change] : EJS.picks('a', $change) ) {
                                if( build_utilities.isVisible($el) && ! $results.includes($el) ) {
                                    $results.push($el);
                                }
                            }
                        }

                        if( $results.length > 0 ) {
                            let $wrapper;
                            let $parent = $results[0].parentElement;

                            while( ! $wrapper ) {
                                if( $parent.tagName === 'BODY' ) {
                                    break;
                                }

                                if( EJS.picks('a', $parent).length === $results.length ) {
                                    $wrapper = $parent;
                                    break;
                                } else {
                                    $parent = $parent.parentElement;
                                }
                            }

                            if( $wrapper ) {
                                $wrapper.setAttribute('aria-label', $results.length+' '+build_lang.get('SEARCH_RESULTS'));
                                EJS.elements.attrs($wrapper, {
                                    'role'       : 'navigation',
                                    'aria-label' : $results.length+' '+build_lang.get('SEARCH_RESULTS'),
                                });
                            }

                            EJS.elements.focus($results[0]);
                            build_utilities.throwAlert($results.length+' '+build_lang.get('SEARCH_RESULTS'), true, true, ! $wrapper);

                            EJS.events.on($results, 'keydown', e => {
                                if( [38, 40].includes(e.which) ) {
                                    EJS.events.prevent(e);
                                    adjustments.keyNav.navigation.bindArrowNav($results, 'up-down', e.which);
                                }
                            });
                        }
                    }, 500);
                });
            },

            handleStandardProcess($form){
                EJS.events.on(EJS.picks('button, [type="button"], [type="submit"], [type="image"], [data-acsb-possible-button="true"]', $form), 'acsbHit', (e, $target) => {
                    if( EJS.pick('[type="submit"]', $form) && $target.type !== 'submit' ) {
                        return;
                    }
                    this.handleSubmission($form);
                });

                EJS.events.on(window, 'beforeunload', () => {
                    if( ! $form.acsbProcessing ) {
                        return;
                    }
                    EJS.utilities.setStorage('acsbFormSubmission', JSON.stringify({acsbFormSubmission : 'success'}));
                    build_utilities.throwAlert(build_lang.get('FRONT_VALIDATIONS_SUCCESS'), true, true);
                });
            },

            getSubmissionData($form){
                const data = {
                    visibleCount  : EJS.picks('[data-acsb-field-visible="true"]', $form).length,
                    requiredCount : EJS.picks('[aria-required="true"]', $form).length,
                    validCount    : EJS.picks('[aria-invalid="false"]', $form).length,
                    invalidCount  : EJS.picks('[aria-invalid="true"]', $form).length,
                    beforeProcess : [],
                };

                for( let $field of EJS.picks('input, select, textarea', $form) ) {
                    data.beforeProcess.push({
                        name     : $field.getAttribute('name'),
                        uuid     : $field.getAttribute('data-acsb-validation-uuid'),
                        value    : $field.value.length < 1 ? null : $field.value,
                        badWords : screenReader.forms.field.getBadWordsCount($field, EJS.pick('label[for="'+$field.id+'"]', $form)),
                    });
                }

                return data;
            },

            validateSubmission($form, dataBefore){
                let $fields       = EJS.picks('input, select, textarea', $form);
                let dataAfter     = this.getSubmissionData($form);
                let valid         = ! EJS.elements.inDom($form) || ! build_utilities.isVisible($form);
                let validReqCount = 0;
                let validCount    = 0;
                let resetsCount   = 0;
                let emptyCount    = 0;

                if( ! valid && (dataBefore.visibleCount < dataAfter.visibleCount || dataAfter.visibleCount === 0) ) {
                    valid = true;
                }

                if( ! valid ) {
                    for( let $field of $fields ) {
                        if( ['button', 'submit'].includes($field.type)
                            || $field.getAttribute('data-acsb-field-visible') !== 'true' ) {
                            continue;
                        }

                        let hasErrors = ! $field.checkValidity();

                        for( let k in dataBefore.beforeProcess ) {
                            const obj = dataBefore.beforeProcess[k];

                            if( $field.getAttribute('data-acsb-validation-uuid') !== obj.uuid ) {
                                return;
                            }

                            $field.acsbOldValue = obj.value;

                            for( let wordBefore in obj.badWords ) {
                                const countBefore = obj.badWords[wordBefore];

                                for( let wordAfter in dataAfter.badWords ) {
                                    const countAfter = dataAfter[wordAfter];

                                    if( wordBefore === wordAfter && countAfter > countBefore ) {
                                        hasErrors = true;
                                        break;
                                    }
                                }
                            }
                        }

                        if( hasErrors ) {
                            if( ! ['checkbox', 'radio'].includes($field.type) ) {
                                $field.setAttribute('aria-invalid', 'true');
                            }
                        } else {
                            validCount = validCount+1;

                            if( ! ['checkbox', 'radio'].includes($field.type) ) {
                                $field.setAttribute('aria-invalid', 'false');
                            }

                            if( $field.getAttribute('aria-required') === 'true' ) {
                                validReqCount = validReqCount+1;
                            }
                        }

                        if( $field.value.length < 1 ) {
                            if( $field.acsbOldValue ) {
                                resetsCount = resetsCount+1;
                            }

                            emptyCount = emptyCount+1;
                        }
                    }

                    if( validReqCount >= dataBefore.requiredCount
                        || resetsCount === dataBefore.requiredCount
                        || (dataBefore.visibleCount === emptyCount && resetsCount > 0) ) {
                        if( ! EJS.pick('[aria-invalid="true"]', $form) ) {
                            valid = true;
                        }
                    }
                }

                return valid;
            }
        },

        field : {

            process($field){
                if( $field.acsbFormFieldBound || $field.closest('[data-acsb]') ) {
                    return;
                }

                $field.acsbFormFieldBound = true;

                if( ['button', 'submit', 'image', 'hidden'].includes($field.type) ) {
                    const title     = $field.getAttribute('title');
                    const ariaLabel = $field.getAttribute('aria-label');

                    if( title && ! ariaLabel ) {
                        $field.setAttribute('aria-label', title);
                        $field.removeAttribute('title');
                    }

                    return;
                }

                const uuid    = $field.id ? $field.id : EJS.strings.random();
                const visible = build_utilities.isVisible($field);
                const $form   = $field.closest('form');
                const $label  = this.getLabel($field, visible);
                const tType   = visible ? this.textualType.getType($field, $label) : null;
                const attrs   = {
                    'type'                      : $field.type,
                    'data-acsb-textual-type'    : tType,
                    'data-acsb-validation-uuid' : uuid,
                    'data-acsb-field-visible'   : visible ? 'true' : 'false',
                };

                if( $label && $label.tagName === 'LABEL' && $label !== EJS.pick('label[for="'+$field.id+'"]') ) {
                    $field.setAttribute('id', uuid);
                    $label.setAttribute('for', uuid);
                }

                if( ['checkbox', 'radio'].includes($field.type) ) {
                    $field.removeAttribute('aria-invalid');
                } else {
                    if( tType === 'email' ) {
                        attrs['type'] = 'email';
                    }
                    if( tType === 'phone' || tType === 'zip' ) {
                        attrs['pattern'] = '^\\+?\\d{5,13}';
                        attrs['title']   = build_lang.get('VALIDATION_TELEPHONE');
                    }
                }

                EJS.elements.attrs($field, attrs);

                if( $form ) {
                    if( visible && this.isRequired($field, $label) ) {
                        this.makeRequired($field);
                    } else {
                        EJS.elements.attrs($field, {'aria-invalid' : 'false', 'aria-required' : 'false'});
                    }
                }

                EJS.events.on($field, 'focusout', () => {
                    if( ! $field.getAttribute('aria-invalid') ) {
                        return;
                    }

                    if( $field.checkValidity() ) {
                        $field.setAttribute('aria-invalid', 'false');
                    } else {
                        $field.setAttribute('aria-invalid', 'true');
                    }
                });

                this.createAriaLabel($field, $label, tType);
            },

            isRequired($field, $label){
                if( $field.getAttribute('aria-required') === 'false' ) {
                    return false;
                }

                if( $field.required
                    || $field.getAttribute('aria-required', 'true')
                    || $field.getAttribute('aria-invalid') === 'true'
                    || $field.getAttribute('data-acsb-textual-type') === 'search' ) {
                    return true;
                }

                let fullHtml   = '';
                let parentHtml = '';
                let fieldHtml  = EJS.elements.html($field);
                let labelHtml  = $label ? $label.outerHTML : '';

                if( $field.tagName === 'SELECT' ) {
                    const $options = EJS.picks('option', $field);

                    if( $options.length > 0 ) {
                        fieldHtml = fieldHtml+EJS.elements.text($options[0]);
                    }
                }

                if( $field.closest('form') ) {
                    let $current;
                    let $parent = $field.parentElement;

                    while( $parent ) {
                        if( EJS.picks('input, select, textarea', $parent).length > 1 || $parent.tagName === 'FORM' ) {
                            break;
                        }
                        $current = $parent;
                        $parent  = $parent.parentElement;
                    }

                    if( $current ) {
                        parentHtml = $current.outerHTML;
                    }
                }

                fullHtml = fieldHtml+labelHtml+parentHtml;

                if( EJS.strings.inString(fullHtml, '*')
                    || EJS.strings.inString(fullHtml, 'req')
                    || EJS.strings.inString(fullHtml, 'captcha') ) {
                    return true;
                }

                return false;
            },

            makeRequired($field){
                $field.setAttribute('aria-required', 'true');

                if( ! $field.closest('[data-acsb-form-type="cart"], [data-acsb-form-type="wrapper"]') ) {
                    $field.setAttribute('required', 'true');
                }

                if( ! $field.value && ! ['checkbox', 'radio'].includes($field.type) ) {
                    $field.setAttribute('aria-invalid', 'true');
                }
            },

            createAriaLabel($field, $label, tType){
                let result;
                let text;
                let tooltip;

                const $descriptor = EJS.pick('#'+$field.getAttribute('aria-labelledby'));

                let label = $label ? build_utilities.getShownText($label) : null;

                if( $descriptor ) {
                    label = build_utilities.getShownText($descriptor);
                }

                for( let $parent of EJS.elements.parents($field, 'form', false, true) ) {
                    if( EJS.picks('input, select, textarea', $parent).length > 1 ) {
                        break;
                    }

                    const parentText = build_utilities.getShownText($parent);

                    if( parentText.length < 30 ) {
                        text = parentText;
                    }
                }

                if( $field['ariaLabel'] ) {
                    result = $field['ariaLabel'];
                }

                if( ! result && ['quantity'].includes(tType) ) {
                    result = build_lang.get(tType);
                }

                if( ! result && $field.placeholder ) {
                    result = $field['placeholder'];
                }

                if( ! result && label ) {
                    result = label;
                }

                if( $field.title ) {
                    if( result ) {
                        if( ! EJS.strings.inString(result, $field.title) && ! EJS.strings.inString($field.title, result) ) {
                            result = result+' '+$field.title;
                        }
                    } else {
                        result = $field.title;
                    }
                }

                if( ! result && tType ) {
                    result = build_lang.get('FIELD_LABEL_'+tType.toUpperCase());
                }

                if( ! result && text ) {
                    result = text;
                }

                if( ! result
                    && $field.value !== 'on'
                    && ['checkbox', 'radio'].includes($field.type)
                    && ! EJS.strings.inString(result, $field.value) ) {
                    result = result+' | '+$field.value;
                }

                if( ! result && $field.name && ! ['checkbox', 'radio'].includes($field.type) ) {
                    result = EJS.strings.replace(EJS.strings.replace($field.name, '-', ' '), '_', ' ');
                }

                if( result ) {
                    if( label
                        && ! EJS.strings.inString(result, label)
                        && ! EJS.pick('[data-acsb-label-text="'+label+'"]') ) {
                        $field.setAttribute('data-acsb-label-text', label);
                        result = label+'. '+result;
                    }

                    $field.setAttribute('aria-label', result);

                    if( ! $field.placeholder || $field.placeholder.length < 1 ) {
                        $field.setAttribute('placeholder', result.replace('*', ''));
                    }
                }

                if( $field['ariaLabel'] && result ) {
                    tooltip = result;
                }

                if( $field.getAttribute('aria-required') === 'true' ) {
                    if( ! tooltip ) {
                        tooltip = build_lang.get('REQUIRED_FIELD');
                    } else {
                        tooltip = tooltip+' | '+build_lang.get('REQUIRED_FIELD');
                    }
                }

                if( tooltip ) {
                    $field.setAttribute('data-acsb-tooltip', tooltip);
                }
            },

            getLabel($field, processNearest){
                if( $field.id ) {
                    const $connectedLabel = EJS.pick('label[for="'+$field.id+'"]');
                    if( $connectedLabel ) {
                        return $connectedLabel;
                    }
                }

                const $parentLabel    = $field.closest('label');
                const parentLabelText = EJS.elements.text($parentLabel);

                if( $parentLabel && parentLabelText !== '*' && parentLabelText.length > 0 && EJS.picks('input, textarea, select', $parentLabel).length === 1 ) {
                    return $parentLabel;
                }

                const $prevLabel    = EJS.elements.previous($field, 'label')[0];
                const prevLabelText = EJS.elements.text($prevLabel);

                if( $prevLabel && prevLabelText !== '*' && prevLabelText.length > 0 ) {
                    return $prevLabel;
                }

                const $nextLabel    = EJS.elements.next($field, 'label')[0];
                const nextLabelText = EJS.elements.text($nextLabel);

                if( $nextLabel && nextLabelText !== '*' && nextLabelText.length > 0 && ['checkbox', 'radio'].includes($field.type) ) {
                    return $nextLabel;
                }

                const $prevSpan    = EJS.elements.previous($field, 'span:not([role="button"])')[0];
                const prevSpanText = EJS.elements.text($prevSpan);

                if( $prevSpan && prevSpanText !== '*' && prevSpanText.length > 0 ) {
                    return $prevSpan;
                }

                const $nextSpan    = EJS.elements.next($field, 'span:not([role="button"])')[0];
                const nextSpanText = EJS.elements.text($nextSpan);

                if( $nextSpan && nextSpanText !== '*' && nextSpanText.length > 0 && ['checkbox', 'radio'].includes($field.type) ) {
                    return $nextSpan;
                }

                if( processNearest ) {
                    let $nearestLabel;

                    for( let obj of build_utilities.getNearestElements($field, ['label']) ) {
                        const $connectedField = EJS.pick('#'+obj.$el.getAttribute('for'));

                        if( obj.distance > 100 || (! obj.isAbove && ! obj.isLevel) || ($connectedField && $connectedField !== $field) ) {
                            continue;
                        }

                        const nearestField = build_utilities.getNearestElements($field, ['input, select, textarea'])[0];

                        if( ! nearestField || nearestField.$el !== $field || EJS.picks('input, textarea, select').length > 1 ) {
                            continue;
                        }

                        $nearestLabel = obj.$el;
                        break;
                    }

                    return $nearestLabel;
                }

                return null;
            },

            getBadWordsCount($field, $label){
                const next     = $field.nextElementSibling;
                const prev     = $field.previousElementSibling;
                const badWords = {
                    'err'       : 0,
                    'red'       : 0,
                    'invalid'   : 0,
                    'notvalid'  : 0,
                    'not-valid' : 0,
                    'fail'      : 0,
                };

                for( let word in badWords ) {
                    badWords[word] = badWords[word]+EJS.strings.getOccures($field.outerHTML, word);

                    if( EJS.elements.isElement($label) ) {
                        badWords[word] = badWords[word]+EJS.strings.getOccures($label.outerHTML, word);
                    }

                    if( next && ! build_utilities.isFormField(next) && ! next.matches('label') ) {
                        badWords[word] = badWords[word]+EJS.strings.getOccures(next.outerHTML, word);
                    }

                    if( prev && ! build_utilities.isFormField(prev) && ! prev.matches('label') ) {
                        badWords[word] = badWords[word]+EJS.strings.getOccures(prev.outerHTML, word);
                    }

                    for( let $parent of EJS.elements.parents($field, null, false, 'form') ) {
                        if( $parent.tagName === 'FORM' || ! $parent.closest('form') ) {
                            continue;
                        }
                        badWords[word] = badWords[word]+EJS.strings.getOccures(EJS.elements.html($parent), word);
                    }
                }

                return badWords;
            },

            textualType : {
                getType($field, $label){
                    let type = $field.getAttribute('type');

                    if( type === 'email' ) {
                        return 'email';
                    }

                    if( type === 'search' || this.textsMatched($field, $label, ['search']) ) {
                        return 'search';
                    }

                    if( type === 'password' || this.textsMatched($field, $label, ['password']) ) {
                        return 'password';
                    }

                    if( this.textsMatched($field, $label, ['phone', 'mobile', 'tele']) ) {
                        return 'phone';
                    }

                    if( this.textsMatched($field, $label, ['message', 'comment', 'msg', 'note']) ) {
                        return 'message';
                    }

                    if( this.textsMatched($field, $label, ['captcha']) ) {
                        return 'captcha';
                    }

                    if( this.textsMatched($field, $label, ['subject', 'topic']) ) {
                        return 'subject';
                    }

                    if( this.textsMatched($field, $label, ['company']) ) {
                        return 'company';
                    }

                    if( this.textsMatched($field, $label, ['address', 'addr', 'street']) ) {
                        return 'address';
                    }

                    if( this.textsMatched($field, $label, ['city']) && ! this.textsMatched($field, $label, ['opacity']) ) {
                        return 'city';
                    }

                    if( this.textsMatched($field, $label, ['state', 'province']) ) {
                        return 'state';
                    }

                    if( this.textsMatched($field, $label, ['country']) ) {
                        return 'country';
                    }

                    if( this.textsMatched($field, $label, ['zip', 'postal']) ) {
                        return 'zip';
                    }

                    if( this.textsMatched($field, $label, ['website', 'link']) ) {
                        return 'link';
                    }

                    if( this.textsMatched($field, $label, ['quantity', 'qty', 'quantities',]) ) {
                        return 'quantity';
                    }

                    if( this.textsMatched($field, $label, ['promo', 'coupon', 'voucher',]) ) {
                        return 'coupon';
                    }

                    if( this.textsMatched($field, $label, ['fullname', 'full_name', 'full-name',]) ) {
                        // This method MUST be first out of the name check as lname exists in fullname
                        return 'fullname';
                    }

                    if( this.textsMatched($field, $label, ['fname', 'first_name', 'firstname', 'first-name',]) ) {
                        return 'firstname';
                    }

                    if( this.textsMatched($field, $label, ['lname', 'last_name', 'lastname', 'last-name',]) ) {
                        return 'lastname';
                    }

                    if( this.textsMatched($field, $label, ['slide', 'range']) ) {
                        return 'range';
                    }

                    if( this.isName($field, $label) ) {
                        return 'name';
                    }

                    if( this.isEmail($field, $label) ) {
                        return 'email';
                    }

                    return null;
                },

                textsMatched($field, $label, texts){
                    let matched     = false;
                    const fieldHtml = $field.outerHTML.replace('name="', '');
                    const labelHtml = $label ? $label.outerHTML : '';

                    for( let str of texts ) {
                        if( EJS.strings.inString(fieldHtml, str) ) {
                            matched = true;
                            break;
                        }

                        if( EJS.strings.inString(labelHtml, str) ) {
                            matched = true;
                            break;
                        }

                        for( let $parent of EJS.elements.parents($field, 'form', false, true) ) {
                            if( EJS.strings.inString(EJS.elements.html($field), str) ) {
                                matched = true;
                                break;
                            }
                        }

                        if( matched ) {
                            break;
                        }
                    }

                    return matched;
                },

                isEmail($field, $label){
                    if( $field.tagName !== 'INPUT' ) {
                        return false;
                    }

                    return $field.type === 'email' || this.textsMatched($field, $label, ['mail']);
                },

                isName($field, $label){
                    if( EJS.strings.inString($field.outerHTML.replace(' name="', ' '), 'name')
                        || (! EJS.none($label) && EJS.strings.inString($label.outerHTML, 'name')) ) {
                        return true;
                    }

                    let matched = false;

                    for( let $parent of EJS.elements.parents($field, 'form', false, true) ) {
                        const html = EJS.elements.html($parent).replace(' name="', ' ');

                        if( EJS.strings.inString(html, 'name') ) {
                            matched = true;
                            break;
                        }
                    }

                    return matched;
                }
            }
        }
    }
}

/* harmony default export */ const adjustments_screenReader = (screenReader);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/keyNav.js
;








const keyNav = {
    rebinds      : 0,
    $lastFocused : undefined,

    init(){
        if( this.rebinds > 0 ) {
            return;
        }

        this.navigation.fixWix();
        this.navigation.process();
        this.carousels.process();
        this.menus.process();
        this.hovers.process();
        this.overlays.init();
        this.behaviors.init();
        this.inlinePopups.init();
        this.letterNav.init();

        adjustments.stopAnimations.stopVideos();
        EJS.elements.attrs(document.body, {'class' : 'acsb-keynav'});
        this.rebinds = this.rebinds > 0 ? this.rebinds : 1;

        EJS.events.on(window, 'beforeunload', () => window.scrollTo(0, 0));
        EJS.events.on(document, 'focusin', e => this.$lastFocused = e.target);

        setTimeout(() => this.overlays.process(EJS.picks('*:not([data-acsb-hidden="true"])'), false, true), 0);
    },

    enable(){
        if( ! state.actions.accessMode || ! state.actions.accessMode.enabled ) {
            actions.enable('accessMode', false);
        } else {
            this.init();
        }
    },

    disable(){
        if( state.actions.accessMode && state.actions.accessMode.enabled ) {
            actions.disable('accessMode', false, false);
        } else {
            document.body.classList.remove('acsb-keynav');

            for( let $el of EJS.picks('[data-acsb-tooltip]') ) {
                if( ! $el.closest('[data-acsb]') ) {
                    widget.tooltips.unbind($el);
                }
            }
        }
    },

    rebind(){
        this.rebinds = this.rebinds+1;
        this.init();
    },

    menus : {
        process(){
            this.handleListMenus();
            this.handleCMSMenus();
            this.handleFakeMenus();

            EJS.events.on(document, 'focusin mousedown mouseup', e => {
                const $activeDropdowns = EJS.picks('[data-acsb-dropdown][data-acsb-hidden="false"]');
                const $focusedNav      = EJS.pick('[data-acsb-dd-focused="true"]');

                if( $focusedNav && ! e.target.closest('[data-acsb-dd-focused="true"]') ) {
                    $focusedNav.removeAttribute('data-acsb-dd-focused');
                }

                if( $activeDropdowns.length < 1 ) {
                    return;
                }

                for( let $el of $activeDropdowns ) {
                    const $rootLi = $el.closest('[data-acsb-menu-root="true"]');

                    if( $rootLi.contains(EJS.elements.focused()) || $rootLi.contains(e.target) ) {
                        continue;
                    }

                    this.dropdown.closeDropdown($el, $rootLi, EJS.pick('[data-acsb-menu-root-link="true"]', $rootLi));
                }
            });
            EJS.events.on(window, config.events.domChanged, e => {
                const $lazyDropdownRoots = [];

                for( let $el of e.detail.$elements ) {
                    const $root = $el.closest('[data-acsb-menu-root="true"]');
                    if( $root ) {
                        $lazyDropdownRoots.push($root);
                    }
                }

                if( $lazyDropdownRoots.length > 0 ) {
                    for( let $rootLi of $lazyDropdownRoots ) {
                        keyNav.navigation.process(EJS.picks('*', $rootLi));
                        this.dropdown.process($rootLi);
                    }
                }
            });
            EJS.events.on(window, config.events.elementShow+' '+config.events.domChanged, (e, $target) => {
                const $possibleMenus = [];

                if( e.type === 'acsbDomChanged' ) {
                    for( let $el of e.detail.$elements ) {
                        if( ! ['UL', 'OL'].includes($el.tagName) || $el.acsbMenuBound ) {
                            continue;
                        }
                        $possibleMenus.push($el);
                    }
                } else {
                    for( let $el of EJS.picks('ol, ul', $target) || [$target.closest('ul, ol')] ) {
                        if( $el.acsbMenuBound ) {
                            continue;
                        }
                        $possibleMenus.push($el);
                    }
                }

                if( $possibleMenus.length > 0 ) {
                    const $toProcess = [].concat($possibleMenus);

                    for( let $list of $possibleMenus ) {
                        for( let $el of EJS.picks('*', $list) ) {
                            $toProcess.push($el)
                        }
                    }

                    keyNav.navigation.process($toProcess);
                    this.handleListMenus();
                }
            });
        },

        getAll(){
            const data  = {};
            const menus = {};

            if( keyNav.rebinds === 0 ) {
                this.process();
            }

            let i = 0;
            for( let $el of EJS.picks('[role="navigation"]') ) {
                if( $el.closest('[data-acsb]') ) {
                    continue;
                }

                for( let $a of EJS.picks('a', $el) ) {
                    const text = build_utilities.getShownText($a);
                    const href = $a.getAttribute('href');
                    const obj  = {text : text, href : href, $el : $a};

                    if( ! href || href.length < 1 ) {
                        continue;
                    }

                    if( ! data[i] ) {
                        data[i] = {items : []};
                    }

                    if( text.length > 1 ) {
                        data[i].items.push(obj);
                    }
                }
            }

            for( let k in data ) {
                if( data[k].items.length > 0 ) {
                    menus[k] = data[k];
                }
            }

            return menus;
        },

        handleListMenus(){
            for( let $el of EJS.picks('ul, ol, [data-acsb-m-menu="ul"]') ) {
                if( $el.acsbMenuBound || ! build_utilities.isVisible($el) ) {
                    continue;
                }

                $el.acsbMenuBound = true;

                if( $el.closest('[data-acsb], [data-acsb-carousel="true"], [data-acsb-menu="ul"]') || ! this.isMenu($el) ) {
                    continue;
                }

                EJS.elements.attrs(EJS.elements.parents($el, 'nav, [role="navigation"]'), {'role' : 'presentation'});
                const $nav = $el.getAttribute('data-acsb-fake-menu') === 'true' || $el.parentElement.tagName === 'BODY' ? $el : $el.parentElement;

                $el.setAttribute('data-acsb-menu', 'ul');
                $nav.setAttribute('role', 'navigation');

                EJS.elements.attrs(EJS.picks('[role="menu"], [role="menubar"], [role="menuitem"]', $nav), ['role'], true);
                EJS.elements.attrs(EJS.picks('ul, ol', $el), {'data-acsb-menu' : 'ul'});

                for( let $li of EJS.picks('li, [data-acsb-m-menu="li"]', $el) ) {
                    if( EJS.elements.parents($li, 'li', true).length > 0 ) {
                        continue;
                    }

                    const $link = this.getMenuItem($li);

                    if( $link ) {
                        EJS.elements.attrs($li, ['role', 'aria-haspopup', 'aria-expanded'], true);

                        $li.setAttribute('data-acsb-menu', 'li');
                        $link.removeAttribute('data-acsb-m-menu');
                        $link.setAttribute('data-acsb-menu', 'a');

                        if( $link.tagName !== 'A' || adjustments.screenReader.clickables.isButton($link) ) {
                            $link.setAttribute('role', 'button');
                        }

                        if( ! $link.getAttribute('data-acsb-navigable') ) {
                            keyNav.navigation.process([$link]);
                        }

                        if( EJS.elements.parents($li, '[data-acsb-menu="li"], li').length < 1 ) {
                            $li.setAttribute('data-acsb-menu-root', 'true');
                            $link.setAttribute('data-acsb-menu-root-link', 'true');

                            EJS.events.on($link, 'keydown', e => {
                                if( e.which === 27 && ! $link.closest('[data-acsb-menu-focused="true"]') ) {
                                    $link.blur();
                                }
                            });

                            this.dropdown.process($li);
                        }
                    }

                    $li.removeAttribute('data-acsb-m-menu');
                }

                const $rootLinks = EJS.picks('[data-acsb-menu-root-link="true"][data-acsb-now-navigable="true"]', $el);

                if( $rootLinks.length >= 3 ) {
                    $rootLinks[0].setAttribute('data-acsb-tooltip', build_lang.get('MENUBAR_NAVIGATION_EXPLANATION'));
                }

                EJS.events.on($rootLinks, 'keydown', e => {
                    if( [37, 39].includes(e.which) ) {
                        EJS.events.prevent(e);
                        keyNav.navigation.bindArrowNav(EJS.picks('[data-acsb-menu-root-link="true"][data-acsb-now-navigable="true"]', e.target.closest('[data-acsb-menu="ul"]')), 'left-right', e.which);
                    }
                });

                $el.removeAttribute('data-acsb-m-menu');
            }
        },

        handleCMSMenus(){
            // Squarespace menus and dropdowns
            for( let $nav of EJS.picks('.Header-nav') ) {
                EJS.elements.attrs($nav, {
                    'role'               : 'navigation',
                    'data-acsb-sqs-menu' : 'true',
                    'data-acsb-menu'     : 'ul',
                });

                for( let $ddWrap of EJS.picks('.Header-nav-item--folder', $nav) ) {
                    const $ddLink   = EJS.pick('.Header-nav-folder-title', $ddWrap);
                    const $dropdown = EJS.pick('.Header-nav-folder', $ddWrap);

                    EJS.elements.attrs($ddLink, {'aria-haspopup' : 'true', 'aria-expanded' : 'false'});
                    EJS.elements.attrs($dropdown, {'class' : 'acsb-dropdown', 'aria-hidden' : 'true'});

                    EJS.events.on($ddWrap, 'focusin click', e => {
                        if( e.type === 'focusin' && (e.target === $ddWrap || e.target === $ddLink) ) {
                            $ddLink.setAttribute('aria-expanded', 'true');
                            $ddWrap.classList.add('acsb-active');
                        }

                        if( e.type === 'click' && ! $ddWrap.matches('.acsb-active') ) {
                            EJS.events.prevent(e);
                            $ddLink.setAttribute('aria-expanded', 'true');
                            $ddWrap.classList.add('acsb-active');
                        }
                    });
                }

                EJS.events.on($nav, 'keydown keyup', e => {
                    if( e.which === 27 ) {
                        EJS.events.prevent(e);
                    }
                    if( e.type === 'keydown' ) {
                        if( e.which === 27 ) {
                            const $ddWrapper = e.target.closest('.acsb-active');

                            if( $ddWrapper ) {
                                EJS.elements.focus(EJS.pick('[aria-haspopup="true"]', $ddWrapper)).setAttribute('aria-expanded', 'false');
                                $ddWrapper.classList.remove('acsb-active');
                            }
                        }

                        (() => {
                            if( e.which === 37 || e.which === 39 ) {
                                EJS.events.prevent(e);
                                keyNav.navigation.bindArrowNav(EJS.picks('.Header-nav-item[data-acsb-now-navigable="true"], .Header-nav-folder-title[data-acsb-now-navigable="true"]', $nav), 'left-right', e.which);
                            }
                        })();

                        (() => {
                            if( e.which === 40 && e.target.matches('.Header-nav-folder-title')
                                && EJS.picks('.acsb-active .acsb-dropdown [data-acsb-now-navigable="true"]', $nav).length < 1 ) {
                                EJS.events.prevent(e);
                                e.target.blur();
                                e.target.focus();
                            } else {
                                if( e.which === 40 || e.which === 38 ) {
                                    EJS.events.prevent(e);
                                    keyNav.navigation.bindArrowNav(EJS.picks('.acsb-active .acsb-dropdown [data-acsb-now-navigable="true"]', $nav), 'up-down', e.which);
                                }
                            }
                        })();
                    }
                });
            }

            EJS.events.on(document, 'focusin', e => {
                for( let $el of EJS.picks('[role="navigation"] .acsb-active') ) {
                    if( e.target.closest('.acsb-active') !== $el ) {
                        $el.classList.remove('acsb-active');
                    }
                }
            });

            // Shopify button dropdowns
            for( let $el of EJS.picks('[data-dropdown-rel]') ) {
                const $dropdown = EJS.pick('[data-dropdown="'+$el.getAttribute('data-dropdown-rel')+'"]');

                if( $dropdown ) {
                    EJS.elements.attrs($dropdown, {'class' : 'acsb-hidden'});
                    EJS.elements.attrs($el, {'aria-haspopup' : 'true', 'aria-expanded' : 'false'});
                }

                EJS.events.on($el, 'click', e => {
                    EJS.events.prevent(e);
                    $dropdown.classList.add('acsb-block');
                    $dropdown.classList.remove('acsb-hidden');
                });

                EJS.events.on($dropdown, 'click', () => {
                    $dropdown.classList.remove('acsb-block');
                    $dropdown.classList.add('acsb-hidden');
                });
            }

            // WiX menus and dropdowns
            for( let $el of EJS.picks('#SITE_HEADER nav') ) {
                $el.setAttribute('data-acsb-menu', 'ul');

                for( let $link of EJS.picks('[aria-haspopup="true"]', $el) ) {
                    $link.setAttribute('aria-expanded', 'false');

                    EJS.events.on($link, 'focusin', () => $link.setAttribute('aria-expanded', 'true'));
                    EJS.events.on($link, 'focusout', () => $link.setAttribute('aria-expanded', 'false'));
                }
            }
        },

        handleFakeMenus($els){
            if( ! $els ) {
                $els = EJS.picks('nav, div, header');
            }

            for( let $el of $els ) {
                if( $el.acsbFakeMenuBound || ! build_utilities.isVisible($el) ) {
                    continue;
                }

                $el.acsbFakeMenuBound = true;
                const $fakeMenu       = this.getFakeMenu($el);

                if( ! $fakeMenu ) {
                    if( $el.acsbPossibleFakeMenu ) {
                        EJS.events.on($el, config.events.elementShow, e => {
                            setTimeout(() => {
                                e.detail.$el.acsbFakeMenuBound = false;
                                this.handleFakeMenus([e.detail.$el]);
                            }, 0);
                        });
                    }
                    continue;
                }

                const $navLinks = EJS.picks('[data-acsb-clickable="true"][data-acsb-now-navigable="true"]', $el);

                EJS.elements.attrs($fakeMenu, {'data-acsb-fake-menu' : 'true', 'data-acsb-m-menu' : 'ul'});
                EJS.elements.attrs($navLinks, {'data-acsb-m-menu' : 'a'});

                for( let $link of $navLinks ) {
                    const $menu  = $link.closest('[data-acsb-fake-menu="true"]');
                    const $hover = $link.closest('[data-acsb-hover="true"]');

                    if( $menu ) {
                        $menu.acsbMenuBound = false;
                    }

                    if( $hover && $menu && $menu.contains($hover) ) {
                        $hover.setAttribute('data-acsb-m-menu', 'li');
                    } else {
                        let $parent = $link.parentElement;
                        let $candidate;

                        while( $parent ) {
                            if( EJS.picks('[data-acsb-m-menu="a"]', $parent).length > 1 ) {
                                $parent = null;
                                break;
                            }
                            $candidate = $parent;
                            $parent    = $parent.parentElement;
                        }

                        if( $candidate ) {
                            $candidate.setAttribute('data-acsb-m-menu', 'li');
                        }
                    }
                }
            }

            for( let $nav of EJS.picks('nav') ) {
                if( $nav.acsbFakeMenuBoundNav ) {
                    continue;
                }

                $nav.acsbFakeMenuBoundNav = true;

                if( build_utilities.getShownText($nav).length < 1
                    || EJS.pick('[role="navigation"], [data-acsb-fake-menu="true"]', $nav)
                    || $nav.closest('[role="navigation"],[data-acsb-hidden="true"],  [data-acsb-carousel="true"], [data-acsb-fake-menu="true"]') ) {
                    continue;
                }

                const $links = EJS.picks('a[data-acsb-now-navigable="true"]', $nav);

                if( $links.length < 3 ) {
                    continue;
                }

                $nav.setAttribute('role', 'navigation');
                EJS.elements.attrs($links[0], {'data-acsb-tooltip' : build_lang.get('MENUBAR_NAVIGATION_EXPLANATION')});

                EJS.events.on($nav, 'keydown', e => {
                    if( [37, 39].includes(e.which) ) {
                        EJS.events.prevent(e);
                        keyNav.navigation.bindArrowNav(EJS.picks('[data-acsb-now-navigable="true"]', $nav), 'left-right', e.which);
                    }
                });
            }

            this.handleListMenus();
        },

        getMenuItem($li){
            let $directSpan;
            let $directButton;
            let $directLink;
            let $link = EJS.pick('a, [data-acsb-m-menu="a"]', $li);

            for( let $el of $li.children ) {
                switch( $el.tagName ) {
                    case 'A':
                        $directLink = $el;
                        break;
                    case 'BUTTON':
                        $directButton = $el;
                        break;
                    case 'SPAN':
                        $directSpan = $el;
                        break;
                }
            }

            if( $directLink ) {
                $link = $directLink;
            }

            if( $directButton ) {
                $link = $directButton;
            }

            if( ! $directLink && $directSpan && EJS.elements.text($directSpan).length > 0 ) {
                $link = $directSpan;

                if( $directSpan.children.length === 1
                    && $directSpan.children[0].tagName === 'A'
                    && EJS.elements.text($directSpan.children[0]).length > 0 ) {
                    $link = $directSpan.children[0];
                }
            }

            if( ! build_utilities.isVisible($link) && build_utilities.isVisible($li) ) {
                const text = build_utilities.getShownText($li);

                for( let $el of EJS.picks('*', $li) ) {
                    if( build_utilities.isVisible($el) && EJS.strings.inString(text, EJS.elements.text($el)) ) {
                        $link = $el;
                        break;
                    }
                }
            }

            return $link;
        },

        getFakeMenu($el){
            if( $el.offsetHeight > 100
                || build_utilities.getShownText($el).length < 1
                || ! ['NAV', 'HEADER', 'DIV'].includes($el.tagName)
                || ($el.closest('[role="navigation"]') && $el.tagName !== 'NAV')
                || $el.closest('[data-acsb], [data-acsb-menu="ul"], [data-acsb-carousel="true"], [data-acsb-hover], [data-acsb-menu="ul"]')
                || EJS.pick('header, [role="navigation"], [data-acsb-carousel="true"], [data-acsb-menu="ul"]', $el) ) {
                return null;
            }

            if( $el.tagName === 'DIV' ) {
                let html  = $el.outerHTML;
                let words = ['data-acsb-now-navigable', 'data-acsb-navigable', 'data-acsb-force-unnavigable', 'data-acsb-menu', 'navigate'];

                for( let v of words ) {
                    html = EJS.strings.replace(html, v, '');
                }

                if( ! EJS.strings.inString(html, 'menu')
                    && ! EJS.strings.inString(html, 'nav')
                    && ! EJS.strings.inString(html, 'header') ) {
                    return null;
                }
            }

            if( $el.closest('[data-acsb-hidden="true"]') ) {
                $el.acsbPossibleFakeMenu = true;
                return null;
            }

            const $navLinks = EJS.picks('[data-acsb-clickable="true"][data-acsb-now-navigable="true"]', $el);
            const hrefs     = [];

            let badEls   = false;
            let longText = false;
            let uniques  = true;

            if( $navLinks.length < 3 ) {
                return null;
            }

            for( let $link of $navLinks ) {
                if( hrefs.includes($link.href) ) {
                    uniques = false;
                    break;
                }

                if( EJS.elements.text($link).length > 30 ) {
                    longText = true;
                    break;
                }

                if( $link.href && $link.href.length > 0 ) {
                    hrefs.push($link.href);
                }
            }

            if( ! uniques ) {
                return null;
            }

            for( let $innerEl of EJS.picks('img, iframe, form, h1, h2, h3', $el) ) {
                if( build_utilities.isVisible($innerEl) ) {
                    badEls = true;
                    break;
                }
            }

            if( badEls ) {
                return null;
            }

            let $fakeMenu = $navLinks[0].parentElement;

            if( ! ['NAV', 'HEADER'].includes($el.tagName) ) {
                while( $fakeMenu ) {
                    if( EJS.picks('[data-acsb-clickable="true"][data-acsb-now-navigable="true"]', $fakeMenu).length > 1 ) {
                        break;
                    }
                    $fakeMenu = $fakeMenu.parentElement;
                }

                if( ['OL', 'UL'].includes($fakeMenu.tagName) ) {
                    $fakeMenu = $fakeMenu.parentElement;
                }
            }

            return build_utilities.getShownText($fakeMenu).length > 0 ? $fakeMenu : null;
        },

        isMenu($el){
            if( $el.getAttribute('data-acsb-fake-menu') === 'true' ) {
                return true;
            }

            if( build_utilities.getShownText($el).length < 1 ) {
                return false;
            }

            let $items = EJS.picks('[data-acsb-clickable="true"][data-acsb-now-navigable="true"]', $el);

            if( $items.length > 2
                && $el.closest('nav, header, .menu, .nav, .header, [role="navigation"], [role="menu"], [role="menubar"], [data-acsb-m-menu="true"]') ) {
                return true;
            }

            let classes = $el.getAttribute('class');

            if( $items.length > 2
                && (EJS.strings.inString(classes, 'menu') || EJS.strings.inString(classes, 'nav')) ) {
                return true;
            }

            let $lis = EJS.picks('li:not([data-acsb-hidden="true"])', $el);

            if( $el.tagName === 'UL'
                && $lis.length > 2
                && (EJS.strings.inString(EJS.elements.html($el.parentElement), 'menu')
                    || EJS.strings.inString(EJS.elements.html($el.parentElement), 'nav')) ) {
                return true;
            }

            if( $items.length > 2 && $items.length === $lis.length ) {
                let noText = false;
                let badLis = false;

                for( let $link of $items ) {
                    if( EJS.elements.text($link).length < 1 ) {
                        noText = true;
                        break;
                    }
                }

                if( ! noText ) {
                    for( let $li of $lis ) {
                        if( EJS.elements.nodesText($li).length > 0 ) {
                            badLis = true;
                            break;
                        }

                        for( let $innerEl of EJS.picks('p, img, h1, h2, h3, h4, h5, h6', $li) ) {
                            if( $innerEl.closest('[data-acsb-hidden="true"]')
                                || ($innerEl.tagName === 'IMG' && $innerEl.offsetWidth >= 75 && $innerEl.offsetHeight >= 75) ) {
                                continue;
                            }
                            badLis = true;
                            break;
                        }
                    }
                }

                if( ! noText && ! badLis ) {
                    return true;
                }
            }

            return false;
        },

        dropdown : {
            opening : false,
            closing : false,

            process($rootLi){
                if( $rootLi.getAttribute('data-acsb-menu-root') !== 'true'
                    || EJS.pick('[data-acsb-dropdown]', $rootLi) ) {
                    return;
                }

                const $rootLink = EJS.pick('[data-acsb-menu-root-link="true"]', $rootLi);
                const $dropdown = this.getDropdown($rootLi);

                if( ! $dropdown ) {
                    return;
                }

                this.bindBehaviors($dropdown, $rootLi, $rootLink);
                $rootLi.setAttribute('data-acsb-dropdown-container', 'true');
                $rootLi.acsbOriginalClass = $rootLink.getAttribute('class');

                EJS.elements.attrs($rootLink, {'aria-haspopup' : 'true', 'aria-expanded' : 'false'});
                EJS.elements.attrs($dropdown, {'class' : 'acsb-hidden', 'data-acsb-dropdown' : EJS.strings.random()});

                if( ! ['UL', 'OL'].includes($dropdown.tagName) ) {
                    EJS.elements.attrs($dropdown, {'role' : 'region', 'aria-label' : build_lang.get('SUBMENU')});
                }

                const $subMenus = EJS.picks('[data-acsb-menu="ul"]', $rootLi);

                if( $subMenus.length > 1 ) {
                    $rootLi.setAttribute('data-acsb-flatten-menu', 'true');

                    for( let $submenu of $subMenus ) {
                        for( let $parent of EJS.elements.parents($submenu, '[data-acsb-dropdown]', false, true) ) {
                            if( $parent !== $dropdown ) {
                                $parent.classList.add('acsb-flat-submenu-wrap');
                            }
                        }
                    }
                }

                EJS.events.on($rootLi, 'mouseenter mouseleave', e => {
                    if( e.type === 'mouseenter' ) {
                        $dropdown.classList.remove('acsb-hidden');
                    } else {
                        $dropdown.classList.add('acsb-hidden');
                    }
                });
                EJS.events.on($rootLink, 'focus', () => {
                    if( $dropdown.matches('.acsb-hidden') && ! this.closing ) {
                        this.openDropdown($dropdown, $rootLi, $rootLink);
                    }
                });

                if( EJS.elements.focused() === $rootLink && $dropdown.matches('[data-acsb-hidden="true"]') ) {
                    this.openDropdown($dropdown, $rootLi, $rootLink);
                }
            },

            getDropdown($rootLi){
                let $dropdown;

                for( let $el of EJS.picks('[data-acsb-hidden="true"]', $rootLi) ) {
                    if( $el.closest('[data-acsb-dropdown]')
                        || ! ['DIV', 'SECTION', 'NAV', 'UL'].includes($el.tagName)
                        || ! EJS.pick('a, form, input, [role="button"], iframe', $el) ) {
                        continue;
                    }

                    $dropdown = $el;
                    break;
                }

                return $dropdown;
            },

            bindBehaviors($dropdown, $rootLi, $rootLink){
                if( $rootLink.tagName === 'A' && $rootLink.getAttribute('role') !== 'button' ) {
                    let hasExistingLink = false;
                    let $firstContentLink;

                    for( let $a of EJS.picks('a', $dropdown) ) {
                        if( ! $firstContentLink && EJS.elements.text($a).length > 0 ) {
                            $firstContentLink = $a;
                        }

                        if( $a.href === $rootLink.href ) {
                            hasExistingLink = true;
                            break;
                        }
                    }

                    if( ! hasExistingLink ) {
                        if( $firstContentLink ) {
                            const $clone       = EJS.elements.clone($firstContentLink);
                            $clone.textContent = EJS.elements.text($rootLink);
                            $clone.href        = $rootLink.href;
                            EJS.elements.insert($clone, $firstContentLink);
                        } else {
                            EJS.elements.append(EJS.elements.create('a', {'href' : $rootLink.href}, EJS.elements.text($rootLink)), $dropdown, true);
                        }
                    }
                }

                EJS.events.on($rootLi, 'keydown click', e => {
                    if( this.opening ) {
                        EJS.events.prevent(e);
                        return;
                    }

                    keyNav.navigation.process(EJS.picks('*', $rootLi));

                    if( e.which === 27 && ! $dropdown.matches('.acsb-hidden') ) {
                        EJS.events.prevent(e);

                        $rootLink.blur();
                        this.closing = true;
                        this.closeDropdown($dropdown, $rootLi, $rootLink);

                        setTimeout(() => {
                            EJS.elements.focus($rootLink);
                            this.closing = false;
                        }, 50);
                    }

                    if( e.which === 38 || e.which === 40 ) {
                        EJS.events.prevent(e);
                        if( $dropdown.matches('.acsb-hidden') ) {
                            this.openDropdown($dropdown, $rootLi, $rootLink);
                        } else {
                            keyNav.navigation.bindArrowNav(EJS.picks('[data-acsb-now-navigable="true"]', $dropdown), 'up-down', e.which);
                        }
                    }

                    if( (e.which === 13 || e.type === 'click') && ! e.target.closest('[data-acsb-dropdown]') ) {
                        EJS.events.prevent(e);
                        if( $dropdown.matches('.acsb-hidden') ) {
                            this.openDropdown($dropdown, $rootLi, $rootLink);
                        } else {
                            this.closeDropdown($dropdown, $rootLi, $rootLink);
                        }
                    }
                });
                EJS.events.on($rootLi, 'focusin', () => {
                    let MsSinceFocus = 0;
                    let focusTimer   = setInterval(() => MsSinceFocus = MsSinceFocus+50, 50);

                    setTimeout(() => clearInterval(focusTimer), 1000);

                    EJS.events.on($rootLi, 'click', e => {
                        if( MsSinceFocus === 0 ) {
                            EJS.events.prevent(e);
                        }
                    });
                });
            },

            closeDropdown($dropdown, $rootLi, $rootLink){
                if( $dropdown.getAttribute('data-acsb-show-dd') === 'true' ) {
                    EJS.elements.css($dropdown, {top : ''});
                }

                $dropdown.classList.add('acsb-hidden');
                $rootLi.removeAttribute('data-acsb-menu-focused');
                $rootLink.setAttribute('aria-expanded', 'false');
                keyNav.navigation.process(EJS.picks('*', $rootLi));
            },

            openDropdown($dropdown, $rootLi, $rootLink){
                this.opening = true;
                $dropdown.classList.remove('acsb-hidden');
                $rootLi.setAttribute('data-acsb-menu-focused', 'true');

                const $nav = $rootLi.closest('[role="navigation"]');

                if( $nav ) {
                    $nav.setAttribute('data-acsb-dd-focused', 'true');
                }

                setTimeout(() => {
                    const $focused = EJS.elements.focused();

                    if( ($focused === $rootLink || $rootLi.contains($focused)) && ! build_utilities.isVisible($dropdown) ) {
                        $rootLi.setAttribute('data-acsb-show-dd', 'true');
                    } else if( $rootLi.acsbOriginalClass !== $rootLi.getAttribute('class') ) {
                        $rootLi.setAttribute('data-acsb-show-dd', 'true');
                    }

                    $rootLink.setAttribute('aria-expanded', 'true');
                    EJS.elements.attrs($dropdown, {'aria-hidden' : 'false', 'data-acsb-hidden' : 'false'});

                    this.bindFallbackOpen($dropdown, $rootLink, $rootLi);
                    keyNav.navigation.process(EJS.picks('*', $rootLi));
                }, 0);
                setTimeout(() => this.opening = false, 150);
            },

            bindFallbackOpen($dropdown, $rootLink, $rootLi){
                $dropdown.setAttribute('data-acsb-show-dd', 'true');

                let hasBgColor    = false;
                const text        = EJS.elements.text($dropdown);
                const $navigation = $rootLi.closest('[role="navigation"]');

                if( $navigation && EJS.elements.style($navigation, 'position') === 'static' ) {
                    EJS.elements.css($navigation, {'position' : 'relative'});
                }

                for( let $el of EJS.picks('div, section, ul, ol, nav, span', $dropdown) ) {
                    if( text === EJS.elements.text($el) && ! build_utilities.isVisible($el) ) {
                        $el.classList.add('data-acsb-show-inner-dd');
                    }
                }

                for( let $el of EJS.picks('[data-acsb-menu-focused="true"] [data-acsb-dropdown]') ) {
                    if( ['rgba(0, 0, 0, 0)', 'rgb(0, 0, 0, 0)'].includes(EJS.elements.style($el, 'background-color')) ) {
                        for( let $link of EJS.picks('a', $el) ) {
                            const bgColor       = EJS.elements.style($link, 'background-color')
                            const parentBgColor = EJS.elements.style($link.parentElement, 'background-color')

                            if( (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'rgb(255, 255, 255)')
                                || (parentBgColor !== 'rgba(0, 0, 0, 0)' && parentBgColor !== 'rgb(255, 255, 255)') ) {
                                hasBgColor = true;
                            }
                        }
                    } else {
                        hasBgColor = true;
                    }
                }

                if( ! hasBgColor ) {
                    build_utilities.addDynamicCss('body.acsb-keynav [data-acsb-menu-focused="true"] [data-acsb-dropdown="'+$dropdown.getAttribute('data-acsb-dropdown')+'"] { background-color: #ffffff !important; }', 'dropdowns');
                    build_utilities.addDynamicCss('body.acsb-keynav [data-acsb-menu-focused="true"] [data-acsb-dropdown="'+$dropdown.getAttribute('data-acsb-dropdown')+'"] li a { color: #000000 !important; }', 'dropdowns');
                    build_utilities.addDynamicCss('body.acsb-keynav [data-acsb-menu-focused="true"] [data-acsb-dropdown="'+$dropdown.getAttribute('data-acsb-dropdown')+'"] a { color: #000000 !important; }', 'dropdowns');
                }

                (() => {
                    if( EJS.elements.offsets($dropdown, true).top > 0 ) {
                        return;
                    }

                    let offsetTop;

                    if( $rootLink ) {
                        offsetTop = $rootLink.offsetHeight <= 100 ? $rootLink.offsetHeight : 100;
                    } else {
                        offsetTop = $rootLi.offsetHeight <= 100 ? $rootLi.offsetHeight : 100;
                    }

                    EJS.elements.css($dropdown, {'top' : offsetTop+'px'}, true);

                    if( EJS.elements.style($dropdown, 'position') !== 'absolute' ) {
                        EJS.elements.css($dropdown, {'position' : 'relative'}, true);
                    }

                    if( EJS.elements.offsets($dropdown, true).top <= 0 ) {
                        for( let $el of EJS.picks('[data-acsb-show-inner-dd]', $rootLi) ) {
                            EJS.elements.css($el, {'top' : offsetTop+'px'}, true);

                            if( EJS.elements.style($dropdown, 'position') !== 'absolute' ) {
                                EJS.elements.css($el, {'position' : 'relative'}, true);
                            }

                            if( EJS.elements.offsets($dropdown, true).top >= 0 ) {
                                break;
                            }
                        }
                    }
                })();

                if( $dropdown.scrollHeight > EJS.utilities.getWinSize().height-(EJS.elements.offsets($dropdown, true).top-50) ) {
                    let selector    = 'body.acsb-keynav [data-acsb-menu-focused="true"] [data-acsb-dropdown="'+$dropdown.getAttribute('data-acsb-dropdown')+'"] [data-acsb-scrollable="true"]';
                    let $scrollable = EJS.picks('.data-acsb-show-inner-dd').pop();

                    if( ! $scrollable ) {
                        $scrollable = $dropdown;
                        selector    = 'body.acsb-keynav [data-acsb-menu-focused="true"] [data-acsb-scrollable="true"][data-acsb-dropdown="'+$dropdown.getAttribute('data-acsb-dropdown')+'"]';
                    }

                    build_utilities.addDynamicCss(selector+' { max-height: '+(EJS.utilities.getWinSize().height-EJS.elements.offsets($dropdown, true).top-50)+'px !important; }', 'dropdowns');
                    $scrollable.setAttribute('data-acsb-scrollable', 'true');
                }

                if( $dropdown.scrollWidth > $dropdown.offsetWidth ) {
                    EJS.elements.css($dropdown, {'min-width' : $dropdown.scrollWidth+50+'px'}, true);
                }
            }
        }
    },

    carousels : {
        process(){
            for( let $el of EJS.picks(this.getSelectors().join(',')) ) {
                if( $el.acsbCarouselBound ) {
                    continue;
                }

                $el.acsbCarouselBound = true;

                if( ! ['DIV', 'SECTION', 'UL', 'OL'].includes($el.tagName)
                    || EJS.pick('[data-acsb-carousel="true"]', $el)
                    || $el.closest('[data-acsb-carousel="true"]')
                    || (EJS.elements.text($el).length < 1 && ! EJS.pick('img, a, [data-acsb-clickable="true"]', $el)) ) {
                    continue;
                }

                $el.removeAttribute('aria-live');

                if( ['listbox', 'tablist', 'toolbar'].includes($el.getAttribute('role')) ) {
                    $el.removeAttribute('role');
                }

                EJS.elements.attrs(EJS.picks('[role="listbox"], [role="toolbar"], [role="option"], [role="region"], [aria-live]', $el), ['role', 'aria-live'], true);
                EJS.elements.attrs($el, {
                    'role'                    : 'region',
                    'data-acsb-carousel'      : 'true',
                    'data-acsb-force-visible' : 'true',
                    'aria-label'              : build_lang.get('CAROUSEL'),
                });
            }

            if( typeof jQuery !== 'function' ) {
                return;
            }

            for( let $el of EJS.picks('.owl-carousel') ) {
                const $owl = jQuery($el);

                if( typeof $owl.on === 'function' ) {
                    $owl.on('changed.owl.carousel', () => {
                        setTimeout(() => $owl.trigger('stop.owl.autoplay').trigger('owl.stop'), 100);
                    });

                    $owl.on('click mouseout focus focusout mouseleave', () => {
                        setTimeout(() => $owl.find('.owl-item.active').trigger('mouseover'), 100);
                    });
                }

                for( let $innerEl of EJS.picks('.owl-dots, .owl-nav') ) {
                    $innerEl.setAttribute('data-acsb-force-unnavigable', 'true');
                    EJS.elements.css($innerEl, {'cursor' : 'default'}, true);
                    EJS.elements.attrs($innerEl, [
                        'role',
                        'tabindex',
                        'aria-label',
                        'data-acsb-clickable',
                        'data-acsb-navigable',
                        'data-acsb-now-navigable',
                    ], true);
                }

                $owl.trigger('mouseover').trigger('stop.owl.autoplay').trigger('owl.stop').find('.owl-dots').each(e => {
                    jQuery(e.target).attr({'tabindex' : '-1', 'data-acsb-force-unnavigable' : 'true'})
                        .find('.owl-dot').each(e => {
                        const $dot = jQuery(e.target);

                        if( build_utilities.isVisible($dot[0]) ) {
                            $dot.attr({
                                'tabindex' : '0', 'data-acsb-clickable' : 'true', 'data-acsb-force-navigable' : 'true'
                            });
                        }
                    });
                });
            }

            for( let $el of EJS.picks('.slick-slider') ) {
                const $slick = jQuery($el);
                let stopSlick;

                if( typeof stopSlick !== 'function' ) {
                    stopSlick = $slick => {
                        try {
                            if( typeof $slick !== 'undefined' ) {
                                if( typeof $slick.slick === 'function' ) {
                                    $slick.slick('slickPause');
                                }

                                if( typeof $slick.slickPause === 'function' ) {
                                    $slick.slickPause();
                                }
                            }
                        } catch( e ) {
                        }
                    };
                }

                stopSlick($slick);

                if( typeof $slick.on === 'function' ) {
                    $slick.on('beforeChange', () => stopSlick($slick));
                }
            }

            for( let $el of EJS.picks('.nivoSlider') ) {
                const slider = jQuery($el).data('nivoslider');

                if( typeof slider.stop === 'function' ) {
                    slider.stop();
                }
            }

            for( let $el of EJS.picks('.flickity-enabled') ) {
                const $slider = $el;

                setInterval(() => {
                    if( typeof Flickity !== 'object' ) {
                        return;
                    }

                    const $flkty = Flickity.data($slider);

                    if( $flkty && typeof $flkty.pausePlayer === 'function' ) {
                        $flkty.pausePlayer();
                    }
                }, 300);
            }

            for( let $el of EJS.picks('.jcarousel, [data-jcarousel="true"]') ) {
                const $jcarousel = jQuery($el);

                try {
                    if( typeof $jcarousel.jcarouselAutoscroll === 'function' ) {
                        $jcarousel.jcarouselAutoscroll('stop');
                    }
                } catch( e ) {
                }
            }

            for( let $el of EJS.picks('.q_slider .carousel') ) {
                const $carousel = jQuery($el);

                try {
                    if( typeof $carousel.carousel === 'function' ) {
                        $carousel.removeClass('q_auto_start').carousel({interval : 6000, pause : true});
                    }
                } catch( e ) {
                }
            }

            for( let $el of EJS.picks('.ls-container') ) {
                const $layerSlider = jQuery($el);

                if( typeof $layerSlider.layerSlider === 'function' ) {
                    $layerSlider.layerSlider('stop');
                }
            }

            for( let $el of EJS.picks('.flex-active-slide') ) {
                const $slider = jQuery($el).closest('ul').parent();

                if( $slider && typeof $slider.flexslider === 'function' ) {
                    try {
                        $slider.flexslider('pause');
                    } catch( e ) {
                    }
                }
            }

            for( let $el of EJS.picks('.rslides') ) {
                const $rslider = jQuery($el);

                if( typeof $rslider.responsiveSlides === 'function' ) {
                    $rslider.responsiveSlides({speed : 999999999999, pause : true, nav : false, auto : false});
                }
            }

            for( let $el of EJS.picks('.cycle-slideshow') ) {
                const $slider = jQuery($el);

                if( typeof $slider.cycle === 'function' ) {
                    $slider.cycle('pause');
                }
            }

            for( let $el of EJS.picks('.uk-slideshow, .uk-slider, .uk-slider-container') ) {
                const $uiKitCarousel = jQuery($el);
                const id             = $uiKitCarousel.attr('id');

                if( ! id ) {
                    $uiKitCarousel.attr('id', EJS.strings.random());
                }

                $uiKitCarousel.trigger('mouseover');

                if( typeof $uiKitCarousel.on === 'function' ) {
                    $uiKitCarousel.on('click mouseout focus focusout mouseleave', () => {
                        $uiKitCarousel.trigger('mouseover');
                        window.stopUIkitCarousel(id);
                    });
                }

                if( ! window.stopUIkitCarousel ) {
                    window.stopUIkitCarousel = id => {
                        const $carousel = UIkit.slideshow('#'+id);

                        if( typeof UIkit !== 'undefined'
                            && UIkit.slideshow
                            && $carousel
                            && typeof $carousel.stop === 'function' ) {
                            $carousel.stop();
                        }
                    };
                }

                window.stopUIkitCarousel(id);
            }

            for( let $el of EJS.picks('.rev_slider_wrapper, .rev_slider') ) {
                const $revSlider = jQuery($el);
                const idString   = $revSlider.attr('id');
                const id         = idString ? idString.split('_')[2] : null;

                if( id ) {
                    try {
                        if( typeof $revSlider.revpause === 'function' ) {
                            $revSlider.revpause();
                        }

                        jQuery.globalEval('revapi'+id+'.bind("revolution.slide.onloaded",function(e){revapi'+id+'.revpause();});');
                    } catch( err ) {
                    }
                }
            }

            for( let $el of EJS.picks('[data-creator="Smart Slider 3"], .n2-ss-slider, .n2-ow') ) {
                if( typeof n2 !== 'undefined' ) {
                    n2(jQuery($el)).trigger('mediaStarted', 'lightbox');
                }
            }

            for( let $el of EJS.picks('[data-ride]') ) {
                const $bootstrapCarousel = jQuery($el);

                if( $bootstrapCarousel.carousel ) {
                    $bootstrapCarousel.carousel({pause : true, interval : false});
                    $bootstrapCarousel.carousel('pause');
                }
            }

            for( let $el of EJS.picks('.swiper-container') ) {
                if( $el.swiper ) {
                    if( typeof $el.swiper.pauseAutoplay === 'function' ) {
                        $el.swiper.pauseAutoplay();
                    }
                    if( $el.swiper.autoplay && typeof $el.swiper.autoplay.stop === 'function' ) {
                        $el.swiper.autoplay.stop();
                    }
                }
            }
        },

        getSelectors(){
            return [
                '[data-acsb-carousel="true"]',
                '[each="cards"]',
                '.owl-carousel',
                '.slick-slider',
                '.jcarousel',
                '.rslides',
                '.nivoSlider',
                '.fusion-carousel',
                '.flexslider',
                '.uk-slideshow',
                '.cycle-slideshow',
                '.et_pb_slider',
                '.q_slider',
                '.bxslider',
                '.flickity-enabled',
                '.bx-viewport',
                '.rev_slider_wrapper',
                '.rev_slider',
                '.ls-container',
                '[data-ride]',
                '.swiper-container',
                '.yotpo-reviews-carousel',
                '[data-creator="Smart Slider 3"]',
                '.bootslider',
                '.n2-ss-slider',
                '.n2-ow',
                /*the generic ones must be last so they aren't picked up first*/
                '.carousel',
                '.slider',
                '[class*="carousel" i]',
                '[class*="slider" i]',
                '[class*="slides" i]',
                '[class*="slideshow" i]',
                '[id*="carousel" i]',
                '[id*="slider" i]',
                '[id*="slides" i]',
                '[id*="slideshow" i]',
            ];
        }
    },

    behaviors : {
        init(){
            this.enableKeyboardClicking();
            this.enableElementRebinding();
            this.enableKeyboardFocus();
            this.enableClickFocusing();
            this.enableFormBehaviors();
            this.enableMouseFocus();

            EJS.events.on(document, 'keydown', (e, $target) => {
                if( e.which !== 27 || e.tagName === 'SELECT' || $target.closest('[data-acsb-menu="a"]') ) {
                    return;
                }

                if( e.type === 'keydown' ) {
                    if( this.$keydownBlur && this.$keydownBlur !== $target ) {
                        delete this.acsbKeydownBlur;
                        return;
                    }
                    this.$keydownBlur = $target;
                }

                e.target.blur();
            });
        },

        enableMouseFocus(){
            EJS.events.on(document, 'focusin', (e, $target) => {
                if( this.$focused && ! this.$focused.contains($target) ) {
                    EJS.events.trigger(this.$focused, 'mouseleave mouseout');
                }

                this.focusedOver = true;
                this.$focused    = $target;

                EJS.events.trigger($target, 'mouseenter mouseover');
            });
            EJS.events.on(document, 'mouseover focusout', (e, $target) => {
                if( EJS.elements.isElement($target) ) {
                    this.focusedOver = false;
                }
            });
        },

        enableKeyboardFocus(){
            EJS.events.on(document, 'focusin', e => {
                if( e.target.closest('[data-acsb]') ) {
                    return;
                }

                let $el = e.target.closest('[data-acsb-navigable="true"]');

                if( ! $el ) {
                    $el = e.target;
                }

                if( ($el.offsetWidth < 1 || $el.offsetHeight < 1) && $el.parentElement ) {
                    $el = $el.parentElement;
                }

                $el.setAttribute('data-acsb-focused', 'true');

                const $overflower = $el.getAttribute('data-acsb-overflower') !== 'true' ? $el.closest('[data-acsb-overflower="true"]') : null;

                if( $overflower
                    && ($overflower.clientWidth <= $el.offsetWidth || $overflower.clientHeight <= $el.offsetHeight) ) {
                    $el.setAttribute('data-acsb-inner-focus', 'true');
                }
            });
            EJS.events.on(document, 'focusout', e => {
                const $focused = e.target.closest('[data-acsb-focused="true"]');

                if( $focused ) {
                    $focused.removeAttribute('data-acsb-focused');
                }
            });
        },

        enableElementRebinding(){
            EJS.events.on(window, config.events.domChanged, e => {
                const bodyChanged = e.detail.$elements.includes(document.body) || e.detail.$elements.includes(EJS.pick('html'));
                const $changes    = [];

                if( bodyChanged ) {
                    for( let $el of EJS.picks('*') ) {
                        if( ! $el.closest('[data-acsb]') ) {
                            $changes.push($el);
                        }
                    }
                    $changes.unshift(document.body);
                } else {
                    for( let $el of e.detail.$elements ) {
                        for( let $innerEl of EJS.picks('*', $el) ) {
                            $changes.push($innerEl);
                        }

                        $changes.unshift($el);

                        const $hiddenParent = $el.closest('[data-acsb-hidden="true"]');

                        if( $hiddenParent ) {
                            $changes.unshift($hiddenParent);
                        }
                    }
                }

                setTimeout(() => {
                    if( $changes.length < 1 ) {
                        return;
                    }

                    keyNav.navigation.process($changes, true, e.detail.clickProcess);
                    keyNav.overlays.process($changes, e.detail.clickProcess, false);

                    EJS.events.trigger(window, config.events.keynavRebind, {
                        elements     : $changes,
                        bodyChanged  : bodyChanged,
                        clickProcess : e.detail.clickProcess,
                        liveElements : e.detail.liveElements,
                        styleChanged : e.detail.styleChanged,
                    });
                }, e.detail.styleChanged ? 1000 : 500);
            });
        },

        enableClickFocusing(){
            EJS.events.on(document, 'acsbHit', e => {
                const $target = e.target.closest('[data-acsb-click-process="true"]');

                if( this.scrollingProcess || ! $target ) {
                    return;
                }

                this.scrollingProcess = true;
                setTimeout(() => this.scrollingProcess = false, 300);

                (() => {
                    if( ! $target.matches('a[href]') ) {
                        return;
                    }

                    const href = $target.getAttribute('href');

                    if( ! href || ! href.includes('#') ) {
                        return;
                    }

                    const $dest = EJS.pick('#'+EJS.arrays.filter(href.substr(0, 2) === '/#' ? href.substr(1) : href.split('#'))[0]);

                    if( ! $dest ) {
                        return;
                    }

                    for( let time of [500, 1000] ) {
                        setTimeout(() => {
                            if( ! build_utilities.isVisible($dest) ) {
                                return;
                            }

                            const $focused = EJS.elements.focused();

                            if( ! $focused || $focused.tagName === 'BODY' || $focused === $target ) {
                                EJS.elements.focus($dest);
                            }
                        }, time);
                    }
                })();

                const initialScroll = window.scrollY;
                const windowHeight  = EJS.utilities.getWinSize().height;

                setTimeout(() => {
                    const $focused = EJS.elements.focused();

                    if( $focused && $focused.tagName !== 'BODY' && $focused !== $target ) {
                        return;
                    }

                    if( initialScroll-window.scrollY >= windowHeight-(windowHeight / 100) * 20
                        || window.scrollY-initialScroll >= windowHeight-(windowHeight / 100) * 20 ) {
                        navi.focusWindowTop();
                    }
                }, 1500);
            });
        },

        enableKeyboardClicking(){
            EJS.events.on(document, 'click mousedown', e => {
                if( e.which === 3
                    || e.target.closest('[data-acsb-click-process="true"]')
                    || EJS.pick('[data-acsb-click-process="true"]', e.target) ) {
                    return;
                }
                this.fireHit(e.target);
            });
            EJS.events.on(document, 'acsbHitting', e => {
                const $clickable = e.target.closest('[data-acsb-clickable="true"]');

                if( ! $clickable || $clickable.getAttribute('data-acsb-click-process') === 'true' ) {
                    return;
                }

                $clickable.setAttribute('data-acsb-click-process', 'true');
                setTimeout(() => $clickable.removeAttribute('data-acsb-click-process'), 1250);
                EJS.events.trigger(e.target, 'acsbHit');
            });
            EJS.events.on(document, 'keydown', e => {
                if( ! [13, 32].includes(e.which) || build_utilities.isFormField(e.target) || ! e.target.click ) {
                    return;
                }

                const offsets = EJS.elements.offsets(e.target);
                const $topEl  = build_utilities.getElFromViewport(offsets.left, offsets.top);
                let $clicker  = e.target;

                if( e.target.contains($topEl) && typeof $topEl.click === 'function' ) {
                    $clicker = $topEl;
                } else {
                    for( let $el of EJS.picks('*', e.target) ) {
                        if( ! build_utilities.isFormField($el) && typeof $el.click === 'function' ) {
                            $clicker = $el;
                        }
                    }
                }

                if( e.which === 32 || ($clicker !== e.target && e.target.contains($clicker)) ) {
                    EJS.elements.click($clicker);
                    e.preventDefault();
                } else if( ! $clicker.matches('a[href], button, details') ) {
                    EJS.elements.click($clicker);
                }

                this.fireHit($clicker);
            });
        },

        enableFormBehaviors(){
            EJS.events.on(document, 'keydown', e => {
                if( e.target.tagName !== 'INPUT'
                    || e.target.disabled
                    || ! [13, 32].includes(e.which)
                    || ! ['checkbox', 'radio'].includes(e.target.type) ) {
                    return;
                }

                e.preventDefault();
                e.target.checked = ! e.target.checked;

                EJS.events.trigger(e.target, 'change');
                EJS.events.trigger(e.target, 'click');

                const $label = EJS.pick('label[for="'+e.target.getAttribute('id')+'"]');

                if( $label ) {
                    EJS.events.trigger($label, 'click');
                }
            });
            EJS.events.on(document, 'keydown', e => {
                if( e.target.tagName !== 'INPUT'
                    || e.target.type !== 'radio'
                    || e.target.disabled
                    || ! [40, 38, 37, 39].includes(e.which) ) {
                    return;
                }

                EJS.events.prevent(e);

                let next    = 0;
                let i       = 0;
                let $radios = (() => {
                    const $form = e.target.closest('form');

                    if( $form ) {
                        return EJS.picks('input[name="'+e.target.name+'"][type="radio"][data-acsb-now-navigable="true"]', $form);
                    } else {
                        return EJS.picks('input[name="'+e.target.name+'"][type="radio"][data-acsb-now-navigable="true"]');
                    }
                })();

                for( let $radio of $radios ) {
                    if( $radio !== e.target ) {
                        i++;
                        continue;
                    }

                    if( e.which === 40 || e.which === 37 ) {
                        if( ! $radios[i-1] ) {
                            if( next === 0 ) {
                                next = $radios.length-1;
                            }
                        } else {
                            next = i-1;
                        }
                    }

                    if( e.which === 38 || e.which === 39 ) {
                        if( ! $radios[i+1] ) {
                            if( next === $radios.length-1 ) {
                                next = 0;
                            }
                        } else {
                            next = i+1;
                        }
                    }

                    i++;
                }

                if( ! $radios[next] ) {
                    return;
                }

                const $label = EJS.pick('label[for="'+$radios[next].id+'"]');

                e.target.checked      = false;
                $radios[next].checked = true;

                EJS.events.trigger($radios[next], 'change');
                EJS.events.trigger($radios[next], 'click');

                if( $label ) {
                    EJS.events.trigger($label, 'click');
                }

                EJS.elements.focus($radios[next]);
            });
        },

        fireHit($el){
            if( $el.acsbHitting ) {
                return;
            }

            $el.acsbHitting = true;
            EJS.events.trigger($el, 'acsbHitting');

            setTimeout(() => $el.acsbHitting = false, 1000);
        },
    },

    hovers : {
        hovers    : [],
        subHovers : [],
        inProcess : [],

        process(){
            this.processLinkedStyles();
            this.processInlineStyles();
            this.bindBehaviors();

            EJS.events.on(window, config.events.domChanged, e => {
                if( this.hovers.length < 1 ) {
                    return;
                }

                try {
                    let process = false;

                    for( let $el of e.detail.$elements ) {
                        if( $el.matches(this.hovers.join(',')) ) {
                            process = true;
                        }
                    }

                    if( process ) {
                        this.bindElements();
                    }
                } catch( err ) {
                }
            });
        },

        bindElements(){
            let $newEls    = [];
            let $hovers    = [];
            let $subHovers = [];

            for( let selector of this.hovers ) {
                if( ! EJS.pick(EJS.strings.replace(selector, ':hover', '')) ) {
                    continue;
                }

                const $els = EJS.picks(selector.split(':hover')[0]);

                if( $els.length > 0 ) {
                    $hovers = $hovers.concat($els);
                }
            }

            for( let selector of this.subHovers ) {
                if( ! EJS.pick(EJS.strings.replace(selector, ':hover', '')) ) {
                    continue;
                }

                const $els = EJS.picks(selector.split(':hover')[0]);

                if( $els.length > 0 ) {
                    $subHovers = $subHovers.concat($els);
                }
            }

            for( let $el of $hovers ) {
                if( $el.acsbHoverBound ) {
                    continue;
                }

                $el.acsbHoverBound = true;

                if( $el.closest('[data-acsb-hover]') ) {
                    continue;
                }

                EJS.elements.attrs(EJS.picks('[data-acsb-hover="true"]', $el), ['data-acsb-hover'], true);
                $el.setAttribute('data-acsb-hover', 'true');
                $newEls.push($el);
            }

            for( let $el of $subHovers ) {
                if( $el.acsbSubHoverBound ) {
                    continue;
                }

                $el.acsbSubHoverBound = true;

                if( ! $el.closest('[data-acsb-hover]') ) {
                    continue;
                }

                $el.setAttribute('data-acsb-sub-hover', 'true');
                $newEls.push($el);
            }

            if( $newEls.length > 0 ) {
                keyNav.navigation.process($newEls);
            }
        },

        bindBehaviors(){
            EJS.events.on(document, 'focusin', e => {
                const $hover = e.target.closest('[data-acsb-hover="true"]');

                for( let $el of EJS.picks('.acsb-hover[data-acsb-hover="true"]') ) {
                    if( $el !== $hover ) {
                        $el.classList.remove('acsb-hover');
                    }
                }

                if( $hover && ! $hover.matches('.acsb-hover') ) {
                    $hover.classList.add('acsb-hover');
                    adjustments.keyNav.navigation.process(EJS.picks('*', $hover));
                }
            });
            EJS.events.on(document, 'click', e => {
                if( ! e.target.closest('[data-acsb-hover="true"]') ) {
                    EJS.elements.classes(EJS.picks('.acsb-hover[data-acsb-hover="true"]'), 'acsb-hover', true);
                }
            });
        },

        processLinkedStyles(urls = []){
            if( urls.length < 1 ) {
                for( let obj of document.styleSheets ) {
                    if( ! obj.href || EJS.strings.inString(obj.href, 'fonts.googleapis') ) {
                        continue;
                    }

                    urls.push(EJS.uris.getFormatted(obj.href, false, true));

                    try {
                        for( let rule of obj.rules ) {
                            if( rule.type === 3 && rule.styleSheet && typeof rule.href === 'string' ) {
                                urls.push(EJS.uris.getFormatted(rule.styleSheet.href, false, true));
                            }
                        }
                    } catch( err ) {
                    }
                }
            }

            if( urls.length > 0 ) {
                EJS.fetch(config.cache+'/app/'+config.domain+'/styles.json', [], [], 'GET').then(res => {
                    const cache     = ! res || res.length < 1 ? {} : JSON.parse(res);
                    const results   = {};
                    const toProcess = [];

                    for( let url of urls ) {
                        if( cache[url] ) {
                            results[url] = cache[url];
                        } else if( ! this.inProcess.includes(url) ) {
                            toProcess.push(url);
                            this.inProcess.push(url);
                        }
                    }

                    if( Object.keys(results).length > 0 ) {
                        this.deployResults(results);
                    }

                    if( toProcess.length > 0 && ! state.siteCfg.blockStyles ) {
                        EJS.fetch(config.endpoint+'/app/', {
                            remote : 'processStylesRemote',
                            urls   : JSON.stringify(toProcess)
                        });
                    }
                });
            }

            setTimeout(() => {
                if( this.inProcess.length > 0 ) {
                    const reProcesses = [];

                    for( let url of urls ) {
                        if( this.inProcess.includes(url) ) {
                            reProcesses.push(url);
                        }
                    }

                    if( reProcesses.length > 0 ) {
                        this.processLinkedStyles(reProcesses);
                    }
                }
            }, 10000);
        },

        processInlineStyles(){
            let css = '';

            for( let obj of document.styleSheets ) {
                if( obj.href
                    || (obj.ownerNode && obj.ownerNode.matches('.acsb-styles, .acsb-dynamic-colors, [data-acsb-dynamic-css]')) ) {
                    continue;
                }

                try {
                    for( let rule of obj.cssRules ) {
                        let rules = [];

                        if( rule.type === 3 && rule.styleSheet ) {
                            rules = rule.styleSheet.cssRules;
                        }

                        if( rule.type === 7 && rule.cssRules ) {
                            rules = rule.cssRules;
                        }

                        if( rules.length < 1 ) {
                            rules = [rule];
                        }

                        for( let ruleObj of rules ) {
                            if( ! ruleObj.selectorText || ! ruleObj.selectorText.includes(':hover') ) {
                                continue;
                            }

                            for( let selector of ruleObj.selectorText.split(',') ) {
                                if( ! selector.includes(':hover') ) {
                                    continue;
                                }

                                const parts   = ruleObj.cssText.split('{');
                                const matches = (parts[0].match(/:hover/g) || []).length;

                                if( matches > 1 ) {
                                    let subHover = '';

                                    for( let i of new Array(matches) ) {
                                        if( i+1 < matches ) {
                                            subHover = parts[0].replace(':hover', '');
                                        }
                                    }

                                    css += subHover.replace(':hover', ':focus')+','+subHover.replace(':hover', '.acsb-hover')+' {'+parts[1];

                                    if( subHover.substr(subHover.length-6) !== ':hover' && subHover.includes(':hover ') ) {
                                        this.subHovers.push(subHover);
                                    }
                                }

                                if( ruleObj.selectorText.substr(selector-6) !== ':hover' && selector.includes(':hover ') ) {
                                    this.hovers.push(selector);
                                }

                                css += parts[0].replace(':hover', ':focus')+','+parts[0].replace(':hover', '.acsb-hover')+' {'+parts[1];
                            }
                        }
                    }
                } catch( err ) {
                }
            }

            if( css.length > 0 ) {
                build_utilities.addDynamicCss(css, 'hovers');
                this.bindElements();
            }
        },

        deployResults(styles){
            for( let url in styles ) {
                let css = '';

                if( this.inProcess.includes(url) ) {
                    for( let urlInProcess of this.inProcess ) {
                        if( urlInProcess === url ) {
                            delete this.inProcess[urlInProcess];
                            break;
                        }
                    }
                }

                for( let rule of styles[url] ) {
                    const parts = rule.split(' {');

                    if( ! parts[0].includes(':hover') ) {
                        continue;
                    }

                    for( let v of parts[0].split(',') ) {
                        if( ! v.includes(':hover') ) {
                            continue;
                        }

                        let matches = (v.match(/:hover/g) || []).length;

                        if( matches > 1 ) {
                            let subHover = '';

                            for( let k of new Array(matches) ) {
                                if( k+1 < matches ) {
                                    subHover = v.replace(':hover', '');
                                }
                            }

                            css += subHover.replace(':hover', ':focus')+','+subHover.replace(':hover', '.acsb-hover')+' {'+parts[1];

                            if( subHover.substr(subHover.length-6) !== ':hover' && v.includes(':hover ') ) {
                                this.subHovers.push(subHover);
                            }
                        }

                        if( v.substr(v.length-6) !== ':hover' && v.includes(':hover ') ) {
                            this.hovers.push(v);
                        }

                        css += v.replace(':hover', ':focus')+','+v.replace(':hover', '.acsb-hover')+' {'+parts[1];
                    }
                }

                if( css.length > 0 ) {
                    build_utilities.addDynamicCss(css, 'hovers');
                }
            }

            this.hovers    = EJS.arrays.filter(this.hovers);
            this.inProcess = EJS.arrays.filter(this.inProcess);

            this.bindElements();
        },
    },

    overlays : {
        timePass    : 0,
        closing     : false,
        allowedTags : ['div', 'nav', 'header', 'section', 'dialog', 'aside', 'iframe'],

        init(){
            if( keyNav.rebinds > 0 ) {
                return;
            }

            this.bindTabulation();
            setInterval(() => this.timePass = this.timePass+1000, 1000);

            EJS.events.on(document, 'keydown click', e => {
                if( ! this.closing ) {
                    return;
                }

                if( ['acsbHit', 'click'].includes(e.type)
                    || (e.type === 'keydown' && [32, 13].includes(e.which)) ) {
                    EJS.events.prevent(e);
                }
            });
        },

        process($els, clickProcess, onloadProcess){
            if( ! $els || $els.length < 1 || this.closing ) {
                return;
            }

            for( let $el of $els ) {
                if( $el.closest('[data-acsb-dropdown], [data-acsb-carousel="true"], [data-acsb-overlay].acsb-active, [data-acsb]')
                    || ! this.allowedTags.includes($el.tagName.toLowerCase()) ) {
                    continue;
                }

                const type = this.getActiveOverlayType($el, clickProcess, onloadProcess);

                if( ! type ) {
                    continue;
                }

                $el.setAttribute('data-acsb-overlay', type);

                if( clickProcess ) {
                    $el.acsbOverlayTrigger = EJS.elements.focused();
                }

                switch( type ) {
                    case 'popup':
                        this.bindPopupBehaviors($el);
                        break;
                    case 'blocker':
                        this.bindBlockerBehaviors($el);
                        break;
                    case 'popbar':
                        this.bindPopupBehaviors($el);
                        break;
                    case 'sidebar':
                        this.bindPopupBehaviors($el);
                        break;
                    case 'loader':
                        this.bindLoaderBehaviors($el);
                        break;
                }
            }
        },

        bindElements($overlay, $blocker){
            keyNav.carousels.process();
            keyNav.navigation.process([$overlay, $blocker]);
            keyNav.navigation.process(EJS.picks('*', $overlay));

            const $clickables = EJS.picks('[data-acsb-clickable="true"]', $overlay);
            const $forms      = EJS.picks('form', $overlay);

            adjustments.screenReader.clickables.setTextualOpsTags($overlay);

            if( $clickables.length > 0 ) {
                adjustments.screenReader.clickables.processClickables($clickables);
            }

            if( $forms.length > 0 ) {
                adjustments.screenReader.forms.handleForms($forms);
            }
        },

        bindBlockerBehaviors($blocker){
            if( $blocker.acsbBlockerTimePassed >= 5000
                || $blocker.closest('[data-acsb-overlay="blocker"].acsb-active') ) {
                return;
            }

            if( ! $blocker.acsbBlockerTimePassed ) {
                $blocker.acsbBlockerTimePassed = 0;
            }

            let zIndex = parseInt(EJS.elements.style($blocker, 'z-index'));
            let $popup;

            if( ! isNaN(zIndex) ) {
                for( let $el of EJS.picks(this.allowedTags.join(',')) ) {
                    if( $blocker === $el
                        || $el.closest('[data-acsb]')
                        || ! ['absolute', 'fixed'].includes(EJS.elements.style($el, 'position'))
                        || ! build_utilities.isVisible($el) ) {
                        continue;
                    }

                    let elZindex = parseInt(EJS.elements.style($el, 'z-index'));

                    if( isNaN(zIndex) || zIndex > elZindex ) {
                        continue;
                    }

                    const offsets     = EJS.elements.offsets($el, true);
                    const $viewportEl = build_utilities.getElFromViewport(offsets.left+50, offsets.top+50);

                    if( $viewportEl && ($viewportEl === $el || $el.contains($viewportEl) || $viewportEl.contains($el)) ) {
                        $popup = $el;
                        break;
                    }
                }
            }

            if( $popup ) {
                const uuid = EJS.strings.random();

                $blocker.acsbBlockerTimePassed = 0;
                $blocker.classList.add('acsb-active');

                if( $blocker.getAttribute('data-acsb-clickable') === 'true' ) {
                    EJS.elements.attrs($blocker, {'tabindex' : '0', 'data-acsb-force-navigable' : 'true'});
                }

                EJS.elements.attrs($blocker, {
                    'aria-hidden'                   : 'false',
                    'data-acsb-hidden'              : 'false',
                    'data-acsb-overlay-blocker-for' : uuid
                });
                EJS.elements.attrs($popup, {
                    'data-acsb-overlay'            : 'popup',
                    'data-acsb-overlay-blocker-by' : uuid
                });

                this.bindPopupBehaviors($popup, $blocker);
            } else {
                setTimeout(() => {
                    this.bindBlockerBehaviors($blocker);
                    $blocker.acsbBlockerTimePassed = $blocker.acsbBlockerTimePassed+300;
                }, 300);
                $blocker.removeAttribute('data-acsb-overlay');
            }
        },

        bindPopupBehaviors($overlay, $blocker){
            if( $overlay.matches('[data-acsb-overlay].acsb-active') ) {
                return;
            }

            EJS.elements.attrs($overlay, {
                'class'            : 'acsb-active',
                'aria-modal'       : 'true',
                'aria-hidden'      : 'false',
                'data-acsb-hidden' : 'false',
            });

            if( ! $overlay.getAttribute('aria-label') ) {
                $overlay.setAttribute('aria-label', build_lang.get('ACTIVE_POPUP'));
            }

            if( ! $overlay.getAttribute('role') ) {
                $overlay.setAttribute('role', 'dialog');
            }

            build_utilities.throwAlert(build_lang.get('ACTIVE_POPUP'), true, true, false);
            this.bindElements($overlay, $blocker);

            const $trigger             = EJS.pick('[data-acsb-click-process="true"]');
            $overlay.acsbOriginalFocus = $trigger ? $trigger : keyNav.$lastFocused;

            if( ! $overlay.acsbPopupBound ) {
                let $closers = EJS.picks('[data-acsb-textual-ops="close"]', $overlay);

                if( $closers.length < 1 ) {
                    $closers = adjustments.screenReader.srOnly.create(build_lang.get('REMOVE'), {'role' : 'button'}, 'span', true);
                    EJS.elements.append($closers, $overlay, true);
                } else if( $closers.length > 3 ) {
                    $closers = [$closers[0], $closers[1], $closers[2]];
                }

                EJS.events.on($closers, 'acsbHit', () => this.closeOverlay($overlay, $blocker, true));
                EJS.events.on($overlay, 'keydown keyup', e => {
                    if( ! this.closing && e.which === 27 && e.target.tagName !== 'SELECT' ) {
                        this.closeOverlay($overlay, $blocker);
                    }
                });
            }

            if( ! $overlay.contains(EJS.elements.focused()) ) {
                let $navigable = EJS.pick('[data-acsb-now-navigable="true"]', $overlay);
                let $toFocus   = $overlay;

                for( let $title of EJS.picks('h1, h2, h3', $overlay) ) {
                    if( build_utilities.isVisible($title) ) {
                        $toFocus = $title;
                        break;
                    }
                }

                for( let $field of EJS.picks('input, select, textarea', $overlay) ) {
                    if( build_utilities.isVisible($field) && ! ['checkbox', 'radio'].includes($field.type) ) {
                        $toFocus = $field;
                        break;
                    }
                }

                if( ! $toFocus && $navigable ) {
                    $toFocus = $navigable;
                }

                EJS.elements.focus($toFocus);
            }

            $overlay.acsbPopupBound = true;
        },

        bindLoaderBehaviors($overlay){
            if( $overlay.getAttribute('data-acsb-overlay') && $overlay.matches('.acsb-active') ) {
                return;
            }

            EJS.events.on($overlay, 'keyup keydown', e => {
                if( e.which === 27 ) {
                    this.closeOverlay($overlay);
                }
            });
            EJS.elements.attrs($overlay, {
                'role'             : 'dialog',
                'aria-modal'       : 'true',
                'aria-hidden'      : 'false',
                'data-acsb-hidden' : 'false',
                'aria-label'       : build_lang.get('LOADING'),
            });
            EJS.elements.focus($overlay);
        },

        getActiveOverlayType($el, clickProcess, onloadProcess){
            if( $el.closest('[data-acsb-overlay].acsb-active, [data-acsb]')
                || (EJS.elements.style($el, 'pointer-events') === 'none'
                    && EJS.elements.style($el, 'background-color') === 'rgba(0, 0, 0, 0)') ) {
                return;
            }

            const position = EJS.elements.style($el, 'position');
            const zIndex   = EJS.elements.style($el, 'z-index');

            if( parseInt(zIndex) < 1 || ! ['fixed', 'absolute'].includes(position) || ! build_utilities.isVisible($el) ) {
                return;
            }

            const offsets       = EJS.elements.offsets($el, true);
            const windowWidth   = EJS.utilities.getWinSize().width;
            const windowHeight  = EJS.utilities.getWinSize().height;
            const widthPercent  = Math.ceil(($el.offsetWidth * 100) / windowWidth);
            const heightPercent = Math.ceil(($el.offsetHeight * 100) / windowHeight);

            let $topElement   = build_utilities.getElFromViewport(offsets.left, offsets.top);
            let middleBlocker = false;

            if( $el !== $topElement && ! $el.contains($topElement) ) {
                $topElement = build_utilities.getElFromViewport(offsets.left+50, offsets.top+50);
            }

            if( widthPercent < 70 && heightPercent < 70 ) {
                if( position === 'fixed' ) {
                    const $elFromCenter = build_utilities.getElFromViewport(windowWidth / 2, windowHeight / 2);

                    if( $elFromCenter === $topElement || $el.contains($elFromCenter) ) {
                        middleBlocker = true;
                    }
                }

                if( ! middleBlocker ) {
                    return;
                }
            }

            let overlayType   = null;
            let fixedParallax = false;

            const childrenCount = EJS.picks('*', $el).length;

            (() => {
                // Test if its a popup
                if( position === 'absolute'
                    && (widthPercent < 90 || heightPercent < 90 || $el.parentElement.tagName !== 'BODY') ) {
                    return;
                }

                if( childrenCount < 5 && EJS.picks('iframe', $el).length < 1 && $el.tagName !== 'IFRAME' ) {
                    return;
                }

                if( (widthPercent < 70 || heightPercent < 70) && ! middleBlocker ) {
                    return;
                }

                const $focused       = EJS.elements.focused();
                const $bottomElement = $focused ? null : build_utilities.getElFromViewport(offsets.left, offsets.top);

                if( ! $bottomElement
                    || ! $focused
                    || $focused.tagName === 'BODY'
                    || $el.contains($focused)
                    || $el.contains($bottomElement) ) {
                    overlayType = 'popup';
                }
            })();

            (() => {
                // Test if its a blocker
                if( overlayType
                    || childrenCount >= 5
                    || widthPercent < 70
                    || heightPercent < 70
                    || ! ['DIV', 'ASIDE'].includes($el.tagName) ) {
                    return;
                }

                if( position === 'absolute'
                    && (widthPercent < 90 || heightPercent < 90 || $el.parentElement.tagName !== 'BODY') ) {
                    return;
                }

                let isOnTop = $topElement === $el;

                if( ! isOnTop ) {
                    const windowPoints = [
                        {x : 30, y : 30},
                        {x : 30, y : EJS.utilities.getWinSize().height-30},
                        {x : 30, y : EJS.utilities.getWinSize().height / 2},
                        {x : EJS.utilities.getWinSize().width-30, y : 30},
                        {x : EJS.utilities.getWinSize().width / 2, y : 30},
                        {
                            x : EJS.utilities.getWinSize().width-30,
                            y : EJS.utilities.getWinSize().height / 2,
                        },
                        {
                            x : EJS.utilities.getWinSize().width-30,
                            y : EJS.utilities.getWinSize().height-30,
                        },
                        {
                            x : EJS.utilities.getWinSize().width / 2,
                            y : EJS.utilities.getWinSize().height / 2,
                        },
                        {
                            x : EJS.utilities.getWinSize().width / 2,
                            y : EJS.utilities.getWinSize().height-30,
                        },
                    ];

                    for( let point of windowPoints ) {
                        if( build_utilities.getElFromViewport(point.x, point.y) === $el ) {
                            isOnTop = true;
                            break;
                        }
                    }
                }

                if( isOnTop ) {
                    overlayType = 'blocker';
                }
            })();

            (() => {
                // Test if its a popbar
                if( overlayType
                    || ! clickProcess
                    || widthPercent < 70
                    || $el.offsetHeight < 150
                    || childrenCount < 10
                    || ! $el.getAttribute('data-acsb-hidden') ) {
                    return;
                }

                if( $el !== $topElement && ! $el.contains($topElement) ) {
                    return;
                }

                let inFixed    = false;
                let inAbsolute = false;

                if( position !== 'fixed' && position !== 'absolute' ) {
                    for( let $parent of EJS.elements.parents($el) ) {
                        const parentPosition = EJS.elements.style($parent, 'position');

                        if( parentPosition === 'fixed' ) {
                            inFixed = true;
                            break;
                        }

                        if( parentPosition === 'isInAbsolute' ) {
                            inAbsolute = true;
                            break;
                        }
                    }
                }

                if( position === 'fixed' || position === 'absolute' || inFixed || inAbsolute ) {
                    overlayType = 'popbar';
                }
            })();

            (() => {
                // Test if its a floating sidebar
                if( overlayType
                    || position !== 'fixed'
                    || ! clickProcess
                    || heightPercent < 70
                    || widthPercent > 50
                    || $el.offsetWidth < 150
                    || childrenCount < 10 ) {
                    return;
                }

                const top   = parseInt(EJS.elements.style($el, 'top'));
                const right = parseInt(EJS.elements.style($el, 'right'));
                const left  = parseInt(EJS.elements.style($el, 'left'));

                if( top === 0 && (right === 0 || left === 0) && ($el === $topElement || $el.contains($topElement)) ) {
                    overlayType = 'sidebar';
                }
            })();

            (() => {
                // Test if its a loader
                if( ! onloadProcess
                    || clickProcess
                    || position !== 'fixed'
                    || overlayType !== 'popup'
                    || childrenCount > 10
                    || heightPercent < 100
                    || widthPercent < 100
                    || this.timePass > 300 ) {
                    return;
                }

                adjustments.screenReader.clickables.setTextualOpsTags($el);

                if( EJS.elements.text($el).length > 30
                    || EJS.pick('ul, form, input, select, textarea, [role="navigation"], button, a, iframe, h1, h2, h3', $el)
                    || EJS.pick('[data-acsb-textual-ops="close"]', $el) ) {
                    return;
                }

                overlayType = 'loader';
            })();

            if( onloadProcess
                && position === 'fixed'
                && ['visible', 'auto'].includes(EJS.elements.style(document.body, 'overflow-y')) ) {
                for( let $el of EJS.picks('div, section') ) {
                    if( $el.contains($el)
                        || $el.closest('[data-acsb]')
                        || EJS.elements.style($el, 'position') !== 'relative'
                        || ! build_utilities.isVisible($el) ) {
                        continue;
                    }

                    const elZindex = EJS.elements.style($el, 'z-index');

                    if( elZindex === 'auto' || zIndex >= parseInt(elZindex) ) {
                        continue;
                    }

                    fixedParallax = true;
                    break;
                }
            }

            if( ! fixedParallax && build_utilities.isOverlaying($el) ) {
                return overlayType;
            }
        },

        closeOverlay($overlay, $blocker, closeClicked){
            if( this.closing ) {
                return;
            }

            this.closing = true;
            $overlay.classList.remove('acsb-active');

            EJS.elements.attrs($overlay, ['data-acsb-overlay-blocker-by', 'data-acsb-overlay'], true);

            for( let $el of EJS.picks('[data-acsb-overlay="blocker"]') ) {
                $el.classList.remove('acsb-active');
                EJS.elements.attrs($el, ['data-acsb-overlay-blocker-for', 'data-acsb-overlay'], true);
            }

            if( EJS.elements.isElement($overlay.acsbOverlayTrigger)
                && ! closeClicked && ['popbar', 'sidebar'].includes($overlay.getAttribute('data-acsb-overlay')) ) {
                EJS.elements.click($overlay.acsbOverlayTrigger);
            }

            if( build_utilities.isVisible($overlay) && ! closeClicked ) {
                const $closeBtn = EJS.pick('[data-acsb-textual-ops="close"]', $overlay);

                if( ! $closeBtn ) {
                    if( ! $blocker ) {
                        EJS.elements.click($overlay);
                    } else {
                        EJS.elements.click($blocker);
                    }
                } else {
                    EJS.elements.click($closeBtn);
                }
            }

            if( EJS.elements.style(document.body, 'overflow-y') === 'hidden' ) {
                document.body.classList.add('acsb-force-y-auto');
            }

            if( EJS.elements.style(document.body.parentElement, 'overflow-y') === 'hidden' ) {
                document.body.parentElement.classList.add('acsb-force-overflow-visible');
            }

            if( ! $overlay.acsbOriginalFocus || $overlay.contains($overlay.acsbOriginalFocus) ) {
                build_utilities.focusBody();
            } else {
                EJS.elements.focus($overlay.acsbOriginalFocus);
            }

            setTimeout(() => {
                if( build_utilities.isVisible($overlay) ) {
                    const windowSizes      = EJS.utilities.getWinSize();
                    const offsets          = EJS.elements.offsets($overlay);
                    const $possibleBlocker = build_utilities.getElFromViewport(windowSizes.width / 2, windowSizes.height / 2);

                    if( build_utilities.getElFromViewport(offsets.left, offsets.top === $overlay) ) {
                        EJS.elements.remove($overlay);
                    }

                    if( Math.ceil(($possibleBlocker.offsetWidth * 100) / windowSizes.width.height) > 80 ) {
                        EJS.elements.remove($possibleBlocker);
                    }
                }

                if( $blocker && build_utilities.isVisible($blocker) ) {
                    EJS.elements.remove($blocker);
                }

                setTimeout(() => this.closing = false, 250);
            }, 1000);
        },

        getActiveOverlay(){
            let $overlay = EJS.picks('[data-acsb-overlay="popup"].acsb-active').pop();

            if( ! $overlay ) {
                $overlay = EJS.picks('[data-acsb-overlay="popbar"].acsb-active').pop();
            }

            if( ! $overlay ) {
                $overlay = EJS.picks('[data-acsb-overlay="sidebar"].acsb-active').pop();
            }

            return $overlay;
        },

        bindTabulation(){
            EJS.events.on(document, 'keydown', e => {
                if( e.which !== 9 ) {
                    return;
                }

                const $overlay = this.getActiveOverlay();

                if( ! $overlay || ! build_utilities.isVisible($overlay) ) {
                    return;
                }

                EJS.events.prevent(e);

                const uuid      = $overlay.getAttribute('data-acsb-overlay-blocker-by');
                const $blocker  = uuid ? EJS.pick('[data-acsb-overlay-blocker-for="'+uuid+'"]') : undefined;
                const $focused  = EJS.elements.focused();
                const $elements = [];

                let $closeBtn;
                let next = 0;

                for( let $el of EJS.picks('[data-acsb-now-navigable="true"], [data-acsb-inner-focus="true"]', $overlay) ) {
                    if( ! $el.closest('[data-acsb-hidden="true"], [data-acsb]') ) {
                        $elements.push($el);
                    }
                }

                for( let $el of EJS.picks('[data-acsb-textual-ops="close"]', $overlay) ) {
                    $closeBtn = $el;
                    if( ! $elements.includes($el) && build_utilities.isVisible($el) ) {
                        $elements.unshift($el);
                    }
                }

                if( ! $closeBtn && $blocker && build_utilities.isVisible($blocker) ) {
                    $elements.unshift($blocker);
                }

                if( $overlay.getAttribute('data-acsb-now-navigable') === 'true' && ! $elements.includes($overlay) ) {
                    $elements.unshift($overlay);
                }

                if( $elements.length > 0 ) {
                    let i = 0;
                    for( let $el of $elements ) {
                        if( $el !== $focused ) {
                            i++;
                            continue;
                        }

                        next = e.shiftKey ? i-1 : i+1;
                        next = next < 0 ? $elements.length-1 : next;
                        next = next > $elements.length-1 ? 0 : next;
                        i++;
                    }

                    if( $elements[next] ) {
                        EJS.elements.focus($elements[next]);
                    }
                }
            });
            EJS.events.on(document, 'acsbHit', e => {
                const $overlay = this.getActiveOverlay();

                if( ! $overlay || $overlay.acsbOverlayTabulationRebinding || build_utilities.isFormField(e.target) ) {
                    return;
                }

                $overlay.acsbOverlayTabulationRebinding = true;

                setTimeout(() => {
                    this.bindElements($overlay);
                    setTimeout(() => $overlay.acsbOverlayTabulationRebinding = false, 300);
                }, 700);
            });
            EJS.events.on(window, config.events.elementHide, e => {
                if( e.detail.$el.matches('[data-acsb-overlay].acsb-active') ) {
                    e.detail.$el.classList.remove('acsb-active');
                }
            });
        }
    },

    inlinePopups : {

        init(){
            this.handleDatePickers();

            EJS.events.on(window, config.events.elementShow, e => {
                if( ! e.detail.clickProcess || ! this.isInlinePopup(e.detail.$el) ) {
                    return;
                }

                this.processing = true;
                keyNav.overlays.process([e.detail.$el], true);
                this.process(e.detail.$el);

                setTimeout(() => this.processing = false, 300);
            });
        },

        process($el){
            const $focused   = EJS.elements.focused();
            const $trigger   = EJS.pick('[data-acsb-click-process="true"]');
            const $absParent = (() => {
                let $result = undefined;

                for( let $parent of EJS.elements.parents($el) ) {
                    if( EJS.elements.style($parent, 'position') === 'fixed' ) {
                        $result = $parent;
                    }
                }

                if( ! $result ) {
                    for( let $parent of EJS.elements.parents($el) ) {
                        if( EJS.elements.style($parent, 'position') === 'absolute' ) {
                            $result = $parent;
                        }
                    }
                }

                return $result;
            })();

            if( $absParent ) {
                $el = $absParent;
                $absParent.setAttribute('aria-modal', 'true');

                if( ! $el.getAttribute('role') ) {
                    $absParent.setAttribute('role', 'dialog');
                }
            }

            if( ! $el.getAttribute('role') && ! build_utilities.isFormField($el) ) {
                if( $trigger && $trigger.closest('[role="tab"]') ) {
                    $el.setAttribute('role', 'tabpanel');
                }
            }

            if( ! $el.contains($focused) && (! $focused || $focused.tagName === 'BODY' || $focused === $trigger) ) {
                let $toFocus;
                const $container = $el.closest('[data-acsb-hidden="false"]');

                if( ! $container ) {
                    $toFocus = EJS.pick('[data-acsb-now-navigable="true"]', $el) || $el;
                } else {
                    $toFocus = EJS.pick('[data-acsb-now-navigable="true"]', $container) || $container;
                }

                if( $toFocus ) {
                    EJS.elements.focus($toFocus);
                }
            }

            if( $trigger ) {
                $trigger.setAttribute('aria-expanded', 'true');
                $el.acsbOriginalFocus = $trigger;
            } else {
                $el.acsbOriginalFocus = keyNav.$lastFocused;
            }

            if( ! $el.acsbInlinePopupBound ) {
                adjustments.screenReader.clickables.setTextualOpsTags($el);

                const $closer = (() => {
                    for( let $btn of EJS.picks('[data-acsb-textual-ops="close"]', $el) ) {
                        if( build_utilities.isVisible($btn) ) {
                            return $btn;
                        }
                    }
                })();

                if( $closer ) {
                    EJS.events.on($closer, 'acsbHit', () => EJS.elements.focus($el.acsbOriginalFocus));
                }

                EJS.events.on($el, 'keydown', e => {
                    if( e.which !== 27 || e.target.tagName === 'SELECT' ) {
                        return;
                    }

                    if( ! $closer ) {
                        if( $trigger ) {
                            EJS.elements.click($trigger);

                            setTimeout(() => {
                                if( build_utilities.isVisible($el) ) {
                                    build_utilities.fakeBodyClick();
                                }
                            }, 1000);
                        }
                    } else {
                        EJS.elements.click($closer);
                    }

                    if( $trigger.getAttribute('aria-expanded') === 'true' ) {
                        $trigger.setAttribute('aria-expanded', 'false');
                    }

                    widget.tooltips.remove();
                    EJS.elements.focus($el.acsbOriginalFocus);

                    setTimeout(() => this.processing = false, $closer ? 300 : 1250);
                });
            }

            $el.acsbInlinePopupBound = true;
        },

        isInlinePopup($el){
            const $trigger = EJS.pick('[data-acsb-click-process="true"]');

            if( ! $trigger
                || ($el.offsetWidth < 100 && $el.offsetHeight < 100)
                || EJS.pick('[data-acsb-overlay].acsb-active')
                || $el.closest('[data-acsb], [data-acsb-carousel], [data-acsb-overlay], [data-acsb-menu="li"]')
                || ($el.closest('form') && (build_utilities.isFormField($trigger) || build_utilities.isFormButton($trigger)))
                || ! $el.getAttribute('data-acsb-hidden')
                || ! build_utilities.isVisible($el) ) {
                return false;
            }

            keyNav.navigation.process(EJS.picks('*', $el));

            if( ! EJS.pick('[data-acsb-now-navigable="true"]', $el) && EJS.elements.text($el) < 150 ) {
                return false;
            }

            return true;
        },

        handleDatePickers(){
            // JQ UI date picker
            EJS.events.on(window, config.events.elementShow, e => {
                if( ! e.detail.$el.matches('.ui-datepicker') ) {
                    return;
                }

                const $trigger = EJS.elements.focused();
                const data     = e;

                EJS.elements.attrs(data.detail.$el, {'arial-label' : build_lang.get('CALENDAR'), 'role' : 'dialog'});

                if( ! data.detail.$el.datePickerBound ) {
                    e.detail.$el.$originalFocus = $trigger;

                    if( $trigger.tagName === 'INPUT' && build_utilities.isVisible(data.detail.$el) ) {
                        EJS.elements.focus(data.detail.$el);
                    }

                    EJS.events.on($trigger, 'keydown focus', e => {
                        if( e.type === 'focus' && ! data.detail.$el.acsbCalendarClosing ) {
                            EJS.elements.focus(data.detail.$el);
                        }

                        if( e.type === 'keydown' && e.which === 27 ) {
                            data.detail.$el.acsbCalendarClosing = true;
                            EJS.elements.focus($trigger);
                        }
                    });
                    EJS.events.on(data.detail.$el, 'click keydown', e => {
                        if( e.which === 13 || e.type === 'click' ) {
                            if( e.target.matches('.ui-datepicker-next') || e.target.matches('.ui-datepicker-prev') ) {
                                const classToFocus = e.target.matches('.ui-datepicker-prev') ? '.ui-datepicker-prev' : '.ui-datepicker-next';

                                widget.processor.start();
                                setTimeout(() => {
                                    const $el = EJS.pick(classToFocus);

                                    if( $el ) {
                                        EJS.elements.focus($el);
                                    }

                                    widget.processor.end();
                                }, 1500);
                            } else {
                                setTimeout(() => {
                                    data.detail.$el.acsbCalendarClosing = true;
                                    EJS.elements.focus($trigger);
                                }, 500);
                            }
                        }

                        if( e.which === 27 ) {
                            data.detail.$el.acsbCalendarClosing = true;
                            EJS.elements.focus($trigger);
                        }
                    });
                }

                e.detail.$el.datePickerBound = true;
            });
            EJS.events.on(window, config.events.elementHide, e => {
                if( ! e.detail.$el.matches('.ui-datepicker') || ! EJS.elements.isElement(e.detail.$el.$originalFocus) ) {
                    return;
                }

                e.detail.$el.acsbCalendarClosing = false;
            });
        },
    },

    letterNav : {
        codes : {
            66 : 'button, [role="button"], [role="tab"]',
            70 : 'form, [role="form"]',
            71 : 'img, [role="img"]',
            72 : 'h1, h2, h3, h4, h5, h6, [role="heading"]',
            73 : 'li, [data-acsb-menu="li"]',
            75 : 'a[href]',
            76 : 'ul, ol',
            77 : '[role="navigation"]',
            84 : 'table'
        },

        init(){
            EJS.events.on(document, 'keydown', e => {
                if( ['TEXTAREA', 'INPUT', 'SELECT'].includes(document.activeElement.tagName) ) {
                    return;
                }

                if( this.codes[e.which] && ! e.ctrlKey ) {
                    EJS.events.prevent(e);

                    const $overlay = EJS.pick('[data-acsb-overlay].acsb-active');
                    const $options = [];
                    let next       = 0;

                    for( let $el of EJS.picks(this.codes[e.which]) ) {
                        if( $el.getAttribute('data-acsb-hidden') === 'true'
                            || $el.closest('[data-acsb], [data-acsb-hidden="true"]')
                            || ['TEXTAREA', 'INPUT', 'INPUT'].includes($el.tagName)
                            || ! build_utilities.isVisible($el) ) {
                            continue;
                        }

                        if( $el.matches('a, button, [role="button"], [role="tab"]') && ! $el.matches('[data-acsb-now-navigable="true"]') ) {
                            continue;
                        }

                        if( ! $overlay ) {
                            $options.push($el);
                        } else if( $overlay.contains($el) ) {
                            $options.push($el);
                        }
                    }

                    if( $options.length > 0 ) {
                        let i = 0;
                        for( let $option of $options ) {
                            if( $option !== EJS.elements.focused() ) {
                                i++;
                                continue;
                            }

                            next = e.shiftKey ? i-1 : i+1;
                            next = next < 0 ? $options.length-1 : next;
                            next = next > $options.length-1 ? 0 : next;
                            i++;
                        }

                        if( $options[next] ) {
                            if( ! $options[next].getAttribute('tabindex') ) {
                                $options[next].setAttribute('tabindex', '-1');
                            }

                            if( ! $options[next].acsbLetterNavFocusOutBound ) {
                                EJS.events.on($options[next], 'focusout', (e, $target) => {
                                    $target.acsbLetterNavFocusOutBound = true;

                                    if( $target.getAttribute('tabindex') === '-1' ) {
                                        $target.removeAttribute('tabindex');
                                    }

                                    $target.removeAttribute('data-acsb-letter-nav-active');
                                });
                            }

                            $options[next].setAttribute('data-acsb-letter-nav-active', 'true');
                            $options[next].focus();
                        }
                    }
                }

                if( e.which === 13 ) {
                    const $focused = EJS.elements.focused();

                    if( $focused && $focused.getAttribute('data-acsb-letter-nav-active') === 'true' ) {
                        if( ! build_utilities.isClickable($focused) && $focused.closest('[data-acsb-clickable="true"]') ) {
                            EJS.elements.click($focused);
                        }

                        if( $focused.tagName === 'FORM' ) {
                            const $firstNavChild = EJS.pick('[data-acsb-now-navigable="true"]', $focused);

                            if( $firstNavChild ) {
                                EJS.events.prevent(e);
                                $firstNavChild.focus();
                            }
                        }
                    }
                }
            });
        },
    },

    navigation : {
        process($els, domChanged, clickProcess){
            $els = $els || EJS.picks('*');

            for( let $el of $els ) {
                this.processElement($el, domChanged, clickProcess);
            }
        },

        processElement($el, domChanged, clickProcess){
            if( ! $el
                || $el.closest('[data-acsb], svg')
                || ['SCRIPT', 'OPTION', 'NOSCRIPT', 'STYLE', 'BR', 'LINK', 'META', 'BODY'].includes($el.tagName) ) {
                return;
            }

            if( $el.tagName === 'IFRAME' ) {
                this.iframes.process($el);
                return;
            }

            if( $el.tagName === 'IMG' && ! $el.complete ) {
                EJS.events.on($el, 'load', () => this.processElement($el, domChanged, clickProcess));
                return;
            }

            if( ! $el.acsbKeynavBound ) {
                if( $el.tagName === 'A' && $el.getAttribute('target') === '_blank' ) {
                    let tooltip = build_lang.get('NEW_WINDOW');
                    let title   = $el.getAttribute('title');

                    if( title && title.length > 0 ) {
                        tooltip = title+' | '+build_lang.get('NEW_WINDOW');
                    }

                    $el.setAttribute('data-acsb-tooltip', tooltip);
                }
            }

            $el.acsbKeynavBound = true;
            this.processNavigability($el, clickProcess);
        },

        processNavigability($el, clickProcess){
            let isVisible   = build_utilities.isVisible($el);
            let isNavigable = $el.getAttribute('data-acsb-navigable') === 'true';

            if( ! $el.getAttribute('data-acsb-clickable') && build_utilities.isClickable($el) ) {
                $el.setAttribute('data-acsb-clickable', 'true');
            }

            if( ! $el.acsbNavigabilityProcessed ) {
                if( ! $el.getAttribute('data-acsb-original-tabindex')
                    && $el.getAttribute('tabindex')
                    && $el.getAttribute('data-acsb-force-navigable') !== 'true' ) {
                    $el.removeAttribute('tabindex');
                }

                if( ! $el.getAttribute('data-acsb-original-aria-hidden')
                    && isVisible
                    && $el.getAttribute('aria-hidden')
                    && $el.getAttribute('data-acsb-force-hidden') !== 'true' ) {
                    $el.removeAttribute('aria-hidden');
                }
            }

            $el.acsbNavigabilityProcessed = true;

            if( ! isNavigable && build_utilities.isNavigable($el) ) {
                isNavigable = true;
                $el.setAttribute('data-acsb-navigable', 'true');
            }

            if( ! isNavigable && $el.matches('button, a[href], [data-acsb-navigable="true"]') ) {
                $el.setAttribute('data-acsb-force-unnavigable', 'true');
            }

            if( $el.getAttribute('data-acsb-force-unnavigable') === 'true' ) {
                return this.makeUnnavigable($el);
            }

            if( $el.getAttribute('data-acsb-force-navigable') === 'false' ) {
                return this.makeNavigable($el);
            }

            if( $el.tagName === 'A' && isNavigable && isVisible && ! this.allowLinkTabStop($el) ) {
                $el.setAttribute('data-acsb-redundant-stop', 'true');
                return this.makeUnnavigable($el);
            }

            if( isVisible ) {
                if( $el.getAttribute('data-acsb-hidden') === 'true' ) {
                    if( $el.matches('[data-acsb-navigable="true"]') ) {
                        this.makeNavigable($el);
                    }

                    EJS.elements.attrs($el, {'aria-hidden' : 'false', 'data-acsb-hidden' : 'false'});
                    EJS.events.trigger($el, config.events.elementShow, {$el : $el, clickProcess : clickProcess});
                }
            } else {
                if( $el.getAttribute('data-acsb-navigable') === 'true' ) {
                    this.makeUnnavigable($el);
                }

                if( ! EJS.elements.parents($el, '[data-acsb-hidden="true"]', true)[0] ) {
                    EJS.elements.attrs($el, {'aria-hidden' : 'true', 'data-acsb-hidden' : 'true'});
                    EJS.events.trigger($el, config.events.elementHide, {$el : $el, clickProcess : clickProcess});
                }
            }

            if( build_utilities.isFormField($el) ) {
                keyNav.navigation.forms.processField($el);
            } else if( isNavigable && isVisible ) {
                if( $el.getAttribute('data-acsb-hover') && EJS.pick('[data-acsb-now-navigable="true"]', $el) ) {
                    this.makeUnnavigable($el);
                } else {
                    this.makeNavigable($el);
                }
            }
        },

        allowLinkTabStop($el){
            if( $el.tagName !== 'A' || $el.getAttribute('data-acsb-redundant-stop') === 'true' ) {
                return false;
            }

            const href = $el.getAttribute('href');

            if( ! href
                || href.length < 5
                || href.substr(0, 1) === '#'
                || $el.closest('[role="navigation"]')
                || href.substr(0, 10).toLowerCase() === 'javascript'
                || EJS.elements.text($el).length > 0 ) {
                return true;
            }

            let $parent      = $el.parentElement;
            let hasMultiStop = false;
            let searching    = true;
            let iterations   = 0;

            while( searching ) {
                if( iterations >= 3 || $parent.tagName === 'BODY' ) {
                    searching = false;
                    break;
                }

                const $visibleLinks = [];

                for( let $link of EJS.picks('a[href="'+href+'"]', $parent) ) {
                    if( build_utilities.isVisible($link) && $link !== $el ) {
                        $visibleLinks.push($link);
                    }
                }

                if( $visibleLinks.length > 0 ) {
                    searching    = false;
                    hasMultiStop = true;
                    break;
                }

                iterations = iterations+1;
                $parent    = $parent.parentElement;
            }

            return ! hasMultiStop;
        },

        bindArrowNav($els, type, which){
            if( ! $els || $els.length < 1 ) {
                return;
            }

            const $focused = EJS.elements.focused();
            let next       = 0;

            if( type === 'up-down' ) {
                let i = 0;
                for( let $el of $els ) {
                    if( $el !== $focused ) {
                        i++;
                        continue;
                    }

                    next = which === 40 ? i+1 : next;
                    next = which === 38 ? i-1 : next;
                    next = next < 0 ? $els.length-1 : next;
                    next = next > $els.length-1 ? 0 : next;
                    i++;
                }

                if( $els[next] ) {
                    setTimeout(() => $els[next].focus(), 50);
                }
            }

            if( type === 'left-right' ) {
                const dir = EJS.elements.style($els[0].parentElement, 'direction');
                let i     = 0;

                for( let $el of $els ) {
                    if( $el !== $focused ) {
                        i++;
                        continue;
                    }

                    if( which === 37 ) {
                        next = dir === 'rtl' ? i+1 : next;
                        next = dir !== 'rtl' ? i-1 : next;
                    }

                    if( which === 39 ) {
                        next = dir === 'rtl' ? i-1 : next;
                        next = dir !== 'rtl' ? i+1 : next;
                    }

                    next = next < 0 ? $els.length-1 : next;
                    next = next > $els.length-1 ? 0 : next;
                    i++;
                }

                if( $els[next] ) {
                    setTimeout(() => $els[next].focus(), 50);
                }
            }
        },

        makeNavigable($el){
            if( $el.matches('a[href]')
                || build_utilities.isFormField($el)
                || build_utilities.isFormButton($el) ) {
                $el.removeAttribute('tabindex');
            } else {
                $el.setAttribute('tabindex', '0');
            }

            $el.setAttribute('data-acsb-now-navigable', 'true');
        },

        makeUnnavigable($el){
            if( ['A', 'AREA', 'BUTTON', 'INPUT', 'SELECT', 'TEXTAREA'].includes($el.tagName) ) {
                $el.setAttribute('tabindex', '-1');
            } else {
                $el.removeAttribute('tabindex');
            }

            $el.setAttribute('data-acsb-now-navigable', 'false');
        },

        fixWix(){
            const $wixContainer = EJS.pick('#SITE_CONTAINER #SITE_ROOT #masterPage');

            if( ! $wixContainer ) {
                return;
            }

            const $header = EJS.pick('header#SITE_HEADER', $wixContainer);
            const $main   = EJS.pick('main#PAGES_CONTAINER', $wixContainer);
            const $footer = EJS.pick('footer#SITE_FOOTER', $wixContainer);

            if( $main ) {
                if( $header ) {
                    EJS.elements.css($header, {'z-index' : '9'});
                    EJS.elements.insert($header, $wixContainer, false);
                }

                if( $footer ) {
                    EJS.elements.insert($footer, $main, true);
                }
            }
        },

        iframes : {
            process($iframe){
                if( $iframe.acsbIframeProcessed && ! $iframe.acsbPossibleHiddenFrame ) {
                    return;
                }

                $iframe.acsbIframeProcessed = true;

                const brand     = EJS.uris.getBrandName($iframe.src);
                const ariaLabel = brand && brand.length > 0 ? brand+' Iframe' : 'Iframe';

                if( this.isTrusted($iframe) ) {
                    EJS.elements.attrs($iframe, {
                        'tabindex'                  : 0,
                        'aria-label'                : ariaLabel,
                        'data-acsb-navigable'       : 'true',
                        'data-acsb-force-navigable' : 'true',
                        'data-acsb-now-navigable'   : 'true',
                    });
                } else {
                    EJS.elements.attrs($iframe, {
                        'tabindex'                    : -1,
                        'aria-label'                  : ariaLabel,
                        'aria-hidden'                 : 'true',
                        'data-acsb-force-unnavigable' : 'true',
                        'data-acsb-navigable'         : 'true',
                        'data-acsb-now-navigable'     : 'false'
                    });

                    if( $iframe.offsetWidth >= 50 && $iframe.offsetHeight >= 50 && build_utilities.isVisible($iframe) ) {
                        this.setExplainer($iframe, brand);
                        $iframe.acsbPossibleHiddenFrame = false;
                        adjustments.screenReader.scrapper.setScrapeUrl($iframe, $iframe.src);
                    } else {
                        $iframe.acsbPossibleHiddenFrame = true;
                    }
                }
            },

            isTrusted($iframe){
                if( $iframe.getAttribute('data-acsb-child-frame') === 'true'
                    || EJS.strings.inString($iframe.src, window.location.hostname.replace('www.', '')) ) {
                    return true;
                }

                const options = [
                    'wix',
                    'recaptcha',
                    'facebook',
                    'youtube',
                    'google',
                    'wix',
                    'recaptcha',
                    ':blank',
                    'vimeo',
                    'twitter',
                    'yelp',
                    'instagram',
                    'linkedin'
                ];

                for( let v of options ) {
                    if( EJS.strings.inString($iframe.src, v) ) {
                        return true;
                    }
                }

                return false;
            },

            setExplainer($iframe, brand){
                const description = brand+' Iframe: '+build_lang.get('IFRAME_TRIGGER');
                const $explainer  = EJS.elements.create('div', {
                    'tabindex'                   : 0,
                    'class'                      : 'acsb-sr-only',
                    'aria-hidden'                : 'false',
                    'data-acsb-hidden'           : 'false',
                    'data-acsb-sr-only'          : 'true',
                    'data-acsb-navigable'        : 'true',
                    'data-acsb-clickable'        : 'true',
                    'data-acsb-force-visible'    : 'true',
                    'data-acsb-iframe-explainer' : 'true',
                    'data-acsb-force-navigable'  : 'true',
                    'data-acsb-now-navigable'    : 'true',
                    'data-acsb-url-brand'        : brand,
                    'data-acsb-tooltip'          : description,
                }, description);

                EJS.elements.insert($explainer, $iframe);
                EJS.events.on($explainer, 'acsbHit', e => {
                    EJS.events.prevent(e);
                    const $frame = EJS.elements.next(e.target, 'iframe')[0];

                    if( EJS.elements.isElement($frame) ) {
                        EJS.elements.remove(e.target);
                        EJS.elements.attrs($frame, ['tabindex', 'aria-hidden', 'data-acsb-force-unnavigable'], true);
                        keyNav.navigation.makeNavigable($frame);

                        if( $frame.contentWindow ) {
                            EJS.elements.focus($frame);
                        }
                    }
                });
            }
        },

        forms : {
            processField($field){
                this.processCustomSelect($field);
                this.processCustomControl($field);
                this.processConnectedControls($field);
                this.processNavigability($field);
            },

            processCustomControl($field){
                if( ! this.isCustomControl($field) ) {
                    return;
                }

                EJS.elements.css($field, {'opacity' : '1', 'width' : 'auto', 'height' : 'auto'}, true);
                EJS.elements.attrs($field, {
                    'class'                   : 'acsb-shown',
                    'data-acsb-hidden'        : 'false',
                    'aria-hidden'             : 'false',
                    'data-acsb-force-visible' : 'true',
                });

                let $customControl;

                if( $field.previousElementSibling
                    && $field.previousElementSibling.getAttribute('data-acsb-custom-control') === 'true' ) {
                    $customControl = $field.previousElementSibling;
                }

                if( $field.nextElementSibling
                    && $field.nextElementSibling.getAttribute('data-acsb-custom-control') === 'true' ) {
                    $customControl = $field.nextElementSibling;
                }

                if( ! $customControl ) {
                    return;
                }

                keyNav.navigation.makeNavigable($field);
                keyNav.navigation.makeUnnavigable($customControl);
                $customControl.setAttribute('data-acsb-force-unnavigable', 'true');

                if( EJS.elements.text($customControl).length < 1 && ! EJS.pick('img', $customControl) ) {
                    $customControl.classList.add('acsb-hidden');
                }
            },

            processConnectedControls($field){
                const $label = EJS.pick('label[for="'+$field.getAttribute('id')+'"]');

                if( ! $label || $field.tagName !== 'INPUT' || ! ['checkbox', 'radio'].includes($field.type) ) {
                    return;
                }

                $field.classList.add('acsb-shown');
                $label.classList.add('acsb-connected-input-shown');

                if( build_utilities.isVisible($field) ) {
                    keyNav.navigation.makeNavigable($field);
                    keyNav.navigation.makeUnnavigable($label);
                }
            },

            processNavigability($field){
                if( $field.closest('[data-acsb-hidden="true"]') ) {
                    return keyNav.navigation.makeUnnavigable($field);
                }

                keyNav.navigation.makeNavigable($field);

                const $navigableParent = EJS.elements.parents($field, '[data-acsb-now-navigable="true"]', true)[0];

                if( $navigableParent ) {
                    keyNav.navigation.makeUnnavigable($navigableParent);
                }
            },

            processCustomSelect($select){
                if( $select.tagName !== 'SELECT' ) {
                    return;
                }

                let $customSelect;
                const selectors = [
                    '.chosen-container',
                    '.chzn-container',
                    '.select2-container',
                    '.selectize-control',
                    '.jcf-select',
                    '.jcf-list-box',
                ];

                if( this.isCustomSelect($select.nextElementSibling, $select, selectors) ) {
                    $customSelect = $select.nextElementSibling;
                } else if( this.isCustomSelect($select.previousElementSibling, $select, selectors) ) {
                    $customSelect = $select.previousElementSibling;
                }

                if( ! $customSelect ) {
                    return;
                }

                $select.classList.add('acsb-shown');
                keyNav.navigation.makeUnnavigable($customSelect);
                keyNav.navigation.makeNavigable($select);

                if( $customSelect.offsetWidth > 0 ) {
                    EJS.elements.css($select, {'width' : $customSelect.offsetWidth+'px',});
                }

                EJS.elements.css($customSelect, {display : 'none', opacity : '0', visibility : 'hidden'}, true);
                EJS.elements.attrs($select, {'data-acsb-hidden' : 'false', 'aria-hidden' : 'false'});
                EJS.elements.attrs($customSelect, {
                    'class'                       : 'acsb-hidden',
                    'tabindex'                    : '-1',
                    'data-acsb-force-unnavigable' : 'true',
                });

                const $firstOption = EJS.pick('option', $select);

                if( $firstOption && EJS.elements.text($firstOption).length < 1 ) {
                    $firstOption.textContent = build_lang.get('SELECT_OPTION');
                }
            },

            isCustomSelect($el, $select, selectors){
                if( ! $el
                    || ! ['DIV', 'SPAN'].includes($el.tagName)
                    || (build_utilities.isVisible($select) && ! $select.matches('.select2-hidden-accessible')) ) {
                    return false;
                }

                let match = false;

                for( let selector of selectors ) {
                    if( ! $el.matches(selector) ) {
                        continue;
                    }

                    match = true;
                    $select.setAttribute('data-acsb-custom-select', selector.replace('.', ''));
                    break;
                }

                return match;
            },

            isCustomControl($field){
                if( ! ['checkbox', 'radio', 'file'].includes($field.type)
                    || (build_utilities.isVisible($field) && EJS.elements.style($field, 'opacity') !== '0') ) {
                    return false;
                }

                let $el;

                if( $field.previousElementSibling && ['SPAN', 'LABEL'].includes($field.previousElementSibling.tagName) ) {
                    $el = $field.previousElementSibling;
                }

                if( $field.nextElementSibling && ['SPAN', 'LABEL'].includes($field.nextElementSibling.tagName) ) {
                    $el = $field.nextElementSibling;
                }

                if( $el ) {
                    $el.setAttribute('data-acsb-custom-control', 'true');
                    return true;
                }

                return false;
            }
        }
    }
}

/* harmony default export */ const adjustments_keyNav = (keyNav);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/actions/adjustments/adjustments.js
;























const Adjustments = {
    readableFont: adjustments_readableFont,
    magnifier: adjustments_magnifier,
    emphasizeLinks: adjustments_emphasizeLinks,
    emphasizeTitles: adjustments_emphasizeTitles,
    textAlign: adjustments_textAlign,
    contrast: adjustments_contrast,
    mute: adjustments_mute,
    cursor: adjustments_cursor,
    hideImages: adjustments_hideImages,
    readMode: adjustments_readMode,
    readingGuide: adjustments_readingGuide,
    readingMask: adjustments_readingMask,
    stopAnimations: adjustments_stopAnimations,
    emphasizeHover: adjustments_emphasizeHover,
    seizuresProfile: adjustments_seizuresProfile,
    visionProfile: adjustments_visionProfile,
    emphasizeFocus: adjustments_emphasizeFocus,
    cognitiveProfile: adjustments_cognitiveProfile,
    adhdProfile: adjustments_adhdProfile,
    motorProfile: adjustments_motorProfile,
    accessMode: adjustments_accessMode,
    screenReader: adjustments_screenReader,
    keyNav: adjustments_keyNav,
}

/* harmony default export */ const adjustments = (Adjustments);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/build/utilities.js
;




const Utilities = {
    isClickable($el){
        let isClickable = false;

        if( $el.getAttribute('onclick') ) {
            EJS.elements.css($el, {'cursor' : 'pointer'});
        }

        if( $el.tagName === 'A' || this.isFormButton($el) ) {
            isClickable = true;
        } else {
            (() => {
                if( EJS.elements.style($el, 'cursor') !== 'pointer'
                    || EJS.elements.style($el, 'pointer-events') === 'none'
                    || EJS.elements.parents($el, 'a, button, [data-acsb-clickable="true"]', true).length > 0
                    || ($el.tagName === 'LABEL' && $el.closest('form'))
                    || EJS.picks('a, button, [data-acsb-clickable="true"]', $el).length > 0
                    || EJS.picks('*:not(svg)', $el).length > 7 ) {
                    return;
                }
                isClickable = true;
            })();
        }

        return isClickable;
    },

    isNavigable($el){
        let navigable = false;

        if( this.isClickable($el)
            || $el.getAttribute('data-acsb-hover') === 'true'
            || $el.getAttribute('data-acsb-sub-hover') === 'true' ) {
            if( EJS.elements.parents($el, 'button, a[href], [data-acsb-navigable="true"]').length < 1 ) {
                navigable = true;
            }
        }

        if( ! navigable ) {
            if( $el.getAttribute('role') === 'button' || (this.isFormField($el) && $el.type !== 'hidden') ) {
                navigable = true;
            }
        }

        if( navigable
            && ($el.tagName === 'AREA'
                || EJS.elements.style($el, 'cursor') === 'not-allowed'
                || EJS.elements.parents($el, 'svg', true).length > 0) ) {
            navigable = false;
        }

        return navigable;
    },

    isVisible($el){
        if( ! $el || $el.getAttribute('data-acsb-force-visible') === 'true' ) {
            return true;
        }

        if( $el.closest('svg')
            || $el.getAttribute('data-acsb-force-hidden') === 'true'
            || EJS.elements.parents($el, '[data-acsb-hidden="true"]', true).length > 0
            || this.isHiddenByStyle($el)
            || this.isHiddenBySize($el)
            || this.isOverflowing($el) ) {
            return false;
        }

        return true;
    },

    isHiddenBySize($el){
        const w = EJS.elements.width($el);
        const h = EJS.elements.height($el);

        if( h < 1 || w < 1 ) {
            if( EJS.elements.style($el, 'font-size') === '0px' ) {
                EJS.elements.css($el, {'font-size' : '1px'});
            }
            if( EJS.elements.style($el, 'line-height') === '0px' ) {
                EJS.elements.css($el, {'line-height' : '1px'});
            }
        }

        if( h > 0 && w > 0 ) {
            return false;
        }

        return ! this.hasVisibleChildren($el);
    },

    isHiddenByStyle($el){
        const display    = EJS.elements.style($el, 'display');
        const opacity    = EJS.elements.style($el, 'opacity');
        const visibility = EJS.elements.style($el, 'visibility');
        const transform  = EJS.elements.style($el, 'transform');

        if( display === 'none'
            || opacity === '0'
            || visibility === 'hidden'
            || ($el.offsetWidth <= 1 && $el.offsetHeight <= 1 && $el.children.length < 1)
            || ($el.getAttribute('type') === 'hidden' && $el.tagName === 'INPUT')
            || ['matrix(0, 0, 0, 0, 0, 0)', 'matrix(1, 0, 0, 0, 0, 0)', 'matrix(0, 0, 0, 1, 0, 0)'].includes(transform)
            || (EJS.elements.style($el, 'max-height') === '0px' && ['block', 'grid', 'flex'].includes(display))
            || ! this.inDocument($el) ) {

            if( opacity === '0'
                && visibility !== 'hidden'
                && display !== 'none'
                && EJS.elements.style($el, 'pointer-events') !== 'none' ) {
                if( ['INPUT', 'SELECT', 'TEXTAREA'].includes($el.tagName) ) {
                    return false;
                } else {
                    $el.classList.add('acsb-reset-transitions');
                    const transition = EJS.elements.style($el, 'transition-property');
                    $el.classList.remove('acsb-reset-transitions');

                    if( transition === 'all' || transition.includes('opacity') ) {
                        const offsets = EJS.elements.offsets($el, true);

                        if( this.getElFromViewport(offsets.left, offsets.top) === $el
                            && offsets.top > EJS.utilities.getWinSize().height ) {
                            return false;
                        }
                    }
                }
            }

            return true;
        }

        return false;
    },

    isOverflowing($el){
        if( $el.childElementCount > 0
            && ['hidden', 'auto hidden', 'hidden auto'].includes(EJS.elements.style($el, 'overflow')) ) {
            $el.setAttribute('data-acsb-overflower', 'true');
        }

        if( EJS.elements.style($el, 'display') === 'inline' ) {
            return false;
        }

        const $overflower = $el.closest('[data-acsb-overflower="true"]');

        if( ! $overflower || ! $overflower.parentElement || $overflower.parentElement.tagName === 'BODY' ) {
            return false;
        }

        if( EJS.elements.style($el, 'position') === 'fixed'
            || ! ['relative', 'absolute', 'fixed'].includes(EJS.elements.style($overflower, 'position')) ) {
            return false;
        }

        if( $overflower.clientWidth < $el.clientWidth || $overflower.clientHeight < $el.clientHeight ) {
            return false;
        }

        const elOffsets = EJS.elements.offsets($el, true), overfOffsets = EJS.elements.offsets($overflower, true);

        if( elOffsets.left-$el.clientWidth <= 0 || elOffsets.top-$el.clientHeight <= 0 ) {
            return false;
        }

        if( $el.clientWidth > 0 && EJS.elements.style($overflower, 'overflow-x') === 'hidden' ) {
            if( elOffsets.left-overfOffsets.left+$el.clientWidth <= 5
                || elOffsets.left-overfOffsets.left+5 >= $overflower.clientWidth ) {
                return true;
            }
        }

        if( $el.clientHeight > 0 && EJS.elements.style($overflower, 'overflow-y') === 'hidden' ) {
            if( elOffsets.top-overfOffsets.top+$el.clientHeight <= 5
                || elOffsets.top-overfOffsets.top+5 >= $overflower.clientHeight ) {
                return true;
            }
        }

        return false;
    },

    isOverlaying($el){
        let overlaying = false;
        const style    = $el.getAttribute('style');
        const display  = EJS.elements.style($el, 'display');
        const offsets  = EJS.elements.offsets($el, true);
        const offsetX  = offsets.left;
        const offsetY  = offsets.top;

        $el.acsbIgnoreChange = true;
        $el.classList.add('acsb-hidden');

        if( style && style.includes('display') ) {
            EJS.elements.css($el, {display : 'none'});
        }

        const $bottomEl = this.getElFromViewport(offsetX, offsetY);

        $el.classList.remove('acsb-hidden');

        if( style && style.includes('display') ) {
            EJS.elements.css($el, {display : display});
        }

        setTimeout(() => $el.acsbIgnoreChange = false, 250);

        if( $bottomEl && $bottomEl !== $el && $bottomEl.tagName !== 'BODY' ) {
            const points = [
                {x : offsets.left, y : offsets.top},
                {x : offsets.right, y : offsets.top},
                {x : offsets.left+$el.offsetWidth / 2, y : offsets.top},
                {x : offsets.left, y : offsets.top+$el.offsetHeight / 2},
                {x : offsets.right, y : offsets.top+$el.offsetHeight / 2},
                {
                    x : offsets.left+$el.offsetWidth / 2,
                    y : offsets.top+$el.offsetHeight / 2,
                },
                {x : offsets.left, y : offsets.bottom},
                {x : offsets.right, y : offsets.bottom},
                {x : offsets.left+$el.offsetWidth / 2, y : offsets.bottom},
            ];

            for( let point of points ) {
                const $elFromPoint = this.getElFromViewport(point.x, point.y);

                if( ! $elFromPoint ) {
                    continue;
                }

                if( $el === $elFromPoint || $el.contains($elFromPoint) || $elFromPoint.contains($el) ) {
                    overlaying = true;
                    break;
                }
            }
        }

        return overlaying;
    },

    isFormButton($el){
        if( $el.closest('form') ) {
            return false;
        }
        return $el.tagName === 'BUTTON' || ($el.tagName === 'INPUT' && ['image', 'button', 'submit'].includes($el.type));
    },

    isFormField($el){
        return (['INPUT', 'TEXTAREA', 'SELECT'].includes($el.tagName) && ! ['button', 'image', 'submit'].includes($el.type));
    },

    hasSimilarSiblings($el){
        const next     = EJS.elements.next($el, $el.tagName.toLowerCase(), true);
        const previous = EJS.elements.previous($el, $el.tagName.toLowerCase(), true);
        const text     = EJS.elements.text($el);

        let hasSimilarSiblings = true;

        if( previous.length < 1 && next.length < 1 ) {
            hasSimilarSiblings = false;
        }

        for( let $sibling of next.concat(previous) ) {
            if( $el.childElementCount !== $sibling.childElementCount || (text.length > 0 && EJS.elements.text($sibling).length === 0) ) {
                hasSimilarSiblings = false;
            }
        }

        return hasSimilarSiblings;
    },

    hasVisibleChildren($el){
        let childVisible = false;

        for( let $child of EJS.picks('*', $el) ) {
            if( ! this.isHiddenByStyle($child) && EJS.elements.height($child) > 0 && EJS.elements.width($child) > 0 ) {
                childVisible = true;
                break;
            }
        }

        return childVisible;
    },

    inDocument($el){
        if( EJS.elements.style($el, 'display') === 'inline' ) {
            return true;
        }

        const offset = EJS.elements.offsets($el, true);

        if( EJS.elements.style($el, 'position') === 'fixed' ) {
            const winSizes = EJS.utilities.getWinSize();

            if( offset.top >= winSizes.height || (offset.top < 0 && $el.offsetHeight-offset.top < 0) ) {
                return false;
            }
        }

        let elementWidth  = $el.scrollWidth > $el.offsetWidth ? $el.scrollWidth : $el.offsetWidth;
        let elementHeight = $el.scrollHeight > $el.offsetHeight ? $el.scrollHeight : $el.offsetHeight;

        if( elementHeight === 0 ) {
            elementHeight = 1;
        }

        if( elementWidth === 0 ) {
            elementWidth = 1;
        }

        if( (offset.left <= 0 && elementWidth+offset.left <= 0)
            || (offset.right <= 0 && elementWidth+offset.right <= 0)
            || (offset.top <= 0 && elementHeight+offset.top <= 0) ) {
            return false;
        }

        return true;
    },

    getShownText($el){
        if( Math.abs(parseInt(EJS.elements.style($el, 'text-indent'))) >= 9999 ) {
            return '';
        }

        return $el.closest('[data-acsb-hidden="true"]') ? '' : EJS.elements.text($el, true, [
                '[data-acsb-sr-only="true"]',
                '[data-acsb-hidden="true"]',
                'option',
                'textarea'
            ]
        );
    },

    getUrlAsAbsolute(url){
        return EJS.uris.getAbsolute(EJS.uris.getFormatted(url, config.ace ? EJS.pick('head meta[name="acsbAceBase"]').content : config.domain));
    },

    getElFromViewport(x, y){
        const $els = [
            EJS.pick('.acsb-trigger'),
            EJS.pick('.acsb-body-focuser'),
            EJS.pick('.acsb-alert.acsb-active'),
            EJS.pick('.acsb-processor.acsb-active')
        ];

        for( let $el of $els ) {
            if( $el ) {
                $el.classList.add('acsb-hidden');
            }
        }

        const $match = document.elementFromPoint(x, y);

        for( let $el of $els ) {
            if( $el ) {
                $el.classList.remove('acsb-hidden');
            }
        }

        return $match;
    },

    getNearestElements($el, selectors){
        if( ! $el || ! selectors || selectors.length < 1 ) {
            return [];
        }

        const $els     = [];
        const elOffset = EJS.elements.offsets($el, false);

        for( let $nearEl of EJS.picks(selectors.join(',')) ) {
            if( ! this.isVisible($nearEl) ) {
                continue;
            }

            let tagOffsets = EJS.elements.offsets($nearEl, false);
            let isAbove;
            let isLeft;
            let isLevel;
            let distanceLeft;
            let distanceRight;
            let distanceX;
            let distanceY;

            if( elOffset.left >= tagOffsets.left ) {
                isLeft       = true;
                distanceLeft = elOffset.left-(tagOffsets.left+$nearEl.offsetWidth);
            } else {
                isLeft       = false;
                distanceLeft = tagOffsets.left-(elOffset.left+$el.offsetWidth);
            }

            if( elOffset.right-$el.offsetWidth >= tagOffsets.right-$nearEl.offsetWidth ) {
                distanceRight = elOffset.right-$el.offsetWidth-(tagOffsets.right-$nearEl.offsetWidth);
            } else {
                distanceRight = tagOffsets.right-$nearEl.offsetWidth-(elOffset.right-$el.offsetWidth);
            }

            if( elOffset.top >= tagOffsets.top ) {
                if( elOffset.top-tagOffsets.top <= $nearEl.offsetHeight || elOffset.top-tagOffsets.top <= $el.offsetHeight ) {
                    isLevel = true;
                }
            } else {
                if( tagOffsets.top-elOffset.top <= elOffset.offsetHeight || tagOffsets.top-elOffset.top <= $nearEl.offsetHeight ) {
                    isLevel = true;
                }
            }

            if( isLevel ) {
                if( elOffset.top >= tagOffsets.top ) {
                    isAbove   = true;
                    distanceY = elOffset.top-tagOffsets.top;
                } else {
                    isAbove   = false;
                    distanceY = tagOffsets.top-elOffset.top;
                }
            } else {
                if( elOffset.top >= tagOffsets.top ) {
                    isAbove   = true;
                    distanceY = elOffset.top-(tagOffsets.top+$nearEl.offsetHeight);
                } else {
                    isAbove   = false;
                    distanceY = tagOffsets.top-(elOffset.top+$el.offsetHeight);
                }
            }

            distanceX = distanceLeft <= distanceRight ? distanceLeft : distanceRight;

            $els.push({
                $el       : $nearEl,
                isLevel   : isLevel,
                isAbove   : isAbove,
                isLeft    : isLeft,
                distanceX : distanceX,
                distanceY : distanceY,
                distance  : Math.round(Math.sqrt(distanceX * distanceX+distanceY * distanceY)),
            });
        }

        return $els.sort((a, b) => parseFloat(a.distance)-parseFloat(b.distance));
    },

    throwAlert(text, slidebox = false, priority = false, sr = true){
        if( EJS.picks('.acsb-alert.acsb-top-priority, [data-acsb-sr-alert="true"].acsb-top-priority').length > 0 && ! priority ) {
            return;
        }

        slidebox = window['acsbChildFrame'] ? false : slidebox;
        EJS.elements.remove(EJS.picks('.acsb-alert, .acsb-sr-alert'));

        if( slidebox ) {
            let counter  = 10;
            let timeLeft = 10;

            const html   = `<div class="acsb-alert-timer"><span>${counter}</span> ${build_lang.get('TIME_TO_ALERT_CLOSE')}</div>
                <div class="acsb-alert-separator"></div>
                <div class="acsb-alert-sound">${build_lang.get('PLAYING_IN_SCREEN_READER')}</div>`;
            const $alert = EJS.elements.create('div', {
                'class'                   : 'acsb-alert',
                'data-acsb-force-visible' : 'true',
                'aria-hidden'             : 'true',
                'data-acsb'               : 'alert',
            });

            if( priority ) {
                $alert.classList.add('acsb-top-priority');
            }

            EJS.elements.append(EJS.elements.create('div', {'class' : 'acsb-alert-message'}, text), $alert);
            EJS.elements.append(EJS.elements.create('div', {'class' : 'acsb-alert-bar'}, html), $alert);

            if( state.widget.language === 'he' || state.widget.language === 'ar' ) {
                $alert.classList.add('acsb-rtl');
            }

            if( state.widget.triggerPositionX === 'right' ) {
                $alert.classList.add('acsb-place-left');
            } else {
                $alert.classList.add('acsb-place-right');
            }

            const $el    = EJS.pick('.acsb-alert-bar span', $alert);
            let interval = setInterval(() => {
                if( ! $alert.matches('.acsb-js-hovered') ) {
                    timeLeft = parseInt(EJS.elements.text($el));

                    if( timeLeft > 0 ) {
                        $el.textContent = timeLeft-1 >= 0 ? timeLeft-1 : 0;
                    } else {
                        clearInterval(interval);
                    }
                }
            }, 1000);
            let timer    = setTimeout(() => {
                $alert.classList.remove('acsb-active');
                clearTimeout(timer);
            }, parseInt(timeLeft+'000'));

            $alert.classList.add('acsb-active');

            EJS.events.on($alert, 'mouseover', () => {
                $alert.classList.add('acsb-js-hovered');
                clearTimeout(timer);
            });
            EJS.events.on($alert, 'mouseleave', () => {
                $alert.classList.remove('acsb-js-hovered');

                timer = setTimeout(() => {
                    $alert.classList.remove('acsb-active');
                    clearTimeout(timer);
                }, parseInt(timeLeft+'000'));
            });

            EJS.elements.append($alert, document.body);
        }

        if( sr ) {
            const $srAlert = adjustments.screenReader.srOnly.create(text, {
                'role'                    : 'alert',
                'class'                   : 'acsb-sr-alert',
                'aria-live'               : 'assertive',
                'data-acsb-sr-alert'      : 'true',
                'data-acsb-force-visible' : 'true',
            });

            if( priority ) {
                $srAlert.classList.add('acsb-top-priority');
            }

            setTimeout(() => EJS.elements.remove($srAlert), 10000);
            EJS.elements.append($srAlert, document.body);
        }
    },

    addDynamicCss(css, type){
        type = type || EJS.strings.random();

        let $style  = EJS.pick('[data-acsb-dynamic-css="'+type+'"]');
        let content = EJS.elements.text($style);

        if( ! $style ) {
            $style = EJS.elements.create('style', {'data-acsb-dynamic-css' : type});
            EJS.elements.append($style, document.head);
        }

        if( ! content.includes(css) ) {
            $style.textContent = content+' '+css;
        }
    },

    fakeBodyClick(){
        const $span = EJS.elements.create('span');

        EJS.elements.append($span, document.body);
        EJS.elements.click($span);

        setTimeout(() => EJS.elements.remove($span), 300);
    },

    focusBody(){
        let $focuser = EJS.pick('.acsb-body-focuser');

        if( ! $focuser ) {
            $focuser = EJS.elements.create('div', {
                'tabindex'                    : '-1',
                'data-acsb'                   : 'focuser',
                'class'                       : 'acsb-body-focuser',
                'data-acsb-clear-focus-style' : 'true',
                'data-acsb-force-visible'     : 'true',
            });
        }

        EJS.elements.append($focuser, document.body, true);
        EJS.elements.focus($focuser);
        window.scrollTo(0, 0);

        setTimeout(() => EJS.elements.remove($focuser), 300);
    }
};

/* harmony default export */ const build_utilities = (Utilities);
// CONCATENATED MODULE: ./apps/devapp/src/js/build/lang.js
;

const Lang = {
    data      : null,
    guesser   : null,
    supported : ['en', 'he', 'es', 'fr', 'de', 'pt', 'it', 'tw', 'ru', 'ar', 'ua', 'nl', 'zh', 'ja'],

    get(str){
        return this.data && this.data[str] ? this.data[str] : str;
    },

    loadGuesser(){
        this.guesser = (() => {
            let models             = {
                af      :
                    "ie  didieen ingan  envan vang te n dverer e v ge bede  vende in tele dererset oor 'n'n at eersteordaarsie waes e saan onis in e ordee basirinonde wel  isande eeide dom ke  omeri woe gr dalewat void it rd  aalik wet d ope tngsse enduit st leenster ree aiesworg vstan s na prn o meal of  vierdleee k deiteerkik e re pn ve ie neeneliwer of datelnieikes etaage virheiir regedes vur proeleionwete l moe mdaasios d he toentardnge ooeurlleienn bekelinraa niontbesrdivoons n adeldignas sa grniskom uimenop insonaeres o son gig moe kors gesnalvole hgebruiangigeoetar wysligas n w asmetgs deut vaalerwditkenssekel huewedinn t seestikan pntwt ieni kan edoealiemegronte honsigeniergewn hor  maindne ek aatn ' skide tadatskagersoon ks i afteend eelhulneewoorikd vn mre artebrlankkeronaamtrestrkanreeleit ograhetevotandenist dobrutoeolgrskuikrwyminlgeg eg onstr vgtewaawe ansesiesevoeepagel hivinnses ws tteieitpre",
                ar      :
                    '                                                                                                                                                                                ',
                az      :
                    'lrin n larda an ir d ki  bin riarr dirnda kirinnnsiini ed qa t ba olasilrn yaan vndni arannd busi ib aq dniyan r n bsnv iril ninli de mbirn sri k  az sar bilzrbu danediindmanun r halanyyiyy il ner k b isna nunr  da ha binsinyanrb d m qdrli olarbaazcanl nla et galaycbayeftistn ineftlycaytc laildn tinldilikn hn moyuraqya ti aradaedmass na dlayiyilmamkn dti yinyunt azft i tllin ara  c g ko n oya danackeyiilmirllayliylubn rilrlunuvern  oni he ma on paaladeyi mimalmmtpary tl al mi sa ladakandardartayii ai qi yiliillisn on qolurlasts tantelyard me r ve yea kat badiyentetihsi iik la min nnu qarrantrxan a g t damab kdileraetmi bkilmiln rqlar srassiysontimyer k g so s te xaai barctidi erigrgnglhbihikiisilinmaimaqn kn tn vonuqanqzt xalyibyihzetzrb  mze br in ir pr ta to a oalianianlaqlazibri',
                bg      :
                    '                                                                                                                                                      ',
                ca      :
                    " dees de la  lael que el coents d qu i en er  a ls nt  pee la d enperci ar ue al  seestat  ests  s  praci unresmens edels as p reles l'na a l ca d'elsa pia ns con letata ci da ara a e noant alt ds i dita re a scoms citaonsstaica por a inprotre pauesambiondesun  mada s sa ian mb  aml de dva pretere ee ca mciaunai encitra teonaos t en el cca ciol p trparr lt ae paqunta soameerar ee sadan as q si haalstes va m icintes ls mi aor  moistectlitm s toir a tespranstrom l sst nts meno r dd'al'aatsrias t tasenrs eixtars nn ltale at part mi lltictenser aqinantra fstiol a qforuraersariintactl'e fir se ttorsi stereca r feis em n dcarbre fo vi analii pix elll mposorml li l acfers resseu e mensaraerisa ssius orttotll porora citanassn costnesraca uverontha  tiitzgrat c n a vrencatnal riquat l dot srmauali ss fn ps vte t i bactetammanl tial faic  veblea nalltzaies s'le ompr c ncrtiit rreficanyon  sar ptur",
                ceb     :
                    'ng sa  saangga nga ka ngan  an na ma nia sa non  pa sia ka m baonga iila mgmgaa piyaa aay ka alaingg mn sg nlan gina ni o sg pn n daag pagg syanayoo nsi  moa bg aailg bhana dasunagya manne pankon il laakaakoanabasko od yo  di ko uga ug kkanla lensurug  aiapaaw d sg dg gilenin iy sueneog ot abaahaas imo kia tagabaneronano kranronsilunausa usa gahianier ha i areryon puininakro to ure ed og wailimo n and o a ad du praroi sma n mulound taaraasaatoawadmue nedminamakmunniysanwa  tu una lbayigaikaitakinlismayos  arad aliamaersipaisamaonimt stin ak ap hiaboagpanoatag igangkagpai mihak slawor rs siytag al at ha hu ima hbu e sgmakaslagmonnahngor sra sabsamsulubauha lo readaakiayabahce d nlabpa paks ns stantawte umaura in lua cabiat awobatdaldlaeleg tg ugaygo habhini ei nkabkaplaylinnilpampaspropulta tonugaugmunt co gu mi pi tia oabuadladoaghagkao artbalcitdi dtodunentg egongugia ibaicein inuit kaa',
                cs      :
                    ' pr pon pro nana  pch  je nee  e se do ro st v  vepese ho sta to vy zaou  a to  byla ce e vistle pod p vle ne sje k by em ch odovaeddy enkonli n str zve  ka sve pit ldohorovroztervlm  kohodnispsk mi ob soa palibudednickkteku o sal ci e til ny n odlovrotsoun bu mo o astbylde ek ost m taes jedky lasm pnesnmranremrosho de kt ni si vat j k mi pretaktany vek ch li n pa eda dlednei pi vly mino no vpoltravalvnch pej ce kd lea sa zcene kedseklemikl latlo minovpraskuskstitavti ty vnv y ny s s v p dn n sp sa na tak dndohe be mejnenaestinim znalnoun oviovovrskstt tet udeza  pm  d ir zvaleanaveckdene zechen erhlai sirlovmu nebnico bo mpadpotravropr sedsi t ptictu t u pu vv vzvn m  bl br ho ja re s  z  zda vaniatoblabrieneeh vi nie ilairsitekovnoso oo poceodyohloliovoplapoprra ritrodry sd skossdtelu svatvevitvlay plnssen al',
                cy      :
                    "yn dd  yn y yddethth  i aetd ych od ol edd ga gw'r au ddiad  cy gy ei o iadyr an bodwed bo ddel n y amdi edion  we ym ar rhodd ca maaeloeddaen addaer h yallei  llam eu fodfydl yn gwynd ai gmaeneuos  ned idoddoln cr hwydwyrai ar in rth fy he me yr'n diaesth chaii did r yy b dy haadai bn ioterottesy gyd  ad mr uncyndauddyedoi ci withlaelland odarydtho a  draidainddodydfyngynholio o awchwybyboych br by di fe na o' peartbyddrogall elaimr n nr arhywn ynn on r caed gd od wgangwyn dn fn onedni o'rr dud weiwrt an cw da ni pa pr wyd edaidimeudgwaiddim irilwyn bnolr orwy ch er fo ge hy i' ro sa trbobcwycyfdiodyneithelhynichll mddn rondpror cr gredrhau au cu yy cymdymryw  ac be bl co osadwae af d pefneicen eoles fergelh ghodiedir lafn hna nydodoofyrddrierosstwtwyydayng at de go id oe  'chac achae'al bl d cd ldanddeddwdirdlaed elaelleneewngydhauhywi ai fiolionl al iliamedmonn sno oblolarefrn thiun ",
                da      :
                    'er en  deet derde for fo i at  atre det handeereingden me oggerter er siand afor  st ti enog ar il r sigetilke r eaf kke ma pom p ed ge endnget se sler skelsernsigne ligr dska vihar be sean ikkllegenn fstet at drin ikes ng verr bsenedemenr i he etig lanmednd rne da ine tmmeund ome ee mherle r ft fs te  soelet e koestske ble fektmarbrue ael ersretsomtteve  la ud veagee de hlsemanrugselser fi op prdt e in mr m an re saionnerrest igetn soneorbt hvisr  frbile kensindommt m hv jedanentftenin mie oe pn onte kuellnasorer hr kstastodagerikunldemerr ar vrekrert otortr f m toboechee vi divekabns oelse t v al bo unansdreirekborsoverent br  kaaldbetgt iskkalkomlevn dn iprir prbrsgtel s te vaal direjefisgsiscjerkerogsschst t kuge diag d ag iilll alskn aon samstrtetlet moartashatte bhanhavklakonn tnedr ora rrevesvil el kr ovanne uessfrag ag dintngsrdetra raktasiem gelgymholkanmnan hnskold',
                de      :
                    'en er  dederie  didiescheincheichdenin te ch  eiungn dnd  beveres  zueitgenund un au inchtit ten daent veand geine mir dhenng nde voe dbermenei mit stterrent d ereren sste see sht desistne aufe aiscon rte re wegesuch f sobeie enenr sachfrierparr  haas ert an pa sa sp wifortagzu dasreihe hrentesenvor scechetzheilann apd st staeselic ab sigte waitikein engeseitrazen im laartim llen wrderecsetstrteitte nie peheersg dnicvon al pran auserfr etzetruf ag alsar chsendge igeionls n mngsnisnt ords ssse tahle bedeem lenn iormprorkeruns dwahwerrk meageattellesthatn bollrafs atsc es fo gr jaabeaucbene negelien ur vre ritsag amagtahrbrade erdheritele n pn vor rbert sicwiebe is bchachie fe meriiedmmenerr astit at stis koarbds gann zr fr wranse t iweiwir br npam besd ddeue ge kefoet eutfenhselten rnpdr brhet wtz  fr ih ke maameangd seilel eraerhh di dkann fn lntsochragrd spdsprtio ar en kaarkass',
                en      :
                    " ththehe ed  to iner ingng  annd  ofandto of  coat on in  a d t hee tiones  rere hat sa st haherthatioor  ''en  whe sentn ts aas foris t t beld e ars  waut ve ll al  mae i fo's an est hi mo se prs tatest tereretednt verd a wise e cectns  only toley r t caatits all nohiss oerscone oearf te wwasonssta'' stin astot h weid th  itce  diaved hcouproad ollry d se m soillctite toreveg tit  ch dehavoulty ulduse alarech me outovewitys chit aithoth ab te wos srest wtine be hncet sy te pelehins inte lile  doaidheyne s w as fr trendsai el ne su't ay houivelecn't yebutd oo ty o ho mebe cale ehadple at bu lad bs hsayt i are fghthilighintnotren is pa shayscomn sr ariny a unn com thi miby d ie de nt o bye rerioldomewheyea grar itymplounoneow r ss ftat ba vobousamtimvotaboantds ialinemanmen or poampcandere llesny ot rectesthoicaildir ndeoseouspresteeraperr oredrie bo lealiarsorerics mstr faessie istlaturi",
                es      :
                    ' dede  laos la el es  qu coe las que elue en ent en senteresconest ess d lo prlos y do n in uncidelo d poa dacistate adopreto para ea lra al e ese proar ia o e reidadadtrapors p a a paracia pacomno  di inienn lad ante smena con un lasnci trcioierntotivn dn eor s cencernio a sicis e madose ae cempicaivol pn cr eta tere desaez mpro as a ca suion cu juan da eneerona recro tar al anbiee per l cn pompten emistnesntao cso teseral dl mlesntro sorer s qs ystoa aa raridese qiviliclo n aoneoraperpuer lre renunaa adacasereideminn sndoranrno ac ex go noa tabableeceectl al glidnsionsracriostruerust ha le mi mu ob pe pu soa ialeca ctoe ie uesoferficgobjo ma mplo pobis msa sepstestitadtody s ciandcesc dore meciecoesiintizal elarmienerorcrciriatictor as sice dene re tenderiespialidoinaincmito lomeplirass tsidsuptabuenuesuravo vor sa tiablaliasoastcorcticuedivducensetiimiinileco qoceortralrmarocrod',
                et      :
                    'st  kaon ja  va on ja kose astle es as is ud  sada ga  taajasta ku pea kestistks ta al avaid saamiste val etnud teinn se tua value kiselu ma mes miet ikulinad el imene nna ha in ke va sa tab e sesi la lie veksemalaslesrjutletsitusupauseustlet laliarjde etei tigailmkuili tul ei me saalatadusei nikpeas ks osalsnterul vi el nea jateendi kitakarkorl olt maaolistivadn ju j k ma po taasaksat ed erihoii ska la nnioidpairitus tl aa lo to vea eadaaidamianddlae jegagi gu i pidlik inijupkalkaskeskohs es pselsseui  pi siaruedaevafili vidainglme na ndanimoleotsriss lsiat p en mu ol p su v ha la pagaaleapsarve aelaikalleloomalpett kteetisvatnenn es fi via ia oaabaapalaaltamaanue pe tealelihaahinivakonku liklm minn toduoonpsari si stut et sti uleuurvasvee ki ni n raaigakaallatue eeisersi eii iisil imaitskkakuhl klatmajnduni niiomaoolrsoru rvas tseksonstet mtajtamudeuhovai ag os pa re',
                eu      :
                    'en an etata  etizan eko ide baa egiz es giarrbidrenrriarela sku beasuesksuntas izeanekoelaik kubn an itzaubiza zan era baskeran brretentze as koa aa galdanide deeea ek katkonn dontuan du naataegiestk enikntuntzskatua de di ez hea da kak akiakoartatuazibatberitzkunn ho briartetatunezar al ar haakuatzbaidardeadeleenemaerriakiarin inakianarnazneao eorrra stetekzakzekzio da em hi ho ma oiaguateaurbesdindirdutertez eziharherhitia ienikaio ireitek bk gkidkorldan onkoo aoinorirakrearierikrratanteatu unaundunturrutez ezko au eg gu ir ki ora ha jabeagiai ailaitapearideze eeareekerdereezaezkgirgithori eianiekilainkintiraitaituk nkapkoakumlanldemaimanmenn gn una ntao hoa oropenrdiri rtastateltettiktuetziumeun uztzeazenziazin az bi bu el ga jo mu ti un za zia na oa sa ta zabaadiakealaandar audbakbalbegbehbuldaudendu duie be de he oeakeetehaelkenbeteetigabgingo gusgutguzhauibeinbineioairuiuriziizkizo',
                fa      :
                    '                                                                                                                                                                                                  ',
                fi      :
                    'en in an on istta ja n tsa staaann p onssattat  ka pasi  jan kllan eenn vksiettnentaatt vaillitt jo kon s tuia  sua paa la llen mle ttena  ta veat  viutt saisesen ku n pste ola taismaati a ooitp pia valaineisiteltti sia kalliinkinstuomvii ma seen mua sestisslllokl n jn otoivenytt liainet inan an nollplotenustlln todenmenokisuos tuksvat al ke tea eliitaiteiis  plelli tideikkki ntaovaystyt  pyt ha pe ta naiki pi vnytnypalteeun  mea messkaupaistuut voi eta heishtei oiikitajoumisninnutsiassvan ty yhaksimeloime n en hn loinomeottouksitstitettieukk k ra tiajaasientigaiigitejankaakselaalanli njoletiiusij ova aantavaei erikankkulailislimatoispelsilstytajtavttutyys o ai pua ja laalarvassienimiimmitka keskueleelinllooneri t ot ptu valvuo ei he hy my voalialoanoastattaukelielyhtiikakenkkilysminmyohtomatusumiykst ls  ar eu hu naaatalkaluansarjennhankuun ysetsim',
                fr      :
                    "es  dede  leentle nt la s d laionon re  pae le d l'e p co prtions  enne quer llesur en atiue  po d'par a et it  qumenonste  ett d redes unie s l supou au  coner  noaite cse t du  du dce e eis n ds a soe re sourresssieur seemeestus surantiqus puneussl'aprotertreendrs  cee at pun  ma ru rousrisrussseansar come mirencentet l av mo teil me onttena pdanpasquis es s inistllenoupr'unaird'air n eropts  daa sas au denmaimisorioutrmesiotteux a dienn antrommortouvs csontesverre il m  sa vea raisavadi n pstiven miainencforitlaroirremrenrrorssiet atur pe tod'uellerrersideineissmesporransitst t rutivai lsi di n' ta casse tin ndeprerats mstetaitchui uros  es fo tr'adappauxe ettitilitnalopr dra rairors rtatut l afancaraartbrechdree fenslemn rn tndrnneonnposs ttiqure tualeandaveclacoue nembinsjoummerierssemstrt iuesuniuve de  ch do eu fa lo ne raarlattec ical al'ol'mmintaormou r urle",
                ha      :
                    " dada in an ya  wa yana ar a d mawa a aa ka s tawan a  ba kata a yn d ha na su sakinsa ata koa tsu  gaai  sha muwaiyama a wasayanka anishia ba ha camaba nann a muana yia g zai d kuakayi n kannke tar ciikin sko  raki ne a zmathaknine dnnaumandaa nadacikni rinunaarakumakk ce dumann yncisarakiawaci kankararin mandhi n tga owaashkamdanewansaaliami ab doancn rayai nsunuka al nea'acewcinmastakun abakowa rra  ja aen r dsamtsa ruce i aabiidamutn gn jsana haron i msuk ak jiyar'yakwamin 'yanebaninsruwi kn h adaken wshautu abaytananbinduke mn nokayinan faa ikkire za alaasuhani ymarranasaddarsgabirammau d tsabbabuagagarn b aaciaikam dune si bi wkaskokwam amamfbbadinfangwai swatanoaredaiirima' laalldamikami shetumuni an ai ke kidagmaimfano nsuo dsakum  bi gw kwjamyyaa jfa uta hu'a ansaaddahinniyr sbatdargani tntaokiomisala lkacllawadwarammdomr mrassai loatshalkatli lokn cnartinafabubi gisamak",
                haw     :
                    " kana  o ka  ma a  laa ia m i la anaai ia a oa ka ho k kea ai k ho iaua  na mee ke aau ke ma maiaku akahi ha ko e a l nome ku akakanno i aho ou  aii oa po lo aamaa n ani mhani iihokoune  iho iikionahoole e h heina waea akou ikahoe i lu a pahoie ierako u mkuamakoi kaii na ehinane oli hmeawahlake mo nu likaki a wmalhi e nu ohik kue lelera berineabeainalalo  pokon abolehe paumahva elakaunak oekeioia ieram oioa ehohoviehova uaunaarao sawao onauu nwa waihel ae alae ta aik hialeilalelalieikoloonu loauae oolahonmamnan auahalaunuaohooma aoii aluimamauikeapaeloliipoeaianoa ino moka'u ahoei ekaha lu neiholinoo eemaiwaoluadanaapa u kewahualamluao hooku h liahuamuui  il mo seeialaw hu ikaile pli lunuliio kiknohu e saaawaweenahalkollan le nea'uilokapokosa  pehoploaopepe  ad puaheaolia'lailohna'oomaauerikulwe akekeklaari ikukaklimnahnernuionoa udamkumlokmuaumawalwi 'i a'iaanaloetamu oheu pulauwa nuamo",
                hi      :
                    '                                                                                                                                                                                                               ',
                hr      :
                    'je  na pr pona  je zaijene  i ti da  ko neli  bi da u ma mo a nih za a sko i sa pkojproju se  goostto va  do toe ni p od rano akoka ni  ka se mo sti nimaja privatsta suatie pta tske inij trcijjennoso s izom troiliitipos ala ia oe sijainiprestrla og ovo svektnjeo podirva nialiminrija ta zatsivao tod ojera  hra ma uhrvim ke o ioviredrivte bi e ogodi dlekumizvodine uenejedji ljenogsu  a  el mi o a daluelei uizvktrlumo doriradstoa kanjavae kmennico joj oveskitvrunavor di no s  ta tvi ii okakroskovod sa ea badiamoenigovijuku o noraravrujsmotavtruu pve  in placibitde diemai mikaitjerki mogniknovnu ojioliplapodst stitratrevo  sm tdane zi tio istkonlo stvu sujeuste i to dr im liadaaftaniao arsatae temoi kinejemkovlikljimjenafnernihnjaogooizomepotranri roirtkskateru iu ovi vrt me ugak amadre ee ge mem emeenjenter ereergeurgo i bi zjetksio uodaonaprarebremroptriav ci eu re te uv veajuan ',
                hu      :
                    ' a  az szaz  meen  el hoek gy tt ettsze fes  kitet beet ter k shogmegogysztte t azeta mneknt sgszak  vaan ezera ta  miintkz iseszfelminnakorszer tea aa kis  cseleer mensi tekti  necsaentz ea talaerees lomltemonondrszszattezgny fo maai benel eneik jeltsll ha le lagyaliszy aztes  ale aegyelyforlatlt n aogaon re st sgt mn t lt jegi k akllamlenlsmss kvezsoz taa sa vaszatetkezletmagnemszz mt telt de gy k mo v ra ba famiat atoattbefdtagyahati slasndtrt szot ktrtsvansl  b eg or p p vebanekeekelervetefogi akisldntenyenyiok omos rnrssalt evlyargolagenytt tadelhfejhethozilljrksllomi ny ontrenresrins as esszzt  ez ka ke ko rea ha ndend efogadgatgyehelk eketlesmnndenisozzt bt it tattosvalz ozakd lyrasisz ak am es h ny takaartataztbbebercicsoem etietgali tiniistja kerki korkozl ljlyen vni plrorrlrls cs ps ss vsokt jt ttartelvat',
                id      :
                    'an  mekanangng  pemen di ke da seeng benganya teah beraka yadandi yann ppera mita pada ataadaya ta  inalaeriia a dn kam ga at eran dter kaa pariembn mri  baaanak ra  itaraelani aliranar erulaha basiawaebagann b hainimer la miandenawan saahalamn inda waa iduag mmi n arustelyak andalh di singminnggtakamibebdengatianih padrgasanua  dea targdareluhari ki mi pikain inyitumban tntupanpensahtantu a kbaneduekag dka kerndentaorausa du maa sai antbasendi dirakamlann sulial apaereertliamemrkasi talung aka aa waniaskentgarhaai iisakedmbeskatoruanuk uka ad toasaayabagdiadunerjmasna rekritsihus  bia hamadibersg shanik kemma n lnitr brjasa  ju or si tia yagaanyas culemeemuenyepaerberlgi h mi akelli melniaopartasiatahulaun unt at bu pu taagialuambbahbiser i tibeir ja k mkarlailallu mpangknjaor pa paspemrakriksebtamtemtoptukuniwar al ga ge ir ja mu na pr su unad adiaktannapobelbulderegaekeemaempeneenjesa',
                is      :
                    'a um  air i ur  ve  na    se er ogar og ver miinnnn  fyer fyr ek en ha heekk stki st i  ba me viig riryri umg flegleins  s ei ain kkir hr segieinga ingra sta va eannen milsemtjardi eithafillinsistlljndir ar esegun let bi el fo ge yfandaugbaubigegaelderfirfooginittn snginumod oodsinta tt viyfi e f hr s va ea em gi i fjarjrljam er reirstrarirustjundvegv  vav fj ko sleikendertessfjfurgirhsjrn eri tar arures br h kr le upa seggi sirtja kilenmemikn bnarnirnunr fr vrirt stit vti unauppa na al fr gra vallan da eie fa frag egergigt hanhefhelherhrai ai ei vi ikijnjrka krlkm hn angar lramru rrnsvovin b h h k mr af fa l r sk sv tea ba fa ha ka uafiagnarnastberefuennerbergfi g agariskerkkelanljlltma min vn nanndanduninnannunu r orbergisls t at htiltinuguvilygg s a brngnku at fi f ka ma no sa si ti ka ma ta a afaafsaldarf',
                it      :
                    ' dito la  dedi no  core ione d e le delne ti ell la unni i dper peent inonehe ta ziocheo da dna atoe s soi sllaa pli te  al cher  pa siconsta pra c seel ia si e p dae ii pontanoi callazinteon ntio s rii ao aun  anarearie ai eitamenri  ca il no poa santil in a laticiae cro annestglit  que lnta a como cra  le nealiereist ma  io lleme eraicaostprotaruna pida tat miattca mo nonparsti fa i  re suessinintoo lssittoa eamecolei ma o iza  sta aaleancanii miano ponisiotantti loi rociolionaonotra l a reriettlo nzaquestrtertta ba li teasse fenzfornnooloorirestor ci voa ial chie nliapreriauniver spimol al cransensoctic fi moa nce deiggigioitil slitll monolapacsimtituttvol ar fo ha saacce riremanntrratscotrotutva  do gi me sc tu ve via mbercanciti lieritlliminn pnatndao eo fo uoreoroortstotentivvanartccoci cosdale vi iilainol pn cnitoleomepo riosa  ce es tra bandataderensersgi ialinaittizilanlormil',
                kk      :
                    '                                                                                                                                     ',
                ky      :
                    '                                                                                                                                     ',
                la      :
                    'um us ut et is  et in qutur presttio auam em aut dientin dict e esur atiionst  utae qua dent  su siituuntrumia es ter rentiraes equiio proit peritaoneiciius cot dbuspram e noeditiaue ibu se ader  fiiliquet ide oru teali peaedcitm dt stattemtist pstite cumereium exratta conctionira s i cu saeninisnteeriomire s aminos ti uer ma uem snemt m mo po uigenictm iriss st auae dom at c geas e ie pne  cainequos p ale enturo tritusuitatuiniiqum postresura ac fua eantnesnimsuntrae as d pa uoecu om tuad cutomns q eiex icutoruid ip mee seraeruiamideips iua sdo e deiuicaim m cm utiu hocatistnaton ptiregrits tsicspe en spdiseliliqlismenmusnumpossio an grabiaccectri uan leeccetegranonse uenuis fa tratee cfilna ni puls fui at ccedami einalegnosoripecropstauiaeneiueiuisiut tt utibtit da nea dandegeequhomimulorm mmnindonero er esittumutua pbisbitcerctadomfuti signintmodndunitribrtitasund aberrersiteitim to p',
                lt      :
                    'as  pa kaai us os is  ne irir ti  prausinis ppasi  ta viiau ko sukaio pusi savo taialit io jo s kstaiai bu nuiusmo  poiens stas meuvokad i lato aisie kururi kuijoiaau metje  vaad  apand gr tikalasii piis is vinko ns buvs a gaaipavimaspritik reetujos daentoliparantarataramagalimoiko s at be  mintin tus n jodarip rei tedikasninteivie li secijgarlaiartlaurasno o kt  arjoviigapravis namenokiras tietikaintkomtamaugavories b steimko nuspolriasauapime ne sik ii nia iciojasakstiui amelieo tpieiu di pegriioslialins ds gta uot ja uauti sinom ojeravdlntio atojl  to vyar inalico vseisu  mi pidini lansi tus baasaataklaomitat an jialsenaj nuoperrigs mvalytaio rai kliknetn tistuoytis  sadaarido eikeisistlstma nessavsiotau kiaikaudiesoris rska geasteiget iamisamisnamomeiaabaaulikrk ntara tur madieei i tnasrinstotietuvvos p dareatseniliimakarms niar prods l o e pes ideik ja ',
                lv      :
                    'as  la pa nees  unun  ka vaar s p ar viis ai  noja ijaiemem tu tievielataksienkstiess arakatvtvi ja pika  irir ta  sats  ks  tiot s n ie taarparpie prk  at raam int  izjaslai naauties s ap ko stiekietjauus r tikbana  gacijs i uzjums vms let ku maj stas u tdiekaikasska ci dakurlietasa peststannesnies ds mval di es reno to umuvaii  vkumnu ries tm ad et mu s l beaudturvijvijubasgadi nikaos a vnototistsaiku a ak  toiedstuti u pvlci ogi ko pros rtju su vvisaunks strzina aadda darenaicikranasstu  ma necii sie iaju lasr tumsiebu citi ainama pusra  au se sla saiseiiecikuprs bs ksotd in li tranaesoikrmanne u k tuan av betbtim iskldnavrasri s gstidz aiarbcindasentgali plikm nekpatrtsi trauivei br pu skalsamaedzekaeuiegjiskamlstnkoliprepcrottsusil s  bi de me pa iaidajiktkatliclodmi ni prirdrgsimtru lutouz c t ce j sva tagaaizatuba ciedu dzidz',
                mk      :
                    '                                                                                                                                                 ',
                mn      :
                    '                             v        v  v           vv   v v           y     y           v    v     v  v       v                   v    vv                vv',
                no      :
                    'er en et  dedet i foril  fo meingom  ha ogter er ti stog tilne  vire  en sete or de kkeke ar ng r sene soe sderan somsteat ed r i av inmen at ko phar sierep ndeandelsetttteligt sdent iikkmedn srt serskat ekersenav lerr atene fr er tedeig  rehanllener bl frle  vee tlanmmenge be ik om  ellselstaver et sknteoneorer dske an ladelgenninr fr vse  poir jonmernenommsjo fl saernkomr mr orenvilalees n at f leblie ee ie vhetye  iral e oideitilitnnerant otaltattt  kaansasjge innkonlsepett dvi  utenteriolir pretrisstostrt a gaallapeg sillirakapnn oppr hrin br ope mertgerionkallsknes gj mi prange he reltenni sistjenkanlt nalrestorassdree be pmeln tnseortperregsjet pt v hv n vaannatoe aestiseiskoilordpolra rakssetoi grak eg eleg aigeighm en fn vndrnskrert mundletr  he no nyendeteflyg igheierindintlinn dn prnesaksiet btid al pa trag dige de kessholi dlagledn en in oprir bst  fe li ryairaked seasegi',
                ne      :
                    '                                                                                                                                               ',
                nl      :
                    "en de  deet an  heer  van dvaneenhet geoor eeder enij aargente ver in meaanden weat in  da teeerndetersten v vo ziingn hvoois  optie aaedeerders beemetenkenn e ni veentijnjn meeietn wng nie ischtdatereie ijkn brdear e be amett del ondt h ale wop ren di onal andbijzij bi hi wior r dt v wae hllert anghijmenn an zrs  ome oe vendestn tpar pa pr zee ge pn pordoudraascht eegeichienaatek lenn mngent overd wer ma midaae klijmern gn oom sent bwij hoe melegemhebpenude bo jadiee eelierkle prorij er zae densindke n knd nennter hs ds et z b  co ik ko ovekehouik itilanns t gt m do le zoamse zg vit je ls maan inkerkeuit ha ka mo re st toagealsarkartbene re sertezeht ijdlemr vrtet pzegzicaakaalag alebbech e tebberzft ge ledmstn noekr it ot wteltteuurwe zit af li uiak allautdooe ieneergetegesheejaajkekeekelkomleemoen sortrecs os vtegtijvenwaawel an au bu gr pl ti'' adedage lecheeleftgergt ig ittj dpperda",
                nr      :
                    'okula ngaa n ngna amaa iko  ukelelo elaanga ua kukuaba kuwa enzlelho ni ngoathphaethkhaanaisange nao nthoe ntheha esinyekwetjh kwise uma a nele hlaa elanbenndl noimiundungthinziye isiutho eebehetkutandsa elofunekosebbanuluakaeliwene i ameniba we nel wekuflwai n iszi  lokwalokelwgokonalekhi li ganbon iiingka o iakhanethuulakelmth imga  lendafannoki kendsi o waphhate ualakublunikho lezia lo usisnamemi abhulkus wosekazikhoiini uasiloliniuphuhlkhuno o yakoa bi eo ki l bemal yei indeiphmelekethakunngie kengo s yoso ma mkhjhaiswlwe ezdi a we akulunyumeza anyahlkuheen siiliitjzokihl eske hlohakpheluldlelukda ekaamb sezismbihondlaakujenzin bahami a boo aaliuseilesikhanwokokhhlunyasitanikuzo oufaswaindzaknislisgabmi  em koano elhwaufua ywo  inlimtlokatwakkanthwo zithndiyokyo mitmisaboekuhabinynanezekhealolu manhe ezokupubu zogamhelwanombamknzaolahumkukdu  lakomi yobui boduokwgap kabe  ilaluatje b',
                nso     :
                    'go  go le a le  dia gya lo  yaa mka  kala  t o ya ta kba et wa  mo e a b se ba ma boe gt a o a lo tna o la delodi a so go keleo ang t eo bmo e te megoeo e lngwse e bkgoela wa gae kagoo m kgga ditolot he do d yeanelelwe  tlthuona tht whutanatlawanabaola megware ongt olaoe so sa yaloseta pi aenga ao etho kegwe hahloedi laao  tsakahlaalaswa we bjo ogoragahabgobletke diksa  i oba hlthedira nithbjaye no  samollwati manolee etseo woreto at ethe ykantshgonnetanokarge ho lok sw nai bdipi ooka ge omko emopelnt e amellegtlhme etephea eo no iwalokonyabolodiwegte e nta anyyeokgapolangri it uto mmitiareo fha gatothikao h itsheathaleiriphaahl teohltha rebonlha phdin pero mi omii t faaroasei lne lalogokol wot iomo bemogmoklenilelwema utanseamoa o feokgja pannagekgi iapagetlonra aem yoatltlokeltel kh poe oa wenti ebo ganhetmala fotlutiogasenkwamaeekammekgejala ringlekseplagofewagg yrolepeekoboko padilog',
                pl      :
                    'ie nieem  ni po prdzi nae rzena emwie w  ego  byprzowai  do siowi pa zach egoa siej waym aniaeto  i  to tee p je z czybypanstakie jado  ch cz wiiaa ppow mili enizie ta wao a dy ak e w a  od stniarzyied ktodzcieczeia ielkto ptrci sp wyjaktakzy  moaproskitems tre mjesmy  roedzeliiej rza nalean e sestle o si pki  coadaczne te zentny prerzy s ko o acham e no tolipodzia go kaby iegiernorozspoychzd mnaczadzbiechomnio nostpraze a  soa mczaiemi obiy yo mu ma tacjci e bichkanmi mieocrowzenzyd al rea wdenedyi ko o wracmy ma ra sz tye jiskji ka m sno o zrezwa w ow  obecheczezyi wja konmwne ni nownympolpotyde dl sya sakialidlaiczku oczst strszytrzwiay pza  wtchcesziecim la o msa way nzaczec gda zardco dare rienm nm wmiamorawrdztantedtegwiwtey zznazoa rawibarcjiczdowe gdyiekje o dtawalwszzedwisa ba lu woalnarnba dzoe chodigiligm pmyo conirelskustey wystz w',
                ps      :
                    '                                                                                                                                                                                                                               ',
                pt      :
                    'de  deos as que coo o d quue  a do ent sea ds de aes  prra da  es pato  o em cono p doestnteo da rema par tearaida e adeis  um poa aa pdadno te  noaproal come ds a asa cer mens eaisntoresa sadoists pteme ce sia o so ao ce pstata traura di pear e eserumamosse  cao e naa edesontpor in maecto qrias csteverciadosicastr ao emdase titoizapretos nadanoesseveor rans ns ttur ac faa renserina sso si  braespmo nosro um a nao icolizmino nonspritentices tra magae niliimem ancinhantaspetivam anoarcasscere oeceemoga o mragso so au os saalica emaempiciidoinhissl dla licm cmaioncpecrams q ci en foa oamecarco dereirho io om orar asenter br exa uculdeve uha mprnceocaoverios osa semtesunivenzae ad al an mi mo ve  a ia qalaamoblicencolcosctoe me vedegsiasitaivandoo torer dralreas fsidtrovelvids  ap ar ce ou p so via factarrbilcame fe iel forlemlidlo m dmarndeo oomoortperpbr ureiremrosrressi',
                'pt-br' :
                    "eq ent enq eq ig eg ing  ididantete  es inadeag dadde ia ing br saestinqlinmo nq o aseq co li ni o a aa cadoasibradoriq ntao bor q nrassilstrta treus  a  ag an ca e  eq g  i  ir nc q  se veantar ciacone aeirel ig iliimoio ir ncio tro vel ap bo de fr tra ba ea ga vapoas busca cetcindese be setafrei aibuil irola liqnibntio co qos ra re reqs as ssansimtarto ult ba ci el em fi gr gu ia mu pe po re ri si su te via oa sabealcandaraargaribenboccarco do e fe ge le oem emoen es espexeficg ng sgraguaiasicaidiilaileinhl bl eleiloqmosmulnadniont ntoo go roceontoq posq vr br er ir sradranremrg riarios es pstastitigtiltraua ue va xeq '  ab ad ae al am aq ar b  bi bl bu cc ch di et ex fa ic il im is it ll m  me na ne ng nu ob ou pi qu ss st ti ub un v  x ' ca da fa ia na pa tabraciad adaadraerafealvambampan anaanganhanianoanqapaaq atiatoazib nbanbarbigbilbiqbliblubonbrebribsebucc fc icadcafcagcalcancc ",
                'pt-pt' :
                    'equentquequiguiuen linguqu uid co vede gueidanteo aa aadedadel ingmo nquntasequ nvel de o  sea cadoar estia inqio iqulino co portporta te  ag eq nc pi po saa da eantas ca ciadesdo gu imol pnciro rtustrtugu suesui  a  an ap ba bi ca fr gu in pe quaguapacondore fe geirfreho i aicaiguiroliqntio bo lo sor r ora reqs csimtarto ue uinult ci en ho mu ni re s  si sua sa vabeag al andanhapoatabanbenbicboicapcarcinco comctodeie be oe secaen er es exeficforgalgraiasichicoidiiliir iraisbla lismbomulna nhoniont o qo ro toc oioomboo os parpe r br er sranre recs as ssansboso statantratreu vugauguxeq ab ad al am aq ar au b  bo c  ch ct cu el es ex fa fi ga gr id ir ne ng nu ob oo pa ps pt r  ra ri ss st ta te tr ub un vi voa fa ia la ma oa rachaciactad afaageagralfalham ambamianaanganqaquaraarbarcargariarrasaatiautazib nbarbatberbigbilbiqbliboaboeborbsec ic lc pcadcamcasch chachechiciococcoicouctrcuecul',
                ro      :
                    ' de nde  a ul  con re e dea  di prle i areat conui  ii dii  cue aluiernte cu  laa cc dine cor ulune terla s tattre ac sestst t  ca ma pecuristmna di cnat cei aia in scu miatoaiie  re sea aintntrtruuri a fo paateinitulentminpreproa pe pe sei n parrnarultor in ro tr unal aleartce e ee fositanteomostromru strver ex naa flornisrearit al eu noacecerilenalpriri stasteie au da ju poar au eleereeriinan an cresse t atea c do fia satcome eurguvi siceilina recreprilrnertiurouve p ar o  su videcdreoaronspe rii ad gea ma rainalicarcatecueneeptextiloiu n porisecu pune ctiia ch guai aniceae fiscl alicliumarnicnt nulrist ct ptictidu aucr as dr fa nu pu tocradisenescgenit ivil dn dnd nu ondpenralrivrtestit dta to unixtendns s bl st uca ba ia lairastblabricheducdule measediespi li picaicir iunjudlailulmaimenni pusputra rairopsilti trau sua udeursn nt  lu mo s  sa sca uan atu',
                ru      :
                    '                                                                                                                                             ',
                sk      :
                    ' pr po ne a ch  na jen je  dona ova v to ho ou  toicktere  st zaostch sepro tee s ea p ktpre by o se kon pa sn n stiakoistmu ameentky la pod ve obom vat kostaem le a vby e pko eriktesa hoe vmertel ak sv zhlalaslo  taa nej li ne  saak aniateia sou soenie  rece e noritic vya tk noso sstrti uje splovo poliov naledene oku val am ro siniepoltra alalio vtor mo nici o nm  le pa s al atierooverovvnch ja z cke z odbylde dobneppraricspotak va ae tlitme nejno nco ta je aen estj mi slostu vfornoupospesi tom vla zly ormrisza zk k at ckdnodosdy jakkovny resrorstovan opda do e jhodlenn o zpozpriranu s abaj astit ktoo oobyodou pva n pm  in mia dovka nskln an bu sl tre mechedni nkcncov p a aj boa dideo ao dochpovsvo s kd vo vbudichil ilini nmod oslouhravrozst stvtu u avly s s v hl li mea me bh si pi sitildnemnovopouhlenoensmennesobote vedvly n ma mu vbezbyvcho',
                sl      :
                    'je  pr po je v  za napreda  daki ti ja ne  inin li no na ni  bijo  nenjee pi pprio pred doanjem ih  bo ki iz se soal  dee vi sko biliraove br obe bi novase za la  jaatiso ter taa sdele d dr oda nar jalji rit ka ko paa banie ser ililovo vtov ir ni voa jbi briitileto ntane  le teenieriitakatporproalike oliov prari uarve  toa ia vakoarjatedi do ga le lo mero sodaoropod ma mo sia pbode negaju ka ljeravta a oe te zi di vilalitnihodostito letvedvol la no vsa daguajadejdnjedagovguajagjemkonku nijomooipovrakrjastateva taj ed ejaentev i ii oijoistostskestr ra s  tr earnbo dri jiloizvjenljansko do iom oraovorazratakva venav me eameavie ie oekagrei tijail itekraljumorniko tobiodnranre stostvudiv ivan am sp st tu ve eajoaleapodaldrue jednejoeloestetjevaijiik im itvmobnapnekpolposratskititomtontratudtvev bvilvseit av gra zansastavtdane medsfori zkotmi nimo bo ood odloizot parpotrjeroitemval',
                so      :
                    'ka ay da  ayaaloo aan kaan in  inadamaaaba soalibadaddsoo naahaku ta  wayo a somayaa ba ku la ooiyashaa addanabnta da mankauu y iayaha raa dh qaa kalabaadoohadliyoom ha sha da ia naaree ey y kya  ee iyaa aaqgaalam bua ba mad agaamaiyola a ca leenintshewaxyee si uua haasalkdhagu heeii iramado ao kqay ah ca wuankashaxaeeden ga haan an snaanayo dtaau buxuwuxxuu ci do ho taa ga uanaayodhiiinlaglinlkao isanu sunauun ga xa xuaababtaq aqaaraarlcaacireegeelisakallahneyqaarlasadsiiu dwad ad ar di jo ra sa u  yia ja qaadaataayah aleamkarias ayebusdalddudiidu duued egegeyhayhiiidainejoolaalaymarmeen bn dn mno o bo loogoonrgash sidu qunkushxa y d bi gu is ke lo me mu qo uga ea oa wadiadoagual antarkasaawibtabuld adagdando e sgalgayguuh ehaligaihiiriiyekenladlidlshmagmunn hn ina o no woodoororaqabqorrabritrtas osabskato u au hu uud uguulsuudwaaxusy by qy syadyayyih aa bo br go ji mi of ti um wi xoa x',
                sq      :
                    't  tn pr p e sht n shse et  s t sehe j r dhe pa n p q dhnj m njshin  meq  poe ne tishm s me ht ka sie ke p i anar  nuundve  se s mnukparuaruk jo r ta  fen it minhetn eri shq d do ndsh n athqiist q gj ng tha ndo endimindir trat bri muartashqip koe medherije ka ngasi te  ksi ma tievehjeiramunon po re  prim lito tur  e vt  ku se des ga itijetndolishitje b z gjekanshknds  de kj ru viaragovkjoor r prtorugtetugoaliarrat d tht i pipizijnn noheshusht etika earethumnd ndrosholetimtosva  fa fia sheni nmarndoporrissa sistsumvizzit di mbaj anaatadre aeshimejeslarn sntepolr nranresrrtar a i at jo k rea kai akth hni ii mia mennisshmstrt kt nt s grkve ai ci ed ja kr qe ta vea pcilel ergjihtei tjenjitk dmnn tnyroripasra rierstoruajyrem ny ar du ga jedse ee zha hmeikainiiteithkohkraku limlisqnrns st dt ttirtnver j ba in tr zga aa ma tabr',
                sr      :
                    '                                                                                                                                               ',
                ss      :
                    ' ku lela ekua knga nga nngea llo  neetikwendze no l loelaemaentsi  kwtsii lwa lelkute kundni elofunesi sieletintfo tile khatsee lphaungi k emti sa  umisaelindlingsetwe isena angetfkheando n wentinyetfubena eutsletdzaimisekko lokeniye ba nkhebealoo klanga abaseb yehe lwakel te lakuswematiikhnekalakufi nokuatsmtshlawena t nagekuhlkubnguka akafutkankwa likuconkbananaulu se imakhumea ilestimulainilweza fo hul nohanli ipha stiskhuta dzibe emima endo tekea u kaanelekmelelwkunsislonutfanykhokulhlo baufuaphlune shalindiswo suseekwme ndvenguphhatne so lulnomte lolawunellu ha watmenete lwnemakozinkuhshabhagab inalemisteme eo ee twekdzeomewel luembnis ektsau lo ydleutelenswaphemkhntfukesitinye iwo aniphiwetsinnhlmalmbamfufu labsiktawno hlee uekiasealiulwve ekazelntabontekbo sigamaileuletfwmphumakupemtasidluishumtgeno wikeigahakabenetgankisndengiukhbekmo phuselelui tantdvoa yvo humlisdlagamivejenket',
                st      :
                    'ng ho  lele  ho tsa msa la  kaa h diya ka  yaa tengets ba moa l selo  bowa tsaa bna ba  e  a a k maangtsese o ta da sha so o le ho ye ttlatsholoe le mo bo esebebeelathuelee kanae b th hatsoo ao k wakgotswthoo hong lahutditane mea e tlolaedielodi ona kewan o a papatjhhlo sasheletabaloklaoeo a ao smanto  hla nisae dswesetpa  nao mg lhet kggotahaethre e ejhaphelanotlg klekitsekgsenao disg mothe aithhlae ske molpelg hhabbetsanatsmo lwawe alalenntsdipkapiso mmutoaloe nsi ta o wemoswatsiokebedthe pha ywenkenenahwane oreatlanohelmotbo g ti bkgahorngonanno o ntlhshwkelphaetjbonellg sgolthaaledikkolbak ntikao d teohlg y loti hisileg boko ethana omatohoodilelmeldinkaro ouo monhahte me  ito fnenhebingbolbelhlepuolaltlohalophebahatheoarobatko banleho ioletle fekgepanakeg eakaeko perike ymmeamalhaeha faebomohmaeeteaemotsahio putaokgntlpalgeti le fokaseplatahlboteselahlonakga f puaseg amorkannahbohe p',
                sv      :
                    'en  deet er tt om frar de att fing in at i detch an gen ant ssomte  octer halleoch sk sora r a meletnder  koon ansintn sna  en fr p st vaandntep skata  viderllrs omda krika nst hoas str dt fupp benger staltlr  avgerillng e sektadeeraersharll lldrinrnaskundinnligns  ma pr upageav ivaktildaornsonts ttakr sj tiavtberelsetakolmenn dt kvtar jukmann fninr irssjusso ra sachag bacdenettftehornbaollrnbstetil ef sia ae hed eftga ig it lermedn ind s tiv bl et fi sat dese agargetlanlssostr br ere retstat i ge he rea fallbosetslekletnernnanner frits ssenstotorvavygg ka s tr utad al aree ogonkomn an hngar hrent dtagtartrett f h sea da ia paleannarabyggt hanigtkanla n onomnskommr kr pr vs fs kt at pver bo br ku na ba edelenses finigem sn pngor r orbers rt s as nskrt otentioven al ja p  r  saa hbetckedrae fe iedaenoeressionjagm fne nnspror trarrivrtt et tustvadre ar by kr miarb',
                sw      :
                    ' wawa a ka m ku yaa wya ni  maka a una za ia  naikama alia n amilikwa kwini haameanai n zaa hemai mi ykuwla o wa yatasem laatichii wuwaakili ekaira nca sikikatnch ka kia bajiambra ri rikadamatmbamesyo zi da hi i kja kuttekwan bia aakaao asichaeseezake mojoja hia zendha ji mu shiwat bwakearabw i himbtikwakwal hu mi mk ni ra uma lateeshinaishkimo k ira ialaaniaq azihini aidiimaitarairaqsha ms seaframaanoea elefrigo i iifaiwaiyokuslialiomajmkuno tanuliutawen ala jaadaidariawaba fa ndengenyao yu wua umowazye  ut via da taifdi ereingkinndao noa taitoausautowasyakzo  ji mwa paiaamuangbikbo dele weneengichiriitiitoki kirko kuumarmbomilngingoo longsi ta taku yumuusiuu wam af ba li si zia vamiatuawierifanfurgeri zisiizoleambimwanyeo ho monirezsaasersintattistu uinukiur wi yar da en mp ny ta ul wea ca faisapoayobardhie aekeenyeonhaihanhiyhuri simwkalkwelaklammakmsane nguru salswate ti ukuumaunauru',
                tl      :
                    "ng ang na saan nansa na  ma caay n g anong gaat  paala sia nga g ng mitog cmansang singto ilaina di taagaiyaacag t atayaamalana aquia ca snag bag itan't  cuauag p nios 'y a m n la  lao nyan ayusacayon ya  ital apaatat nuanahaasapag gug ldi magabag aaraa pin anait si cusg buina tas n nhin hia'tali buganumaa dagcaqug d tuaonaricasi nniypina igcasiya'yyaoag ca hanilipansinualn snam lucanditguiy ngalhatnal isbagfra fr sua l coani bi daaloisaitamayo ssiluna in pil nnilo apatsact s uaaguailbindalg hndioonua  haindrans ntinuloengg finilahlo rairintong uinulono'yt a ara bad baycalgyailematn apaura tayy mantbani mnasnayno sti tiagsg gta uituno ib yaa uabiaticapig is la' do puapiayogosgullaltagtiltuny cy syonanoburibaisilamnacnatni ntood pa rgourg m adrastcaggaygsii pinolenlinm gmarnahto' dea hcatcauconiqulacmabminog parsal zaao dooipinodnteuhaula reilllitmacnito'tor orasumy p al mi umacoadaagdcab",
                tlh     :
                    "tlhe' gh i'  'eu'  viatla'  ghej  ho ch mu tlngameywi'be'an ch ganchulh ing'e'hinjatlhi da jao' ughaq cha poey  'a je'ej pang ad  qaoh eh ah ghaje  luholaw' jiongpu'aj vadw' ' jha'is tah' 'angh 'ponam lawmo'qu'hbeol vamaghmu'ahvbejoghuch' vachhug lo quchohvaij  lalu'vis ne pu so ta va'acdi'hu'lahmoh 'o' mdaqhahn hnehu'may'ghoh vmehoy  ma nu'meel  ba be de ng' th dhvioq  wa' l'wihmeli'uq  bobogdelh ph tichvil qe wiahbbanenghaqhohov viq ha ti' n' p'a'hwiighlo'y'  du no yu'mo'vadajdaseghhommucom otlus  bi tu' hchmh qhovnisqaruj ' q'chh mhmojihparwij hu' d'a etlh gh jh llodmaqochwa'yuq di le pe ya'dicheechih ijain j 'j mlhwpa' 'i mi qi ro ru'beanpghighuh bhayhchiq npuod paqqayrdasoh do me qo sa' c' g' s'luamlardas d pgmeh nhtai'vj jjijlenngmqanqmevajwiv mo ni'la'pu'quar armdwig pghdh chamhlahquiloiqaiqij pj tj vladlhomarmugpusq sq trghrmasovta'tintu'u'dvetyliyu' to'ohaqqartat aylaytet hajhar",
                tn      :
                    ' di lego le  gong  tsya  yasa tlh mo boa mlo tsa e o ta bwa  kaa ka tka a gengoloo yla  a a detsmo se  tl batsh maba a ltseso na elo seelee do llhoe tdi e g kgditkgoo kanglhae me ewe aneo me ke longsetwanelatsotlao de bolangwgweo babaatla p o a ao aotla so edirthuga  gashwotsakahabhwaagao ggantswanamol kehut meonalelitslaokgadikgot falet waoseno t hsweediatsa ne sokoothkwakar tha ealatiro ndipisagatti anobot nn halenaloanyaroitiirio ssennetke ho maiikaekato ithre g mhatbo g let emoamaisorolfa iwakanshesi ao g kwenlolo obositla ythelwae n laore mmko thae aeo lhebolha  poisii blan nai talene gonrisirabon sag yg gphaogamelro golo w kwi l titlologpor jaa f nehoklot pue yutog thomokg koo famegorta  pents khthogeladiareeteasemonheooroomonennelilenngntlaboogoaranseegoheluo mogsanularagkolte etlbat tepuoamoofelatatiolerabtsiiromanaelegalwera dintlesekingyo a o reaotusoo rerejwaaemlamlek jwgwamok',
                tr      :
                    'laren leran in  bi yaeride  kair ar ba de han arabir ve sailele ndeda  buanaininer ve  ylmayl olar n bndaayali as geindn kesilannlaak anenini n rnsan ko yemazbailirinalaz halnd da gelelmekigni biidenkarsi  ile yna yorek n s ibu e bim ki lenri sn son  taniniitanyan sinatnnkanr in elin ar  aninen yola aral e slikn dsin al danlne ya m na beadaalaamailmor s yen meatdi etikenla l oru g inande dmenun nea dat e ae gyar kuaydanediirini lemeeii ki yla aa yalkd edeel ndra ne sdre kereik imiiimasn hsryle ad fi gi sea karlaiyoklalnemneyrmestet unlver s te toa sakeklendkallimintruluunuyapye  ikat b ke kiardartaan inditi top b va nakicakey filisiklekurmanncenlenunrakk  en yoa glismakn gtiryas i yalebilbulet i diyekilma n en tnu olurlate ynk ay m o a aa batadergeli gi iillistldlu mekmlen onuoplranratrdrkesiysonta ttn',
                ts      :
                    " kuku na ka wa a n swa mya a k tiswihi la  ya le hia ta v vani  nandz maa h xia si nelei kanaa lngalo va le akaelairheka vuiwaa x kayi  waisasa ko ta ga wu wi tir ek mi nio yeloawuisiswai thlaa e ta ng laa yri eri rirhiekeumbu tndl yilani veswmbei la re kanglesulati yono wonalawxa nelyo leliko loamb a i y xaanewani sondfanendi ho lu kmbin'wke dyo falamnhlo songno  kou n haho okou hi mo n yonguo ku yatiu lvanuluandmbakumu vwo be ha riwdzasi  eno h hlo teyi ntilalokdzinge mualato a w byarhakutsawakrho'wa ndminlavtimleytikdletinmatlerletselhismellu ikaa angoengo x nkamusiwanienima  nhmi swoetitanmo hamiwe khhanlekntiunghakdzoete tsavahu fumkarvul wukulundi xnhuyisxikbisxi e yra hle huwekanoyena dsisolopfui wnyie nso ki funisotshkonnkuheli be hariimii eindvumntsimekommfuise mfhindlavutgani rbanbyamilintats dyu se xilekelkwa noi fasiza urio mrhae lin'etavoni akho woiki rau eo ezo yininkanyket",
                uk      :
                    '                                                                                                                                                        ',
                ur      :
                    '                                                                                                                                                                                                                          ',
                uz      :
                    '                                                                                                                               ',
                ve      :
                    'ha  vha mna  u a ntshwa a u nangavha ts dz khdzaa vya  yaa tho la  zw muedzvhuga shiza a k ngkha mahumne  ndo nlo dzishu haa do yndaelezwiahoangno  a elaa zhu shai n waanahi kano danoa hzwa th migana lsa handi u tandndiyo thedo ri vhoni ka urisi o tmbeo wanewe zo i te ni hsheusho kzi da a athu laa pzan i a slwaulai daka domisheditali  huiwa lui vhe  kaeloso ambavh sho vi klelu vdzou s fhmo nweo lumiwahisihela iveladztani maththiwi  urhatinele vheanya yhonisaalao aaluudiumb bvash te lilusnyahasledswahuso iumoonendetha itkhongomushake yea ivho mu nhinthomutayofhi satelhulhunuloithma  yolane v phgo i ao uhud pfukazhiuvhdzwingelwilawo mbou diteiswasie kndufheo hmelu bikabo guddzhkonifh tae duth hoi zwanulumadinwothanidiswitou bveetsu iadie mfhanahdalwin sisho inyamlayekaa fi uendi yaloi lusomulta delu k mbpha didadalio spfukhwe a ko nehenmasumeiniishudziraoniluknelisombadzuhomi szwonguaraunz',
                vi      :
                    "ng  th chg t nhng kh trnh  ccn tyty i tn t ngi  tich y ln  hi  ggiintii  gi le vichoho kh vhc pham hnchi i ncc  tchittin ngt  cc tc hnvi nag ci cn cn nt nv n ln ngc t h lnamn m  h l n qu tg mnmtii  lay e gh hi vi le l u i hnnhit t c m v ian cal mtv nht t a  bi ca canhcch cium tn  ho's avee'sel g nle'n vo cravs tthitraveln n  ba cu sa  c cchuhihuykhinhnhongronthuthtroy cy nin vng vcug itinngo tu cucvi ci ngni c c  an l ra s s ta kbic nc chg vgiagyhnhnh hci gi hi ki pinkhlpn kra rns t cthtrt u ny tnhy p  c m ai c sgh vhoahoinhm nmyn gngnho noa onp cs t y vo y n   cn n c  b c c c h k li m s t v v a bayc g shanhi sk m cn mn po boiquas thathtnvov v y bn ng su t ngc  tng du lu ta to t  a vao c vc du g lgi",
                xh      :
                    'la  kulo ngaa k ngoku kw uka nukuye a iyo elaelea unyewe wa amae niseababa ho enzo nngokubngeathfuno elelungubako eloezio kthekwana kweange ile ka esio y nae kethpha inkunnziandni ban ye nolwalun okanyzi li  neulua eeligoko lebeundisasebndo ezthoo ido beningkwindlunyalaa aeyoe ukan abthii ki no uo zelwsa sekayoheto oeka umhi bo so isiwenlweapha lya ekoana yokufiniimialiha awuwanentuththaza ulakho iianee aisouph leilezinnts siengnokonghlazwe elokaekilisazi lotsh amufuantiswo anguo s bainteniunewulhulseli euselanke nisemi li isiph ima oakamfu ziinkmalleymannyanekakhume koalotu i untuizwkelizii isi ganaseindi andinelalusisubokutmthkuslekmisnde zo weaniga ikosizno phue ehonondne ithkulgamgenpho izphehatkhuiinhanzo lu ulondaqo zikhelo m lwzisdleuhlmenolomeldelnzaokookwolukuknteswalawenk yai ygaqshaaqoe likhnkqule kaonkthuwo bonkupquba ykqudla eshe anolumbe iga zeo wakumgankete  olze kumemfesh',
                zu      :
                    'okula nga nga n kua kthi ukezie nukule lo hi wa  noa uelawe a ini elezinuthamaelophaingabaathandenzethesima lel um katheungngengothonyekweeniiziye  kwndlho a ena zi hetkane ue iundiseisindakhaba i knomfun ez izke beno eisazwekelka akanzio ne komakwa neanyanghlai umthkubo kanaaneikhebekutha  isaziulusebalaonkbani eazwwen abhana ai nimilanhatlwa nainiakhli ngunkenokumeekeelwyo aphkus es okiph immeli i lo in amkhoza gokseklunkunlweshasikkufhaka ythusa o ukhuayohule aalienglu ne  koeliubadlee eith yoa lnelmis sikula osislokgeno zi aemiumaekaalomaniswthao ilonso uphuhlntuzimmalindwez bao o yi weulapheo yileo lwo welga tu hleokwfan lekazaseanindebo ngiule emmeninyambmbiganifuo santhelikaonai lfut fuze u anhlnin zoendsigu kgabufaishushkuzno gamkuh yenyanezzisdlukatdlatsh seikekuqgu osiswalul ziimae lkupmo nzaasiko kumleksheumtunyyokwanwamameonglismkhahlaleuseo aalugapsi hlonjeomto wokhhe komi s',
            };
            let MAX_LENGTH         = 4096;
            let MIN_LENGTH         = 20;
            let MAX_GRAMS          = 300;
            let NAME_MAP           = {
                ab      : 'Abkhazian',
                af      : 'Afrikaans',
                ar      : 'Arabic',
                az      : 'Azeri',
                be      : 'Belarusian',
                bg      : 'Bulgarian',
                bn      : 'Bengali',
                bo      : 'Tibetan',
                br      : 'Breton',
                ca      : 'Catalan',
                ceb     : 'Cebuano',
                cs      : 'Czech',
                cy      : 'Welsh',
                da      : 'Danish',
                de      : 'German',
                el      : 'Greek',
                en      : 'English',
                eo      : 'Esperanto',
                es      : 'Spanish',
                et      : 'Estonian',
                eu      : 'Basque',
                fa      : 'Farsi',
                fi      : 'Finnish',
                fo      : 'Faroese',
                fr      : 'French',
                fy      : 'Frisian',
                gd      : 'Scots Gaelic',
                gl      : 'Galician',
                gu      : 'Gujarati',
                ha      : 'Hausa',
                haw     : 'Hawaiian',
                he      : 'Hebrew',
                hi      : 'Hindi',
                hmn     : 'Pahawh Hmong',
                hr      : 'Croatian',
                hu      : 'Hungarian',
                hy      : 'Armenian',
                id      : 'Indonesian',
                is      : 'Icelandic',
                it      : 'Italian',
                ja      : 'Japanese',
                ka      : 'Georgian',
                kk      : 'Kazakh',
                km      : 'Cambodian',
                ko      : 'Korean',
                ku      : 'Kurdish',
                ky      : 'Kyrgyz',
                la      : 'Latin',
                lt      : 'Lithuanian',
                lv      : 'Latvian',
                mg      : 'Malagasy',
                mk      : 'Macedonian',
                ml      : 'Malayalam',
                mn      : 'Mongolian',
                mr      : 'Marathi',
                ms      : 'Malay',
                nd      : 'Ndebele',
                ne      : 'Nepali',
                nl      : 'Dutch',
                nn      : 'Nynorsk',
                no      : 'Norwegian',
                nso     : 'Sepedi',
                pa      : 'Punjabi',
                pl      : 'Polish',
                ps      : 'Pashto',
                pt      : 'Portuguese',
                'pt-PT' : 'Portuguese (Portugal)',
                'pt-BR' : 'Portuguese (Brazil)',
                ro      : 'Romanian',
                ru      : 'Russian',
                sa      : 'Sanskrit',
                bs      : 'Serbo-Croatian',
                sk      : 'Slovak',
                sl      : 'Slovene',
                so      : 'Somali',
                sq      : 'Albanian',
                sr      : 'Serbian',
                sv      : 'Swedish',
                sw      : 'Swahili',
                ta      : 'Tamil',
                te      : 'Telugu',
                th      : 'Thai',
                tl      : 'Tagalog',
                tlh     : 'Klingon',
                tn      : 'Setswana',
                tr      : 'Turkish',
                ts      : 'Tsonga',
                tw      : 'Twi',
                uk      : 'Ukrainian',
                ur      : 'Urdu',
                uz      : 'Uzbek',
                ve      : 'Venda',
                vi      : 'Vietnamese',
                xh      : 'Xhosa',
                zh      : 'Chinese',
                'zh-TW' : 'Traditional Chinese (Taiwan)',
                zu      : 'Zulu',
            };
            let IANA_MAP           = {
                ab      : 12026,
                af      : 40,
                ar      : 26020,
                az      : 26030,
                be      : 11890,
                bg      : 26050,
                bn      : 26040,
                bo      : 26601,
                br      : 1361,
                ca      : 3,
                ceb     : 26060,
                cs      : 26080,
                cy      : 26560,
                da      : 26090,
                de      : 26160,
                el      : 26165,
                en      : 26110,
                eo      : 11933,
                es      : 26460,
                et      : 26120,
                eu      : 1232,
                fa      : 26130,
                fi      : 26140,
                fo      : 11817,
                fr      : 26150,
                fy      : 1353,
                gd      : 65555,
                gl      : 1252,
                gu      : 26599,
                ha      : 26170,
                haw     : 26180,
                he      : 26592,
                hi      : 26190,
                hr      : 26070,
                hu      : 26200,
                hy      : 26597,
                id      : 26220,
                is      : 26210,
                it      : 26230,
                ja      : 26235,
                ka      : 26600,
                kk      : 26240,
                km      : 1222,
                ko      : 26255,
                ku      : 11815,
                ky      : 26260,
                la      : 26280,
                lt      : 26300,
                lv      : 26290,
                mg      : 1362,
                mk      : 26310,
                ml      : 26598,
                mn      : 26320,
                mr      : 1201,
                ms      : 1147,
                ne      : 26330,
                nl      : 26100,
                nn      : 172,
                no      : 26340,
                pa      : 65550,
                pl      : 26380,
                ps      : 26350,
                pt      : 26390,
                ro      : 26400,
                ru      : 26410,
                sa      : 1500,
                bs      : 1399,
                sk      : 26430,
                sl      : 26440,
                so      : 26450,
                sq      : 26010,
                sr      : 26420,
                sv      : 26480,
                sw      : 26470,
                ta      : 26595,
                te      : 26596,
                th      : 26594,
                tl      : 26490,
                tlh     : 26250,
                tn      : 65578,
                tr      : 26500,
                tw      : 1499,
                uk      : 26520,
                ur      : 26530,
                uz      : 26540,
                vi      : 26550,
                zh      : 26065,
                'zh-TW' : 22,
            };
            let SINGLETONS         = [
                ['Armenian', 'hy'],
                ['Hebrew', 'he'],
                ['Bengali', 'bn'],
                ['Gurmukhi', 'pa'],
                ['Greek', 'el'],
                ['Gujarati', 'gu'],
                ['Oriya', 'or'],
                ['Tamil', 'ta'],
                ['Telugu', 'te'],
                ['Kannada', 'kn'],
                ['Malayalam', 'ml'],
                ['Sinhala', 'si'],
                ['Thai', 'th'],
                ['Lao', 'lo'],
                ['Tibetan', 'bo'],
                ['Burmese', 'my'],
                ['Georgian', 'ka'],
                ['Mongolian', 'mn'],
                ['Khmer', 'km'],
                ['Pahawh Hmong', 'hmn'],
            ];
            let UNKNOWN            = 'unknown';
            let BASIC_LATIN        = [
                'en',
                'ceb',
                'ha',
                'so',
                'tlh',
                'id',
                'haw',
                'la',
                'sw',
                'eu',
                'nr',
                'nso',
                'zu',
                'xh',
                'ss',
                'st',
                'tn',
                'ts',
            ];
            let EXTENDED_LATIN     = [
                'cs',
                'af',
                'pl',
                'hr',
                'ro',
                'sk',
                'sl',
                'tr',
                'hu',
                'az',
                'et',
                'sq',
                'ca',
                'es',
                'fr',
                'de',
                'nl',
                'it',
                'da',
                'is',
                'no',
                'sv',
                'fi',
                'lv',
                'pt',
                've',
                'lt',
                'tl',
                'cy',
                'vi',
            ];
            let ALL_LATIN          = BASIC_LATIN.concat(EXTENDED_LATIN);
            let CYRILLIC           = [
                'ru',
                'uk',
                'kk',
                'uz',
                'mn',
                'sr',
                'mk',
                'bg',
                'ky',
            ];
            let ARABIC             = ['ar', 'fa', 'ps', 'ur'];
            let DEVANAGARI         = ['hi', 'ne'];
            let PT                 = ['pt-BR', 'pt-PT'];
            let unicodeBlockTests  = {
                'Basic Latin'                             : /[\u0000-\u007F]/g,
                'Latin-1 Supplement'                      : /[\u0080-\u00FF]/g,
                'Latin Extended-A'                        : /[\u0100-\u017F]/g,
                'Latin Extended-B'                        : /[\u0180-\u024F]/g,
                'IPA Extensions'                          : /[\u0250-\u02AF]/g,
                'Spacing Modifier Letters'                : /[\u02B0-\u02FF]/g,
                'Combining Diacritical Marks'             : /[\u0300-\u036F]/g,
                'Greek and Coptic'                        : /[\u0370-\u03FF]/g,
                Cyrillic                                  : /[\u0400-\u04FF]/g,
                'Cyrillic Supplement'                     : /[\u0500-\u052F]/g,
                Armenian                                  : /[\u0530-\u058F]/g,
                Hebrew                                    : /[\u0590-\u05FF]/g,
                Arabic                                    : /[\u0600-\u06FF]/g,
                Syriac                                    : /[\u0700-\u074F]/g,
                'Arabic Supplement'                       : /[\u0750-\u077F]/g,
                Thaana                                    : /[\u0780-\u07BF]/g,
                NKo                                       : /[\u07C0-\u07FF]/g,
                Devanagari                                : /[\u0900-\u097F]/g,
                Bengali                                   : /[\u0980-\u09FF]/g,
                Gurmukhi                                  : /[\u0A00-\u0A7F]/g,
                Gujarati                                  : /[\u0A80-\u0AFF]/g,
                Oriya                                     : /[\u0B00-\u0B7F]/g,
                Tamil                                     : /[\u0B80-\u0BFF]/g,
                Telugu                                    : /[\u0C00-\u0C7F]/g,
                Kannada                                   : /[\u0C80-\u0CFF]/g,
                Malayalam                                 : /[\u0D00-\u0D7F]/g,
                Sinhala                                   : /[\u0D80-\u0DFF]/g,
                Thai                                      : /[\u0E00-\u0E7F]/g,
                Lao                                       : /[\u0E80-\u0EFF]/g,
                Tibetan                                   : /[\u0F00-\u0FFF]/g,
                Burmese                                   : /[\u1000-\u109F]/g,
                Georgian                                  : /[\u10A0-\u10FF]/g,
                'Hangul Jamo'                             : /[\u1100-\u11FF]/g,
                Ethiopic                                  : /[\u1200-\u137F]/g,
                'Ethiopic Supplement'                     : /[\u1380-\u139F]/g,
                Cherokee                                  : /[\u13A0-\u13FF]/g,
                'Unified Canadian Aboriginal Syllabics'   : /[\u1400-\u167F]/g,
                Ogham                                     : /[\u1680-\u169F]/g,
                Runic                                     : /[\u16A0-\u16FF]/g,
                'Pahawh Hmong'                            : /[\u16B0-\u16B8]/g,
                Tagalog                                   : /[\u1700-\u171F]/g,
                Hanunoo                                   : /[\u1720-\u173F]/g,
                Buhid                                     : /[\u1740-\u175F]/g,
                Tagbanwa                                  : /[\u1760-\u177F]/g,
                Khmer                                     : /[\u1780-\u17FF]/g,
                Mongolian                                 : /[\u1800-\u18AF]/g,
                Limbu                                     : /[\u1900-\u194F]/g,
                'Tai Le'                                  : /[\u1950-\u197F]/g,
                'New Tai Lue'                             : /[\u1980-\u19DF]/g,
                'Khmer Symbols'                           : /[\u19E0-\u19FF]/g,
                Buginese                                  : /[\u1A00-\u1A1F]/g,
                Balinese                                  : /[\u1B00-\u1B7F]/g,
                'Phonetic Extensions'                     : /[\u1D00-\u1D7F]/g,
                'Phonetic Extensions Supplement'          : /[\u1D80-\u1DBF]/g,
                'Combining Diacritical Marks Supplement'  : /[\u1DC0-\u1DFF]/g,
                'Latin Extended Additional'               : /[\u1E00-\u1EFF]/g,
                'Greek Extended'                          : /[\u1F00-\u1FFF]/g,
                'General Punctuation'                     : /[\u2000-\u206F]/g,
                'Superscripts and Subscripts'             : /[\u2070-\u209F]/g,
                'Currency Symbols'                        : /[\u20A0-\u20CF]/g,
                'Combining Diacritical Marks for Symbols' : /[\u20D0-\u20FF]/g,
                'Letterlike Symbols'                      : /[\u2100-\u214F]/g,
                'Number Forms'                            : /[\u2150-\u218F]/g,
                Arrows                                    : /[\u2190-\u21FF]/g,
                'Mathematical Operators'                  : /[\u2200-\u22FF]/g,
                'Miscellaneous Technical'                 : /[\u2300-\u23FF]/g,
                'Control Pictures'                        : /[\u2400-\u243F]/g,
                'Optical Character Recognition'           : /[\u2440-\u245F]/g,
                'Enclosed Alphanumerics'                  : /[\u2460-\u24FF]/g,
                'Box Drawing'                             : /[\u2500-\u257F]/g,
                'Block Elements'                          : /[\u2580-\u259F]/g,
                'Geometric Shapes'                        : /[\u25A0-\u25FF]/g,
                'Miscellaneous Symbols'                   : /[\u2600-\u26FF]/g,
                Dingbats                                  : /[\u2700-\u27BF]/g,
                'Miscellaneous Mathematical Symbols-A'    : /[\u27C0-\u27EF]/g,
                'Supplemental Arrows-A'                   : /[\u27F0-\u27FF]/g,
                'Braille Patterns'                        : /[\u2800-\u28FF]/g,
                'Supplemental Arrows-B'                   : /[\u2900-\u297F]/g,
                'Miscellaneous Mathematical Symbols-B'    : /[\u2980-\u29FF]/g,
                'Supplemental Mathematical Operators'     : /[\u2A00-\u2AFF]/g,
                'Miscellaneous Symbols and Arrows'        : /[\u2B00-\u2BFF]/g,
                Glagolitic                                : /[\u2C00-\u2C5F]/g,
                'Latin Extended-C'                        : /[\u2C60-\u2C7F]/g,
                Coptic                                    : /[\u2C80-\u2CFF]/g,
                'Georgian Supplement'                     : /[\u2D00-\u2D2F]/g,
                Tifinagh                                  : /[\u2D30-\u2D7F]/g,
                'Ethiopic Extended'                       : /[\u2D80-\u2DDF]/g,
                'Supplemental Punctuation'                : /[\u2E00-\u2E7F]/g,
                'CJK Radicals Supplement'                 : /[\u2E80-\u2EFF]/g,
                'KangXi Radicals'                         : /[\u2F00-\u2FDF]/g,
                'Ideographic Description Characters'      : /[\u2FF0-\u2FFF]/g,
                'CJK Symbols and Punctuation'             : /[\u3000-\u303F]/g,
                Hiragana                                  : /[\u3040-\u309F]/g,
                Katakana                                  : /[\u30A0-\u30FF]/g,
                Bopomofo                                  : /[\u3100-\u312F]/g,
                'Hangul Compatibility Jamo'               : /[\u3130-\u318F]/g,
                Kanbun                                    : /[\u3190-\u319F]/g,
                'Bopomofo Extended'                       : /[\u31A0-\u31BF]/g,
                'CJK Strokes'                             : /[\u31C0-\u31EF]/g,
                'Katakana Phonetic Extensions'            : /[\u31F0-\u31FF]/g,
                'Enclosed CJK Letters and Months'         : /[\u3200-\u32FF]/g,
                'CJK Compatibility'                       : /[\u3300-\u33FF]/g,
                'CJK Unified Ideographs Extension A'      : /[\u3400-\u4DBF]/g,
                'Yijing Hexagram Symbols'                 : /[\u4DC0-\u4DFF]/g,
                'CJK Unified Ideographs'                  : /[\u4E00-\u9FFF]/g,
                'Yi Syllables'                            : /[\uA000-\uA48F]/g,
                'Yi Radicals'                             : /[\uA490-\uA4CF]/g,
                'Modifier Tone Letters'                   : /[\uA700-\uA71F]/g,
                'Latin Extended-D'                        : /[\uA720-\uA7FF]/g,
                'Syloti Nagri'                            : /[\uA800-\uA82F]/g,
                'Phags-pa'                                : /[\uA840-\uA87F]/g,
                'Hangul Syllables'                        : /[\uAC00-\uD7AF]/g,
                'High Surrogates'                         : /[\uD800-\uDB7F]/g,
                'High Private Use Surrogates'             : /[\uDB80-\uDBFF]/g,
                'Low Surrogates'                          : /[\uDC00-\uDFFF]/g,
                'Private Use Area'                        : /[\uE000-\uF8FF]/g,
                'CJK Compatibility Ideographs'            : /[\uF900-\uFAFF]/g,
                'Alphabetic Presentation Forms'           : /[\uFB00-\uFB4F]/g,
                'Arabic Presentation Forms-A'             : /[\uFB50-\uFDFF]/g,
                'letiation Selectors'                     : /[\uFE00-\uFE0F]/g,
                'Vertical Forms'                          : /[\uFE10-\uFE1F]/g,
                'Combining Half Marks'                    : /[\uFE20-\uFE2F]/g,
                'CJK Compatibility Forms'                 : /[\uFE30-\uFE4F]/g,
                'Small Form letiants'                     : /[\uFE50-\uFE6F]/g,
                'Arabic Presentation Forms-B'             : /[\uFE70-\uFEFF]/g,
                'Halfwidth and Fullwidth Forms'           : /[\uFF00-\uFFEF]/g,
                Specials                                  : /[\uFFF0-\uFFFF]/g,
            };
            let findRuns           = text => {
                let relevantRuns = {};

                for( let key in unicodeBlockTests ) {
                    let charCount     = text.match(unicodeBlockTests[key]);
                    relevantRuns[key] = (charCount ? charCount.length : 0) / text.length;
                }

                return relevantRuns;
            };
            let identify           = (text, callback) => {
                let scripts = findRuns(text);

                if( scripts['Hangul Syllables']+
                    scripts['Hangul Jamo']+
                    scripts['Hangul Compatibility Jamo'] >=
                    0.4 ) {
                    callback.apply(undefined, ['ko']);
                    return;
                }

                if( scripts['Greek and Coptic'] >= 0.4 ) {
                    callback.apply(undefined, ['el']);
                    return;
                }

                if( scripts['Hiragana']+
                    scripts['Katakana']+
                    scripts['Katakana Phonetic Extensions'] >=
                    0.2 ) {
                    callback.apply(undefined, ['ja']);
                    return;
                }

                if( scripts['CJK Unified Ideographs']+
                    scripts['Bopomofo']+
                    scripts['Bopomofo Extended']+
                    scripts['KangXi Radicals'] >=
                    0.4 ) {
                    callback.apply(undefined, ['zh']);
                    return;
                }

                if( scripts['Cyrillic'] >= 0.4 ) {
                    check(text, CYRILLIC, callback);
                    return;
                }

                if( scripts['Arabic']+
                    scripts['Arabic Presentation Forms-A']+
                    scripts['Arabic Presentation Forms-B'] >=
                    0.4 ) {
                    check(text, ARABIC, callback);
                    return;
                }

                if( scripts['Devanagari'] >= 0.4 ) {
                    check(text, DEVANAGARI, callback);
                    return;
                }

                for( let i = 0, l = SINGLETONS.length; i < l; i++ ) {
                    if( scripts[SINGLETONS[i][0]] >= 0.4 ) {
                        callback.apply(undefined, [SINGLETONS[i][1]]);
                        return;
                    }
                }

                if( scripts['Latin-1 Supplement']+
                    scripts['Latin Extended-A']+
                    scripts['IPA Extensions'] >=
                    0.4 ) {
                    check(text, EXTENDED_LATIN, latinLang => {
                        if( latinLang === 'pt' ) {
                            check(text, PT, callback);
                        } else {
                            callback.apply(undefined, [latinLang]);
                        }
                    });
                    return;
                }

                if( scripts['Basic Latin'] >= 0.15 ) {
                    check(text, ALL_LATIN, callback);
                    return;
                }

                callback.apply(undefined, [UNKNOWN]);
            };
            let check              = (sample, langs, callback) => {
                if( sample.length < MIN_LENGTH ) {
                    callback.apply(undefined, [UNKNOWN]);
                    return;
                }

                let scores = {};
                let model  = createOrderedModel(sample);
                for( let i = 0, l = langs.length; i < l; i++ ) {
                    let lkey = langs[i].toLowerCase();

                    let knownModel = createKnownModel(lkey) || null;

                    if( ! knownModel ) {
                        continue;
                    }

                    scores[lkey] = distance(model, knownModel);
                }

                let scoresArr = [];
                for( let index in scores ) {
                    scoresArr.push([index, scores[index]]);
                }

                if( scoresArr.length === 0 ) {
                    callback.apply(undefined, [UNKNOWN]);
                    return;
                }

                let sortedScores = scoresArr.sort((objA, objB) => objA[1]-objB[1]);
                callback.apply(undefined, [sortedScores[0][0]]);
            };
            let createOrderedModel = content => {
                let trigrams       = {},
                    i              = 0,
                    l              = 0,
                    sortedTrigrams = [];

                content = content.toLowerCase();

                let contentArr = content.split('');
                for( i = 0, l = contentArr.length-2; i < l; i++ ) {
                    let trigramKey =
                            contentArr[i]+contentArr[i+1]+contentArr[i+2]+'';
                    if( ! trigrams[trigramKey] ) {
                        trigrams[trigramKey] = 1;
                    } else {
                        trigrams[trigramKey] += 1;
                    }
                }

                for( i in trigrams ) {
                    sortedTrigrams[sortedTrigrams.length] = [i, trigrams[i]];
                }

                return sortedTrigrams.sort((objA, objB) => objB[1]-objA[1]);
            };
            let knownModelCache    = {};
            let createKnownModel   = key => {
                if( knownModelCache[key] ) {
                    return knownModelCache[key];
                }

                let data = models[key];
                if( ! data ) {
                    return {};
                }

                let dataArr    = data.match(/([\s\S]{1,3})/g);
                let knownModel = {};
                for( let i = 0, l = dataArr.length; i < l; i++ ) {
                    knownModel[dataArr[i]] = i;
                }

                knownModelCache[key] = knownModel;

                return knownModel;
            };
            let distance           = (model, knownModel) => {
                let dist = 0;

                for( let i = 0, l = model.length; i < l; i++ ) {
                    if( knownModel[model[i][0]] ) {
                        dist += Math.abs(model[i][1]-knownModel[model[i][0]]);
                    } else {
                        dist += MAX_GRAMS;
                    }
                }

                return dist;
            };

            return {
                detect : (text, callback) => {
                    if( ! text ) {
                        callback.apply(undefined, [UNKNOWN]);
                        return;
                    }

                    text = text.substr(0, MAX_LENGTH).replace(/[\u0021-\u0040]/g, '');

                    identify(text, callback);
                },
                info   : (text, callback) => {
                    this.detect(text, language => {
                        if( language === UNKNOWN ) {
                            callback.apply(undefined, [[UNKNOWN, UNKNOWN, UNKNOWN]]);
                            return;
                        }

                        callback.apply(undefined, [
                            [language, IANA_MAP[language], NAME_MAP[language]],
                        ]);
                    });
                },
                code   : (text, callback) => {
                    this.detect(text, language => {
                        if( language === UNKNOWN ) {
                            callback.apply(undefined, [-1]);
                            return;
                        }

                        callback.apply(undefined, [IANA_MAP[language]]);
                    });
                },
                name   : (text, callback) => {
                    this.detect(text, (language) => {
                        if( language === UNKNOWN ) {
                            callback.apply(undefined, [UNKNOWN]);
                            return;
                        }

                        callback.apply(undefined, [NAME_MAP[language]]);
                    });
                },
            };
        })();
    },

    getDocLang(){
        let language = 'en';
        let content  = '';

        if( ! this.guesser ) {
            this.loadGuesser();
        }

        for( let $el of EJS.picks('h1, h2, h3, p, li, nav, header, a, div') ) {
            if( $el.closest('[data-acsb]') || build_utilities.isHiddenBySize($el) || build_utilities.isHiddenByStyle($el) ) {
                continue;
            }

            content = content+' '+EJS.elements.text($el).replace(/\s{2,}/g, '').replace(/\'/g, '"');

            if( content.length >= 500 ) {
                break;
            }
        }

        content = content.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());

        this.guesser.detect(content, result => language = result === 'unknown' ? language : result);

        if( ! ['en', 'he', 'es', 'de', 'it', 'fr', 'ru', 'ar', 'ja', 'zh', 'pt', 'nl'].includes(language) ) {
            language = 'en';
        }

        return language;
    }
}

/* harmony default export */ const build_lang = (Lang);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/build/framer.js
;



const Framer = {
    init(){
        if( window.self !== window.top ) {
            this.processChild();
        } else {
            this.processParent();
        }
    },

    bindFrames($frames = EJS.picks('iframe')){
        for( let $frame of $frames ) {
            this.frameReporter($frame);

            EJS.events.on($frame, 'load', () => {
                setTimeout(() => this.frameReporter($frame), 500);
            });
        }
    },

    processParent(){
        EJS.events.on(window, 'message', msg => {
            if( msg.data.acsbChildFrameReady ) {
                this.frameReporter({isWindow : true, window : msg.source});
            }

            if( msg.data.acsbChildFrameProcessing ) {
                for( let $frame of EJS.picks('iframe[src="'+msg.origin+'"]') ) {
                    EJS.elements.attrs($frame, {'data-acsb-child-frame' : 'true', 'tabindex' : '0'});
                    EJS.elements.attrs($frame, ['aria-hidden', 'data-acsb-force-unnavigable'], true);

                    if( this.previousElementSibling
                        && this.previousElementSibling.getAttribute('data-acsb-iframe-explainer') === 'true' ) {
                        EJS.elements.remove($frame.previousElementSibling);
                    }
                }
            }
        });
    },

    frameReporter(arg) {
        if( Object.keys(state.actions).length > 0 ) {
            for( let k in state.actions ) {
                const obj = {
                    acsbActionChange : true,
                    action           : k,
                    type             : state.actions[k].enabled ? 'enabled' : 'disabled',
                    options          : state.actions[k].options,
                };

                if( arg.isWindow ) {
                    arg.window.postMessage(obj, '*');
                } else {
                    arg.contentWindow.postMessage(obj, '*');
                }
            }
        }

        EJS.events.on(window, config.events.actionEnabled+' '+config.events.actionDisabled, e => {
            const obj = {
                acsbActionChange : true,
                type             : e.type === config.events.actionEnabled ? 'enabled' : 'disabled',
                action           : e.detail.action,
                options          : e.detail.options,
            };

            if( arg.isWindow ) {
                arg.window.postMessage(obj, '*');
            } else if( arg.contentWindow ) {
                arg.contentWindow.postMessage(obj, '*');
            }
        });
    },

    processChild(){
        state.canStore     = false;
        state.isChildFrame = true;

        document.body.classList.add('acsb-page-iframe');
        window.top.postMessage({acsbChildFrameReady : true}, '*');

        EJS.events.on(window, 'message', msg => {
            if( ! msg.data.acsbActionChange ) {
                return;
            }

            window.top.postMessage({acsbChildFrameProcessing : true, data : msg.data}, '*');
            const type = msg.data.type === 'enabled' ? 'enable' : 'disable';

            if( msg.data.options.percent ) {
                if( msg.data.options.decrease ) {
                    actions.range.update(msg.data.action, msg.data.options, false, true, true);
                } else {
                    actions.range.update(msg.data.action, msg.data.options, false, false, true);
                }
            } else {
                if( msg.data.options.color ) {
                    actions.coloring[type](msg.data.action, msg.data.options, false, true);
                } else {
                    actions[type](msg.data.action, msg.data.options, false, true);
                }
            }
        });
    }
}

/* harmony default export */ const framer = (Framer);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/build/binder.js
;




const Binder = {
    interval   : null,
    observing  : false,
    processing : false,

    init(){
        if( this.observing ) {
            return;
        }

        this.observing = true;
        this.initObserver();
        this.resetInterval();

        EJS.events.on(window, 'popstate'+' '+config.events.domChanged, () => {
            if( (state.actions.accessMode && state.actions.accessMode.enabled)
                || Object.keys(state.actions).length < 1 ) {
                return;
            }

            const throttling = setTimeout(() => {
                this.processing = true;
                this.rebind(false);
                clearTimeout(throttling);
            }, 500);
        });
    },

    rebind(rebindAccessMode){
        for( let action in state.actions ) {
            const obj = state.actions[action];

            if( ! obj.enabled || (! rebindAccessMode && ['screenReader', 'keyNav', 'accessMode'].includes(action)) ) {
                continue;
            }

            if( adjustments[action] && adjustments[action].rebind ) {
                adjustments[action].rebind(obj.options);
                continue;
            }

            if( adjustments[obj.options.actionGroup] && obj.options.actionGroup.length > 3 && adjustments[obj.options.actionGroup].rebind ) {
                adjustments[obj.options.actionGroup].rebind(obj.options);
                continue;
            }

            if( obj.options.color && obj.options.color.length > 3 && actions.coloring && actions.coloring.rebind ) {
                actions.coloring.rebind(obj.options);
                continue;
            }

            if( obj.options.percent && obj.options.cssProperty && actions.range.rebind ) {
                actions.range.rebind(obj.options);
                continue;
            }
        }

        setTimeout(() => {
            this.processing = false;
            this.resetInterval();
        }, 1000);
    },

    resetInterval(){
        clearInterval(this.interval);
        this.interval = setInterval(() => {
            if( ! this.processing ) {
                this.processing = true;
                this.rebind();
            }
        }, 30000);
    },

    initObserver(){
        let $changes     = [];
        let throttler    = [];
        let clicksInRow  = 0;
        let clickProcess = false;
        let styleChanged = false;
        let newElements  = false;
        let liveElements = false;

        EJS.events.on(document, 'acsbHit', e => {
            if( ! e.target.closest('[data-acsb-clickable="true"]') ) {
                return;
            }

            clicksInRow = clicksInRow+1;
            setTimeout(() => clicksInRow = 0, 500);

            if( clickProcess || clicksInRow > 1 || typeof e.target.closest !== 'function' ) {
                return;
            }

            clickProcess = true;
            setTimeout(() => clickProcess = false, 1000);
        });
        EJS.events.on(document, 'DOMNodeInserted', e => {
            if( e.target.nodeType !== 1
                || e.target.closest('[data-acsb], [data-acsb-sr-only]')
                || ['BODY', 'SCRIPT', 'STYLE'].includes(e.target.tagName)
                || $changes.includes(e.target)
                || throttler.includes(e.target) ) {
                return;
            }

            newElements = true;
            if( e.target.closest('[aria-live]') ) {
                liveElements = true;
            }

            $changes.push(e.target);
            throttler.push(e.target);
        });

        new MutationObserver(records => {
            for( let record of records ) {
                if( record.target.nodeType !== 1 || record.target.acsbIgnoreChange
                    || record.type !== 'attributes'
                    || record.target.closest('[data-acsb]')
                    || $changes.includes(record.target)
                    || throttler.includes(record.target) ) {
                    continue;
                }

                if( ['class', 'style'].includes(record.attributeName)
                    || (record.attributeName.substr(0, 5) === 'data-'
                        && record.attributeName.substr(0, 9) !== 'data-acsb') ) {
                    if( record.attributeName === 'style' ) {
                        styleChanged = true;
                    }

                    if( record.target.getAttribute('aria-live') || record.target.closest('[aria-live]') ) {
                        liveElements = true;
                    }

                    $changes.push(record.target);
                    throttler.push(record.target);
                }
            }
        }).observe(document, {
            attributes        : true,
            subtree           : true,
            childList         : false,
            attributeOldValue : false,
        });

        setInterval(() => throttler = [], 1000);
        setInterval(() => {
            if( $changes.length < 1 ) {
                return;
            }

            EJS.events.trigger(window, config.events.domChanged, {
                $elements    : $changes,
                liveElements : liveElements,
                clickProcess : clickProcess,
                styleChanged : styleChanged,
            });

            $changes     = [];
            liveElements = false;
            styleChanged = false;
        }, 100);
    }
}

/* harmony default export */ const binder = (Binder);
// CONCATENATED MODULE: ./apps/devapp/src/js/app/app.js
;










const App = {
    init(params){
        state.loadParams = params;
        this._setActiveLanguage();
        this._runPushStateListener();
        this._runWaveProcess();

        this._loadSiteCfg().then(siteCfg => {
            state.siteCfg = siteCfg;
            return EJS.fetch(config.cache+'/'+config.app+'/'+state.lang+'.build.json', [], [], 'GET').then(build => {
                if( ! build ) {
                    this._throwExpired();
                }

                if( siteCfg.app !== config.app && siteCfg.app !== 'app' ) {
                    window.acsbJS.restart(siteCfg.app);
                    throw new Error('restart');
                }

                return JSON.parse(build);
            });
        }).then(build => {
            for( let part in build.html ) {
                build.html[part] = EJS.strings.htmlDecode(build.html[part]);
            }

            if( state.siteCfg.specifics ) {
                for( let $node of EJS.elements.htmlToNodes(EJS.strings.htmlDecode(state.siteCfg.specifics)) ) {
                    if( $node.nodeType !== 1 ) {
                        continue;
                    }

                    if( $node.tagName === 'SCRIPT' ) {
                        EJS.elements.append(EJS.elements.create('script', {}, $node.textContent), document.body);
                    } else {
                        EJS.elements.append($node, document.body);
                    }
                }
            }

            state.html = build.html;
            build_lang.data  = build.language;

            try {
                framer.init();
                widget.init();
                actions.init();
                navi.init();

                setTimeout(() => {
                    document.body.setAttribute('role', 'region');
                    EJS.elements.attrs(document.body, ['role', 'aria-label'], true);

                    if( ! state.widget.hidden ) {
                        actions.populateFromStorage();

                        if( ! state.actions.accessMode || ! state.actions.screenReader ) {
                            adjustments.screenReader.handleDocLang();
                            adjustments.screenReader.greetUsers();
                        }

                        for( let k in state.actions ) {
                            if( state.actions[k].enabled ) {
                                binder.init();
                                break;
                            }
                        }
                    }

                    EJS.events.on(window, config.events.actionEnabled, () => binder.init());
                    EJS.events.trigger(window, config.events.ready);
                }, 0);
            } catch( err ) {
                if( config.debug ) {
                    console.log(console.log(err));
                }
                throw Error(err);
            }
        }).catch(err => {
            if( ! err || ! err.message || err.message !== 'restart' ) {
                this._throwExpired();
            }
        });
    },

    map(){
        for( let $el of EJS.picks('*') ) {
            if( $el.closest('[data-acsb]')
                || ! build_utilities.isVisible($el)
                || ($el.tagName === 'NAV' && $el.getAttribute('role') === 'none') ) {
                continue;
            }

            $el.acsbMapping = {};

            if( $el.getAttribute('data-acsb-bg-image') ) {
                for( let $img of EJS.picks('[role="img"]', $el) ) {
                    $el.acsbMapping['sr-only'] = EJS.elements.text($img);
                }
            }

            if( $el.getAttribute('data-acsb-navigable') === 'true' ) {
                let i = 0;
                for( let $srOnly of EJS.picks('[data-acsb-sr-only]', $el) ) {
                    let text = EJS.elements.text($srOnly);

                    if( ! text ) {
                        continue;
                    }

                    i++;
                    if( i === 1 ) {
                        $el.acsbMapping['sr-only'] = text;
                    } else {
                        $el.acsbMapping['sr-only'+i] = text;
                    }
                }
            }

            if( ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'].includes($el.tagName) && EJS.elements.text($el).length > 0 ) {
                $el.acsbMapping['heading'] = $el.tagName.toLowerCase();
            }

            if( $el.tagName === 'IMG' && $el.alt ) {
                $el.acsbMapping['alt'] = $el.alt;
            }

            if( ['input', 'select', 'textarea'].includes($el.type) ) {
                for( let v of ['aria-invalid', 'aria-required'] ) {
                    const value = $el.getAttribute(v);

                    if( value && value.length > 0 ) {
                        $el.acsbMapping[v] = value;
                    }
                }
            }

            const baseAttrs = [
                'aria-label',
                'role',
                'aria-expanded',
                'aria-haspopup',
                'aria-pressed',
                'aria-selected',
                'aria-current',
                'aria-level',
                'aria-modal',
            ];

            for( let v of baseAttrs ) {
                if( ! $el.matches('['+v+']') ) {
                    continue;
                }

                const value = $el.getAttribute(v);

                if( ! value || value.length < 1 ) {
                    continue;
                }

                $el.acsbMapping[v] = value;
            }

            if( Object.keys($el.acsbMapping).length < 1 ) {
                continue;
            }

            const $tooltip  = EJS.elements.create('div', {'class' : 'acsb-map-tooltip'}, '<ul></ul>');
            const $ul       = EJS.pick('ul', $tooltip);
            const offsets   = EJS.elements.offsets($el);
            const winSizes  = EJS.utilities.getWinSize();
            const positions = {y : 0, x : 0};

            for( let k in $el.acsbMapping ) {
                if( $el.acsbMapping[k].length > 50 ) {
                    $el.acsbMapping[k] = $el.acsbMapping[k].substring(0, 50)+'...';
                }

                $tooltip.classList.add('acsb-map-'+k);

                if( k === 'role' && ['navigation', 'button', 'contentinfo'].includes($el.acsbMapping[k]) ) {
                    $tooltip.classList.add('acsb-map-high-roles');
                }

                EJS.elements.append(EJS.elements.create('li', {}, k+': '+$el.acsbMapping[k]), $ul);
            }

            EJS.elements.append(EJS.elements.css($tooltip, {
                top  : offsets.top+'px',
                left : offsets.left+'px'
            }), document.body);

            positions.x = offsets.left;
            positions.y = offsets.top-$tooltip.offsetHeight+7;

            positions.y = positions.y < 5 ? 5 : positions.y;
            positions.x = positions.x < 5 ? 5 : positions.x;
            positions.x = winSizes.width-($tooltip.offsetWidth+positions.x) < 5 ? winSizes.width-$tooltip.offsetWidth-5 : positions.x;

            EJS.elements.css($tooltip, {top : positions.y+'px', left : positions.x+'px'});
        }
    },

    _loadSiteCfg(){
        return new Promise((resolve, reject) => {
            if( config.domain.length < 3 || config.domain.split('.').join('').replace(/[0-9]/g, '').length < 1 ) {
                return reject();
            }

            EJS.fetch(config.cache+'/app/'+config.domain+'/config.json', [], [], 'GET').then(siteCfg => {
                if( siteCfg ) {
                    return resolve(JSON.parse(siteCfg));
                }

                if( config.domain.split('.').length <= 2 ) {
                    return reject();
                }

                EJS.fetch(config.cache+'/app/wildcards.json', [], [], 'GET').then(res => {
                    if( ! res ) {
                        return reject();
                    }

                    let wildDomain = (() => {
                        for( let v of JSON.parse(res) ) {
                            if( config.domain.includes(v) ) {
                                return v;
                            }
                        }
                    })();

                    if( ! wildDomain ) {
                        return reject();
                    }

                    EJS.fetch(config.cache+'/app/'+wildDomain+'/config.json', [], [], 'GET').then(wildCardCfg => {
                        if( wildCardCfg ) {
                            return resolve(JSON.parse(wildCardCfg));
                        }
                        return reject();
                    });
                });
            });
        });
    },

    _runPushStateListener(){
        const url     = window.location.href;
        const tracker = setInterval(() => {
            if( url === window.location.href
                || url.split('#')[0] === window.location.href.split('#')[0]
                || EJS.pick('[data-acsb]') ) {
                return;
            }
            setTimeout(() => acsbJS.restart(), 250);
            clearInterval(tracker);
        }, 250)
    },

    _setActiveLanguage(){
        const storage = state.getStorage();
        let language  = state.loadParams.language ? state.loadParams.language : state.lang;

        if( storage && storage.widget && storage.widget.language ) {
            language = storage.widget.language;
        }

        if( ! build_lang.supported.includes(language) ) {
            language = 'en';
        }

        state.lang = language;
    },

    _runWaveProcess(){
        if( ! window.location.href.includes('wave.webaim.org') ) {
            const waveTimer = setInterval(() => {
                if( ! window.wave || ! window.wave.init || ! window.wave.report ) {
                    return;
                }

                clearTimeout(waveTimer);

                EJS.elements.remove(EJS.pick('[data-acsb="widget"]'));
                actions.enable('lightContrast', {action : 'lightContrast', actionGroup : 'contrast'}, false, true);
                actions.enable('accessMode', {}, false, true);
                adjustments.screenReader.handleWaveProcess();

                setTimeout(() => {
                    actions.disable('lightContrast', {action : 'lightContrast', actionGroup : 'contrast'}, false);
                    setTimeout(() => state.reset(false), 500);
                }, 1500);
            }, 10);
            return;
        }

        const $holder = EJS.elements.create('img', {
            class : 'acsb-whl',
            alt   : 'WHL',
            src   : 'https://acsbapp.com/apps/app/dist/media/whl.jpg'
        });

        EJS.elements.append($holder, document.body, false);
        EJS.elements.remove(EJS.pick('[data-acsb="widget"]'));
        state.updateAction('lightContrast', true, {action : 'lightContrast'}, false).store();
        state.updateAction('accessMode', true, {}, false).store();

        state.actions = {};
        adjustments.screenReader.handleWaveProcess();
        config.domain = EJS.uris.getFormatted(window.parent.location.href.split('report#/').pop(), true);

        setInterval(() => {
            if( $holder.complete ) {
                EJS.elements.remove(EJS.picks('.acsb-wave-holder'));
            }

            if( document.readyState === 'complete' && ! this.waveProcessDone ) {
                setTimeout(() => {
                    actions.disable('lightContrast', {action : 'lightContrast', actionGroup : 'contrast'});
                }, 1500);
                this.waveProcessDone = true;
            }
        }, 100);
    },

    _throwExpired(){
        document.body.removeAttribute('aria-busy');
        document.body.setAttribute('role', 'region');
        EJS.elements.attrs(document.body, ['role', 'aria-label'], true);
        console.log('acsb: this website is not registered or its license is expired.');
    }
}

/* harmony default export */ const app = (App);
// CONCATENATED MODULE: ./apps/devapp/src/js/build/acsb.js
;




const acsb = {
    init(params = {}){
        if( document.readyState === 'complete' && config.wave ) {
            return window.location.reload();
        }

        if( state.running ) {
            return;
        }

        state.running = true;

        const loadTexts = {
            zh : '...',
            tw : '...',
            he : ' ...',
            pt : 'Carregando site...',
            en : 'Loading website...',
            nl : 'Website laden......',
            ru : '  ...',
            ar : '   ',
            ua : '   ',
            es : 'Cargando sitio web...',
            de : 'Website wird geladen...',
            fr : 'Chargement du site Web...',
            ja : '...',
            it : 'Caricamento sito Web in corso...',
        };
        const loading   = setInterval(() => {
            if( ! document.body ) {
                return;
            }

            clearTimeout(loading);
            EJS.elements.attrs(document.body, {
                'role'       : 'text',
                'aria-label' : loadTexts[params.language] ? loadTexts[params.language] : loadTexts.en
            });
        }, 50);

        if( document.readyState === 'complete' || config.wave ) {
            return app.init(params);
        }

        let timePassed   = 0;
        let loadInterval = setInterval(() => {
            timePassed = timePassed+50;

            if( document.readyState === 'complete'
                || (document.readyState === 'interactive' && timePassed >= 5000) ) {
                clearInterval(loadInterval);
                return app.init(params);
            }
        }, 50);
    },

    restart(app){
        app = app || config.app;

        this.destroy();

        const $script = EJS.elements.create('script', {
            async : true,
            src   : (app === 'app' ? config.endpoint : config.endpoint.replace('https://', 'https://web1.'))+'/'+app+'/dist/js/app.js'
        });

        EJS.elements.append($script, document.body);
        $script.onload = () => window.acsbJS.init(state.loadParams);
    },

    destroy(){
        for ( let $el of EJS.picks('[data-acsb], .acsb-styles, .acsb-dynamic-colors') ) {
            if( $el.matches('[data-acsb="trigger"]') && ! $el.matches('.acsb-trigger') ) {
                continue;
            }
            EJS.elements.remove();
        }

        for( let $script of EJS.picks('script') ) {
            if( $script.outerHTML.includes('acsb') ) {
                EJS.elements.remove($script);
            }
        }

        delete window.acsbJS;

        if( window.EJSEventListeners ) {
            for( let obj of window.EJSEventListeners ) {
                obj.$el.removeEventListener(obj.event, obj.handler);
            }
        }
    },

    map(){
        app.map();
    },

    enable(action, options, showLoader, cached){
        actions.enable(action, options, showLoader, cached);
    },

    disable(action, options, showLoader){
        actions.disable(action, options, showLoader);
    }
}

/* harmony default export */ const build_acsb = (acsb);
// CONCATENATED MODULE: ./apps/devapp/src/js/index.js







if( ! window.Promise ) {
    window.Promise = src;
}

if( ! window.acsbJS ) {
    window.acsbJS = window.acsb = window.AccessiBe = build_acsb;

    for( let $script of EJS.picks('script[src]') ) {
        if( $script.src.includes('acsb=init') ) {
            acsbJS.init(JSON.parse(EJS.uris.getParam('options')));
            break;
        }
    }
}
/******/ })()
;
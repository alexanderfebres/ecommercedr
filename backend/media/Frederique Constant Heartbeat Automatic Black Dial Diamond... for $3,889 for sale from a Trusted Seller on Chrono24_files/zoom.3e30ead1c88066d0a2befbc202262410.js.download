c24.zoom=c24.zoom||{create:function create(a){this.logPrefix="c24.zoom: ";this.zooming=!1;this.initialized=!1;this.initializing=!1;this.baseImageAttached=!1;this.zoomImageAttached=!1;this.element=$();this.zoomDisplay=$();this.zoomLocator=$();this.baseImage=$();this.settings=$.extend({selector:null,showLocator:!0,displayWidth:510,displayHeight:510,baseImageSrc:null,altTagText:null,zoomImageSrc:null,zoomImageHeight:null,zoomImageWidth:null,containerClass:"c24-zoom",locatorClass:"c24-zoom-locator",displayClass:"c24-zoom-display",derivateClass:"c24-zoom-derivate",displayContainer:$(),zoomImageRatioThreshold:1.5,onMouseEnter:function onMouseEnter(){},onMouseLeave:function onMouseLeave(){},onMouseMove:function onMouseMove(){},onSetup:function onSetup(){},onUpdate:function onUpdate(){},onDestroy:function onDestroy(){},onRatioChecked:function onRatioChecked(){}},a);this.lookupElement=function(){var a=this;if(null===a.settings.selector){console.log(a.logPrefix+"selector must not be null");return!1}if(null===a.settings.baseImageSrc){console.log(a.logPrefix+"baseImageSrc must not be null");return!1}if(null===a.settings.zoomImageSrc||null===a.settings.zoomImageHeight||null===a.settings.zoomImageWidth){console.log(a.logPrefix+"zoomImageSrc, zoomImageHeight and zoomImageWidth must not be null");return!1}a.element=$(a.settings.selector);if(!a.element.length){console.log(a.logPrefix+"selector \""+a.settings.selector+"\" doesnt match any DOM element");return!1}return!0};this.appendBaseImage=function(a){var b=this,c=new Image;c.src=b.settings.baseImageSrc;if(null!==b.settings.altTagText){c.alt=b.settings.altTagText}c.onload=function(){b.baseImage=$(c);b.baseImage.addClass("mw-100 mh-100 invisible").appendTo(b.element);b.updateBaseImageData();var d=b.imageRatioThresholdIsOk();b.settings.onRatioChecked.apply(b,[d]);if(!d){b.destroy();return}b.baseImageAttached=!0;if("function"==typeof a){a()}};c.onerror=function(){console.error(b.logPrefix+"could not append base image for zoom");b.destroy()}};this.updateBaseImageData=function(){var a=this;a.baseImage.removeClass("d-none");a.baseWidth=a.baseImage.width();a.baseHeight=a.baseImage.height();a.baseImage.addClass("d-none")};this.appendZoomImage=function(a){var b=this,c=new Image;c.src=b.settings.zoomImageSrc;c.onload=function(){b.zoomWidth=c.naturalWidth;b.zoomHeight=c.naturalHeight;b.loadingSpinner.remove();b.zoomDerivate=$("<div class=\"jq-zoom-derivate\"></div>").addClass(b.settings.derivateClass).css({position:"absolute",backgroundImage:"url("+b.settings.zoomImageSrc+")",width:b.zoomWidth,height:b.zoomHeight}).appendTo(b.zoomDisplay);b.zoomImageAttached=!0;if("function"==typeof a){a()}};c.onerror=function(){console.error(b.logPrefix+"could not append zoom image for zoom");b.destroy()}};this.appendZoomLocator=function(){var a=this;a.zoomLocator=$("<div class=\"jq-zoom-locator\"></div>").addClass(a.settings.locatorClass).hide();a.updateZoomLocator();a.element.append(a.zoomLocator)};this.updateZoomLocator=function(){var a=this;a.zoomLocator.css({width:a.settings.displayWidth/a.zoomWidth*a.baseWidth,height:a.settings.displayHeight/a.zoomHeight*a.baseHeight})};this.appendZoomDisplay=function(){var a=this;a.zoomDisplay=$("<div class=\"jq-zoom-display\"></div>").addClass(a.settings.displayClass).hide();a.loadingSpinner=$("<div class=\"jq-zoom-loader full-width full-height d-flex align-items-center justify-content-center\"><div class=\"spinner-lg\"></div></div>").appendTo(a.zoomDisplay);a.updateZoomDisplay();a.settings.displayContainer.append(a.zoomDisplay)};this.updateZoomDisplay=function(){var a=this;a.zoomDisplay.css({width:a.settings.displayWidth,height:a.settings.displayHeight})};this.imageRatioThresholdIsOk=function(){var a=this,b=a.settings.zoomImageWidth/a.baseWidth,c=a.settings.zoomImageHeight/a.baseHeight;if(b<a.settings.zoomImageRatioThreshold&&c<a.settings.zoomImageRatioThreshold){return!1}return!0};this.initialize=function(){var a=this;if(a.baseImageAttached){a.initializing=!0;a.appendZoomDisplay();a.appendZoomImage(function(){a.appendZoomLocator();a.calculateLocatorArea();a.initializing=!1;a.initialized=!0})}};this.calculateLocatorArea=function(){var a=this,b=a.element.outerWidth(),c=a.element.outerHeight(),d=b/2,e=c/2;a.xMin=d-a.baseWidth/2;a.yMin=e-a.baseHeight/2;a.xMax=d+a.baseWidth/2-a.zoomLocator.outerWidth();a.yMax=e+a.baseHeight/2-a.zoomLocator.outerHeight();a.xZoomCorrection=(b-a.baseWidth)/2||0;a.yZoomCorrection=(c-a.baseHeight)/2||0};this.onMouseEnter=function(){var a=this;if(!a.initialized&&!a.initializing){a.initialize()}a.settings.onMouseEnter.apply(a,arguments)};this.onMouseLeave=function(){var a=this;a.zooming=!1;a.zoomDisplay.hide();if(a.settings.showLocator){a.zoomLocator.hide()}a.settings.onMouseLeave.apply(a,arguments)};this.onMouseMove=function(a,b){var c=this;if(c.initialized&&!c.zooming){c.zooming=!0;c.zoomDisplay.show();if(c.settings.showLocator){c.zoomLocator.show()}}if(c.initialized&&c.zooming&&c.baseImageAttached&&c.zoomImageAttached){if(0===c.baseWidth||0===c.baseHeight){c.update()}var d=$(b).parent().offset(),e=a.pageX-d.left-c.zoomLocator.outerWidth()/2,f=a.pageY-d.top-c.zoomLocator.outerHeight()/2;if(e<=c.xMin){e=c.xMin}if(f<=c.yMin){f=c.yMin}if(e>=c.xMax){e=c.xMax}if(f>=c.yMax){f=c.yMax}var g=0>=e?0:(e-c.xZoomCorrection)/c.baseWidth*c.zoomWidth,h=0>=f?0:(f-c.yZoomCorrection)/c.baseHeight*c.zoomHeight;if(c.settings.showLocator){c.zoomLocator.css({left:e,top:f})}c.zoomDerivate.css({left:-1*g,top:-1*h});c.settings.onMouseMove.apply(c,arguments)}};this.update=function(){var a=this;a.updateBaseImageData();a.updateZoomLocator();a.updateZoomDisplay();a.calculateLocatorArea();a.settings.onUpdate.apply(a,arguments)};this.destroy=function(){var a=this;a.zoomDisplay.empty().remove();a.zoomLocator.remove();a.baseImage.remove();a.element.removeClass(a.settings.containerClass);a.element.off("mouseenter.c24zoom");a.element.off("mouseleave.c24zoom");a.element.off("mousemove.c24zoom");a.settings.onDestroy.apply(a,arguments)};this.setup=function(){var a=this;a.appendBaseImage(function(){a.element.addClass(a.settings.containerClass);a.element.on("mouseenter.c24zoom",function(){a.onMouseEnter()});a.element.on("mouseleave.c24zoom",function(){a.onMouseLeave()});a.element.on("mousemove.c24zoom",function(b){a.onMouseMove(b,this)});a.settings.onSetup.apply(a,arguments)})};if(!this.lookupElement()){return}this.setup();return this}};$.fn.c24Zoom=function(a){var b=$(this);if(!b.length){return}b.each(function(b){var c=$(this),d="c24-zoom-"+b;c.addClass(d);var e=new c24.zoom.create($.extend({selector:"."+d,baseImageSrc:c.data("original"),altTagText:c.data("alt"),zoomImageSrc:c.data("zoom-image"),zoomImageWidth:c.data("zoom-image-width"),zoomImageHeight:c.data("zoom-image-height"),displayContainer:$(".jq-zoom-display-container"),displayWidth:$(".jq-zoom-display-container").width(),displayHeight:$(".detail-images .slides").height()},a));c.data("zoom",e)});return this};
c24.willItFit=c24.willItFit||{};c24.willItFit.init=function(){$(".js-will-it-fit-btn").on("click",function(a){a.preventDefault();trackVisitorLogEvent("will-it-fit",c24.getData("watchId"));var b=$(window).height()-200;b=Math.min(b,640);c24.colorbox.createJsonp(c24.getData("willItFitUrl"),{size:"xl",className:"will-it-fit-layer",onComplete:function onComplete(){c24.willItFit.preloadImages();c24.willItFit.setParameters();var a="search.detail.details-viewDetail.will-it-fit",c="search.detail.details.will-it-fit";if(c24.willItFit.hasArButton()){a+="-ar";c+="-ar"}trackVirtualPageView(a,c);c24.willItFit.toggleArButton();$("#jq-popover-will-it-fit").height(b);c24.colorbox.resizeColorbox();$(window).on("resize.willitfit",function(){c24.willItFit.setParameters()})},onCleanup:function onCleanup(){trackEvent("Click","close","will-it-fit-close")},onClosed:function onClosed(){trackVirtualPageView("search.detail.details-viewDetail","search.detail.details");c24.willItFit.toggleArButton();c24.willItFit.toggleArTeaser("hide");$(window).off("resize.willitfit")}})})};c24.willItFit.setParameters=function(){var a=0,b=0,c=0,d=0,e=c24.willItFit.settings.marginLeft,f=c24.willItFit.settings.marginTop,g=parseInt(c24.willItFit.data.watch["image-height"]*c24.willItFit.data.watch.diameter.mm/c24.willItFit.data.watch.diameter.reference),h=parseInt(c24.willItFit.data.watch["image-width"]*c24.willItFit.data.watch.diameter.mm/c24.willItFit.data.watch.diameter.reference),i=-1*parseInt(10*c24.willItFit.data.hand[c24.willItFit.selection.gender][c24.willItFit.selection.size].width.mm+40-g),j=g-i;if(c24.willItFit.settings.isMobile){e=parseInt(-1*c24.willItFit.settings.watchCenterLeft+$(window).width()/2*c24.willItFit.settings.zoom);f=parseInt(-1*c24.willItFit.settings.watchCenterTop+$(window).height()/2*c24.willItFit.settings.zoom)}if(!c24.willItFit.settings.isMobile&&$("#colorbox").outerWidth(!0)<c24.willItFit.data.hand.imageWidth/c24.willItFit.settings.zoom){a=parseInt(($("#colorbox").outerWidth(!0)-c24.willItFit.data.hand.imageWidth/c24.willItFit.settings.zoom)/2);if(-120>a){a=-120}d=parseInt(a*Math.cos((90+c24.willItFit.settings.rotate)*(Math.PI/180)));c=parseInt(Math.sqrt(Math.pow(a,2)-Math.pow(d,2)))}$(".will-it-fit-hand").css({backgroundImage:"url("+c24.willItFit.data.hand[c24.willItFit.selection.gender][c24.willItFit.selection.size].image+")",backgroundSize:c24.willItFit.data.hand.imageWidth/c24.willItFit.settings.zoom+"px "+c24.willItFit.data.hand.imageHeight/c24.willItFit.settings.zoom+"px",backgroundPosition:a+"px "+b+"px",width:c24.willItFit.data.hand.imageWidth/c24.willItFit.settings.zoom+"px",height:c24.willItFit.data.hand.imageHeight/c24.willItFit.settings.zoom+"px",marginLeft:e/c24.willItFit.settings.zoom+"px",marginTop:f/c24.willItFit.settings.zoom+"px",transform:"rotate("+c24.willItFit.settings.rotate+"deg)"});$(".will-it-fit-watch").css({backgroundImage:"url("+c24.willItFit.data.watch.image+")",backgroundSize:h/c24.willItFit.settings.zoom+"px "+g/c24.willItFit.settings.zoom+"px",backgroundPosition:"0px -"+i/c24.willItFit.settings.zoom/2+"px",top:(c24.willItFit.settings.watchCenterTop+f)/c24.willItFit.settings.zoom-j/c24.willItFit.settings.zoom/2-d+"px",left:(c24.willItFit.settings.watchCenterLeft+e)/c24.willItFit.settings.zoom-h/c24.willItFit.settings.zoom/2-c+"px",width:h/c24.willItFit.settings.zoom+"px",height:j/c24.willItFit.settings.zoom+"px",marginLeft:"0px",marginTop:"0px",transform:"rotate("+c24.willItFit.settings.rotate+"deg)"});$("#jq-popover-will-it-fit .watch-name").text(c24.willItFit.data.watch.name);var k=c24.willItFit.data.watch.diameter[c24.willItFit.selection.unit];k=k.toString();k=k.replace(/,/,".");$(".watch-diameter").text(k);$(".watch-unit").text("inch"===c24.willItFit.selection.unit?"inches":c24.willItFit.settings.textMM);var l=c24.willItFit.data.hand[c24.willItFit.selection.gender][c24.willItFit.selection.size].width[c24.willItFit.selection.unit];l=l.toString();l=l.replace(/,/,".");$(".wrist-size").text(l);$(".wrist-unit").text("inch"===c24.willItFit.selection.unit?"inches":c24.willItFit.settings.textMM);$(".switcher").removeClass("active");$(".switcher."+c24.willItFit.selection.unit).addClass("active");$(".switcher."+c24.willItFit.selection.gender).addClass("active");$(".switcher."+c24.willItFit.selection.size).addClass("active")};c24.willItFit.clickSwitcher=function(a,b){c24.willItFit.selection[a]=b;c24.willItFit.setParameters();$(".switcher").trigger("mouseout");if("size"===a){if("s"===b){trackEvent("Click","small","will-it-fit-size")}else if("m"===b){trackEvent("Click","medium","will-it-fit-size")}else if("l"===b){trackEvent("Click","large","will-it-fit-size")}}if("gender"===a){if("male"===b){trackEvent("Click","male","will-it-fit-gender")}else if("female"===b){trackEvent("Click","female","will-it-fit-gender")}}if("unit"===a){if("mm"===b){trackEvent("Click","mm","will-it-fit-measure-unit")}else if("inch"===b){trackEvent("Click","in","will-it-fit-measure-unit")}}};c24.willItFit.hoverSwitcher=function(a,b){if(c24.willItFit.settings.isMobile){return}var c=$(a).find("img").attr("src"),d=c.replace("_hover.svg",".svg"),e=$(a).hasClass("active")?1:0;if("over"===b){$(a).css("backgroundImage","url("+d+")");$(a).find("img").hide()}else{if(!e){$(a).css("backgroundImage","none");$(a).find("img").show()}}};c24.willItFit.preloadImages=function(){$("<div id=\"will-it-fit-image-placeholder\">").appendTo("body").css("display","none");$(c24.willItFit.settings.preloadImages).each(function(){$("<img />").attr("src",this).appendTo("#will-it-fit-image-placeholder")})};c24.willItFit.hasArButton=function(){return $(".ar-button").length};c24.willItFit.toggleArButton=function(){if($(".ar-button").hasClass("show-button")){$(".ar-button").removeClass("show-button")}else{var a=$(".ar-button img").attr("src");$(".ar-button img").attr("src",a);$(".ar-button").addClass("show-button")}};c24.willItFit.toggleArTeaser=function(b){var c="show"===b;if("xs"===c24.tools.responsiveSize()&&c){try{var d=document.createElement("a"),a=$(".jq-ar-teaser"),e=/^((?!chrome|android|crios).)*safari/i.test(navigator.userAgent),f=d.relList.supports("ar")&&a.length&&e;if(f){$(".jq-ar-model").get(0).click();return}}catch(a){}}if(c){if(!$(".will-it-fit-layer").hasClass("show-ar-teaser")){$(".will-it-fit-layer").addClass("show-ar-teaser");if(!c24.willItFit.settings.isMobile){$(".will-it-fit-watch, .will-it-fit-hand").finish().animate({marginLeft:"-=100px"},1e3)}}}else{$(".will-it-fit-layer").removeClass("show-ar-teaser");if(!c24.willItFit.settings.isMobile){$(".will-it-fit-watch, .will-it-fit-hand").finish().animate({marginLeft:"+=100px"},1e3)}}};
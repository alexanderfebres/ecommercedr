{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Alexander\\\\Desktop\\\\important\\\\ecommerceproject\\\\root\\\\src\\\\containers\\\\OrderSummary.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport { Button, Container, Dimmer, Header, Icon, Image, Label, Loader, Menu, Message, Segment, Table } from \"semantic-ui-react\";\nimport { Link } from \"react-router-dom\";\nimport { orderSummaryURL, orderItemDeleteURL, addToCartURL, orderItemUpdateQuantityURL } from \"../containers/constants\";\nimport { authAxios } from \"../Utils\";\n\nclass OrderSummary extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      error: null,\n      loading: false\n    };\n\n    this.handleFetchOrder = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(orderSummaryURL).then(res => {\n        this.setState({\n          data: res.data,\n          loading: false\n        });\n      }).catch(err => {\n        if (err.response.status === 404) {\n          this.setState({\n            error: \"You currently do not have an order\",\n            loading: false\n          });\n        } else {\n          this.setState({\n            error: err,\n            loading: false\n          });\n        }\n      });\n    };\n\n    this.renderVariation = orderItem => {\n      let text = \"\";\n      orderItem.item_variations.forEach(iv => {\n        text += `${iv.variation.name}: ${iv.value}, `;\n      });\n      return text;\n    };\n\n    this.handleFormatData = itemVariations => {\n      return Object.keys(itemVariations).map(key => {\n        return itemVariations[key].id;\n      });\n    };\n\n    this.handleAddToCart = (slug, itemVariations) => {\n      this.setState({\n        loading: true\n      });\n      const variations = this.handleFormatData(itemVariations);\n      authAxios.post(addToCartURL, {\n        slug,\n        variations\n      }).then(res => {\n        this.handleFetchOrder();\n        this.setState({\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    this.handleRemoveQuantityFromCart = slug => {\n      authAxios.post(orderItemUpdateQuantityURL, {\n        slug\n      }).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleRemoveItem = itemID => {\n      authAxios.delete(orderItemDeleteURL(itemID)).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleFetchOrder();\n  }\n\n  render() {\n    const {\n      data,\n      error,\n      loading\n    } = this.state;\n    const {\n      isAuthenticated\n    } = this.props; // if (!isAuthenticated) {\n    //   return <Redirect to=\"/login\" />;\n    // }\n\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, \"Order Summary\"), error && /*#__PURE__*/React.createElement(Message, {\n      error: true,\n      header: \"There was an error\",\n      content: JSON.stringify(error),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }), loading && /*#__PURE__*/React.createElement(Segment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Dimmer, {\n      active: true,\n      inverted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      inverted: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }\n    }, \"Loading\")), /*#__PURE__*/React.createElement(Image, {\n      src: \"https://react.semantic-ui.com/images/wireframe/short-paragraph.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    })), data && /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    }, \"Item #\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, \"Item Name\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, \"Item Prince\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, \"Item Quantity\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, \"Total Item Price\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, data.order_items.map((order_item, i) => {\n      {\n        /* console.log(\"asdasd\", order_item); */\n      }\n      return /*#__PURE__*/React.createElement(Table.Row, {\n        key: order_item.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        ribbon: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 23\n        }\n      }, i + 1)), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }\n      }, order_item.item.title, \" -\", \" \", this.renderVariation(order_item)), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }\n      }, \"$\", order_item.item.price), /*#__PURE__*/React.createElement(Table.Cell, {\n        textAlign: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"minus\",\n        style: {\n          float: \"left\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleRemoveQuantityFromCart(order_item.item.slug),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 23\n        }\n      }), order_item.quantity, /*#__PURE__*/React.createElement(Icon, {\n        name: \"plus\",\n        style: {\n          float: \"right\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleAddToCart(order_item.item.slug, order_item.item_variations),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }\n      }, order_item.item.discount_price && /*#__PURE__*/React.createElement(Label, {\n        color: \"green\",\n        ribbon: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }\n      }, \"On Discount\"), \"$\", order_item.final_price, /*#__PURE__*/React.createElement(Icon, {\n        name: \"trash\",\n        color: \"red\",\n        style: {\n          float: \"right\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleRemoveItem(order_item.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 23\n        }\n      })));\n    }), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      textAlign: \"right\",\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, \"Order Total: $\", data.total))), /*#__PURE__*/React.createElement(Table.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      colSpan: \"5\",\n      textAlign: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"yellow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }, \"Checkout\")))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nexport default connect(mapStateToProps)(OrderSummary);","map":{"version":3,"sources":["C:/Users/Alexander/Desktop/important/ecommerceproject/root/src/containers/OrderSummary.js"],"names":["React","Component","connect","Redirect","Button","Container","Dimmer","Header","Icon","Image","Label","Loader","Menu","Message","Segment","Table","Link","orderSummaryURL","orderItemDeleteURL","addToCartURL","orderItemUpdateQuantityURL","authAxios","OrderSummary","state","data","error","loading","handleFetchOrder","setState","get","then","res","catch","err","response","status","renderVariation","orderItem","text","item_variations","forEach","iv","variation","name","value","handleFormatData","itemVariations","Object","keys","map","key","id","handleAddToCart","slug","variations","post","handleRemoveQuantityFromCart","handleRemoveItem","itemID","delete","componentDidMount","render","isAuthenticated","props","JSON","stringify","order_items","order_item","i","item","title","price","float","cursor","quantity","discount_price","final_price","total","mapStateToProps","auth","token"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport {\r\n  Button,\r\n  Container,\r\n  Dimmer,\r\n  Header,\r\n  Icon,\r\n  Image,\r\n  Label,\r\n  Loader,\r\n  Menu,\r\n  Message,\r\n  Segment,\r\n  Table,\r\n} from \"semantic-ui-react\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport {\r\n  orderSummaryURL,\r\n  orderItemDeleteURL,\r\n  addToCartURL,\r\n  orderItemUpdateQuantityURL,\r\n} from \"../containers/constants\";\r\n\r\nimport { authAxios } from \"../Utils\";\r\n\r\nclass OrderSummary extends Component {\r\n  state = {\r\n    data: null,\r\n    error: null,\r\n    loading: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.handleFetchOrder();\r\n  }\r\n\r\n  handleFetchOrder = () => {\r\n    this.setState({ loading: true });\r\n    authAxios\r\n      .get(orderSummaryURL)\r\n      .then((res) => {\r\n        this.setState({ data: res.data, loading: false });\r\n      })\r\n      .catch((err) => {\r\n        if (err.response.status === 404) {\r\n          this.setState({\r\n            error: \"You currently do not have an order\",\r\n            loading: false,\r\n          });\r\n        } else {\r\n          this.setState({ error: err, loading: false });\r\n        }\r\n      });\r\n  };\r\n\r\n  renderVariation = (orderItem) => {\r\n    let text = \"\";\r\n    orderItem.item_variations.forEach((iv) => {\r\n      text += `${iv.variation.name}: ${iv.value}, `;\r\n    });\r\n    return text;\r\n  };\r\n\r\n  handleFormatData = (itemVariations) => {\r\n    return Object.keys(itemVariations).map((key) => {\r\n      return itemVariations[key].id;\r\n    });\r\n  };\r\n\r\n  handleAddToCart = (slug, itemVariations) => {\r\n    this.setState({ loading: true });\r\n    const variations = this.handleFormatData(itemVariations);\r\n\r\n    authAxios\r\n      .post(addToCartURL, { slug, variations })\r\n      .then((res) => {\r\n        this.handleFetchOrder();\r\n        this.setState({ loading: false });\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ error: err, loading: false });\r\n      });\r\n  };\r\n\r\n  handleRemoveQuantityFromCart = (slug) => {\r\n    authAxios\r\n      .post(orderItemUpdateQuantityURL, { slug })\r\n      .then((res) => {\r\n        this.handleFetchOrder();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ error: err });\r\n      });\r\n  };\r\n\r\n  handleRemoveItem = (itemID) => {\r\n    authAxios\r\n      .delete(orderItemDeleteURL(itemID))\r\n      .then((res) => {\r\n        this.handleFetchOrder();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ error: err });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { data, error, loading } = this.state;\r\n    const { isAuthenticated } = this.props;\r\n    // if (!isAuthenticated) {\r\n    //   return <Redirect to=\"/login\" />;\r\n    // }\r\n    return (\r\n      <Container>\r\n        <Header as=\"h3\">Order Summary</Header>\r\n\r\n        {error && (\r\n          <Message\r\n            error\r\n            header=\"There was an error\"\r\n            content={JSON.stringify(error)}\r\n          />\r\n        )}\r\n        {loading && (\r\n          <Segment>\r\n            <Dimmer active inverted>\r\n              <Loader inverted>Loading</Loader>\r\n            </Dimmer>\r\n\r\n            <Image src=\"https://react.semantic-ui.com/images/wireframe/short-paragraph.png\" />\r\n          </Segment>\r\n        )}\r\n\r\n        {data && (\r\n          <Table celled>\r\n            <Table.Header>\r\n              <Table.Row>\r\n                <Table.HeaderCell>Item #</Table.HeaderCell>\r\n                <Table.HeaderCell>Item Name</Table.HeaderCell>\r\n                <Table.HeaderCell>Item Prince</Table.HeaderCell>\r\n                <Table.HeaderCell>Item Quantity</Table.HeaderCell>\r\n                <Table.HeaderCell>Total Item Price</Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Header>\r\n\r\n            <Table.Body>\r\n              {data.order_items.map((order_item, i) => {\r\n                {\r\n                  /* console.log(\"asdasd\", order_item); */\r\n                }\r\n                return (\r\n                  <Table.Row key={order_item.id}>\r\n                    <Table.Cell>\r\n                      <Label ribbon>{i + 1}</Label>\r\n                    </Table.Cell>\r\n                    <Table.Cell>\r\n                      {order_item.item.title} -{\" \"}\r\n                      {this.renderVariation(order_item)}\r\n                    </Table.Cell>\r\n                    <Table.Cell>${order_item.item.price}</Table.Cell>\r\n                    <Table.Cell textAlign=\"center\">\r\n                      <Icon\r\n                        name=\"minus\"\r\n                        style={{ float: \"left\", cursor: \"pointer\" }}\r\n                        onClick={() =>\r\n                          this.handleRemoveQuantityFromCart(\r\n                            order_item.item.slug\r\n                          )\r\n                        }\r\n                      />\r\n                      {order_item.quantity}\r\n                      <Icon\r\n                        name=\"plus\"\r\n                        style={{ float: \"right\", cursor: \"pointer\" }}\r\n                        onClick={() =>\r\n                          this.handleAddToCart(\r\n                            order_item.item.slug,\r\n                            order_item.item_variations\r\n                          )\r\n                        }\r\n                      />\r\n                    </Table.Cell>\r\n\r\n                    <Table.Cell>\r\n                      {order_item.item.discount_price && (\r\n                        <Label color=\"green\" ribbon>\r\n                          On Discount\r\n                        </Label>\r\n                      )}\r\n                      ${order_item.final_price}\r\n                      <Icon\r\n                        name=\"trash\"\r\n                        color=\"red\"\r\n                        style={{ float: \"right\", cursor: \"pointer\" }}\r\n                        onClick={() => this.handleRemoveItem(order_item.id)}\r\n                      ></Icon>\r\n                    </Table.Cell>\r\n                  </Table.Row>\r\n                );\r\n              })}\r\n              <Table.Row>\r\n                <Table.Cell />\r\n                <Table.Cell />\r\n                <Table.Cell />\r\n                <Table.Cell textAlign=\"right\" colSpan=\"2\">\r\n                  Order Total: ${data.total}\r\n                </Table.Cell>\r\n              </Table.Row>\r\n            </Table.Body>\r\n\r\n            <Table.Footer>\r\n              <Table.Row>\r\n                <Table.HeaderCell colSpan=\"5\" textAlign=\"right\">\r\n                  <Link to=\"/checkout\">\r\n                    <Button color=\"yellow\">Checkout</Button>\r\n                  </Link>\r\n                </Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Footer>\r\n          </Table>\r\n        )}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    isAuthenticated: state.auth.token !== null,\r\n  };\r\n};\r\nexport default connect(mapStateToProps)(OrderSummary);\r\n"]},"metadata":{},"sourceType":"module"}
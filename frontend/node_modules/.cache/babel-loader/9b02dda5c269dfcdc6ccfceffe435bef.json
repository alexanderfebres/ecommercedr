{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Alexander\\\\Desktop\\\\important\\\\ecommerceproject\\\\root\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:\\\\Users\\\\Alexander\\\\Desktop\\\\important\\\\ecommerceproject\\\\root\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\Alexander\\\\Desktop\\\\important\\\\ecommerceproject\\\\root\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Alexander\\\\Desktop\\\\important\\\\ecommerceproject\\\\root\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Alexander\\\\Desktop\\\\important\\\\ecommerceproject\\\\root\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Alexander\\\\Desktop\\\\important\\\\ecommerceproject\\\\root\\\\front\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import{Form,Select,Message}from\"semantic-ui-react\";import{addressCreateURL,addressUpdateURL}from\"./constants\";import{authAxios}from\"../Utils\";var UPDATE_FORM=\"UPDATE_FORM\";var CREATE_FORM=\"CREATE_FORM\";var AddressForm=/*#__PURE__*/function(_React$Component){_inherits(AddressForm,_React$Component);var _super=_createSuper(AddressForm);function AddressForm(){var _this;_classCallCheck(this,AddressForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={error:null,loading:false,formData:{address_type:\"\",apartment_address:\"\",country:\"\",default:false,id:\"\",street_address:\"\",user:1,zip:\"\"},saving:false,success:false};_this.handleToggleDefault=function(){var formData=_this.state.formData;var updatedFormdata=_objectSpread(_objectSpread({},formData),{},{default:!formData.default});_this.setState({formData:updatedFormdata});};_this.handleChange=function(e){var formData=_this.state.formData;var updatedFormdata=_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value));_this.setState({formData:updatedFormdata});};_this.handleSelectChange=function(e,_ref){var name=_ref.name,value=_ref.value;var formData=_this.state.formData;var updatedFormdata=_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value));_this.setState({formData:updatedFormdata});};_this.handleSubmit=function(e){_this.setState({saving:true});e.preventDefault();var formType=_this.props.formType;if(formType===UPDATE_FORM){_this.handleUpdateAddress();}else{_this.handleCreateAddress();}};_this.handleCreateAddress=function(){var _this$props=_this.props,userID=_this$props.userID,activeItem=_this$props.activeItem;var formData=_this.state.formData;authAxios.post(addressCreateURL,_objectSpread(_objectSpread({},formData),{},{user:userID,address_type:activeItem===\"billingAddress\"?\"B\":\"S\"})).then(function(res){_this.setState({saving:false,success:true,formData:{default:false}});_this.props.callback();}).catch(function(err){_this.setState({error:err});});};_this.handleUpdateAddress=function(){var _this$props2=_this.props,userID=_this$props2.userID,activeItem=_this$props2.activeItem;var formData=_this.state.formData;authAxios.put(addressUpdateURL(formData.id),_objectSpread(_objectSpread({},formData),{},{user:userID,address_type:activeItem===\"billingAddress\"?\"B\":\"S\"})).then(function(res){_this.setState({saving:false,success:true,formData:{default:false}});_this.props.callback();}).catch(function(err){_this.setState({error:err});});};return _this;}_createClass(AddressForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this$props3=this.props,address=_this$props3.address,formType=_this$props3.formType;if(formType===UPDATE_FORM){this.setState({formData:address});}}},{key:\"render\",value:function render(){var countries=this.props.countries;var _this$state=this.state,error=_this$state.error,formData=_this$state.formData,success=_this$state.success,saving=_this$state.saving;return/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSubmit,success:success,error:error},/*#__PURE__*/React.createElement(Form.Input,{required:true,name:\"street_address\",placeholder:\"Street address\",onChange:this.handleChange,value:formData.street_address}),/*#__PURE__*/React.createElement(Form.Input,{required:true,name:\"apartment_address\",placeholder:\"Apartment address\",onChange:this.handleChange,value:formData.apartment_address}),/*#__PURE__*/React.createElement(Form.Field,{required:true},/*#__PURE__*/React.createElement(Select,{loading:countries.length<1,fluid:true,clearable:true,search:true,options:countries,name:\"country\",placeholder:\"Country\",onChange:this.handleSelectChange,value:formData.country})),/*#__PURE__*/React.createElement(Form.Input,{required:true,name:\"zip\",placeholder:\"Zip code\",onChange:this.handleChange,value:formData.zip}),/*#__PURE__*/React.createElement(Form.Checkbox,{name:\"default\",label:\"Make this the default address?\",onChange:this.handleToggleDefault,checked:formData.default}),success&&/*#__PURE__*/React.createElement(Message,{success:true,header:\"Success!\",content:\"Your address was saved\"}),error&&/*#__PURE__*/React.createElement(Message,{error:true,header:\"There was an error\",content:JSON.stringify(error)}),/*#__PURE__*/React.createElement(Form.Button,{disabled:saving,loading:saving,secondary:true},\"Save\"));}}]);return AddressForm;}(React.Component);export default AddressForm;","map":{"version":3,"sources":["C:/Users/Alexander/Desktop/important/ecommerceproject/root/front/src/containers/AddressForm.js"],"names":["React","Form","Select","Message","addressCreateURL","addressUpdateURL","authAxios","UPDATE_FORM","CREATE_FORM","AddressForm","state","error","loading","formData","address_type","apartment_address","country","default","id","street_address","user","zip","saving","success","handleToggleDefault","updatedFormdata","setState","handleChange","e","target","name","value","handleSelectChange","handleSubmit","preventDefault","formType","props","handleUpdateAddress","handleCreateAddress","userID","activeItem","post","then","res","callback","catch","err","put","address","countries","length","JSON","stringify","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Form, Select, Message } from \"semantic-ui-react\";\r\nimport { addressCreateURL, addressUpdateURL } from \"./constants\";\r\nimport { authAxios } from \"../Utils\";\r\n\r\nconst UPDATE_FORM = \"UPDATE_FORM\";\r\nconst CREATE_FORM = \"CREATE_FORM\";\r\n\r\nclass AddressForm extends React.Component {\r\n  state = {\r\n    error: null,\r\n    loading: false,\r\n    formData: {\r\n      address_type: \"\",\r\n      apartment_address: \"\",\r\n      country: \"\",\r\n      default: false,\r\n      id: \"\",\r\n      street_address: \"\",\r\n      user: 1,\r\n      zip: \"\",\r\n    },\r\n    saving: false,\r\n    success: false,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { address, formType } = this.props;\r\n    if (formType === UPDATE_FORM) {\r\n      this.setState({ formData: address });\r\n    }\r\n  }\r\n\r\n  handleToggleDefault = () => {\r\n    const { formData } = this.state;\r\n    const updatedFormdata = {\r\n      ...formData,\r\n      default: !formData.default,\r\n    };\r\n    this.setState({\r\n      formData: updatedFormdata,\r\n    });\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    const { formData } = this.state;\r\n    const updatedFormdata = {\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    };\r\n    this.setState({\r\n      formData: updatedFormdata,\r\n    });\r\n  };\r\n\r\n  handleSelectChange = (e, { name, value }) => {\r\n    const { formData } = this.state;\r\n    const updatedFormdata = {\r\n      ...formData,\r\n      [name]: value,\r\n    };\r\n    this.setState({\r\n      formData: updatedFormdata,\r\n    });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    this.setState({ saving: true });\r\n    e.preventDefault();\r\n    const { formType } = this.props;\r\n    if (formType === UPDATE_FORM) {\r\n      this.handleUpdateAddress();\r\n    } else {\r\n      this.handleCreateAddress();\r\n    }\r\n  };\r\n\r\n  handleCreateAddress = () => {\r\n    const { userID, activeItem } = this.props;\r\n    const { formData } = this.state;\r\n    authAxios\r\n      .post(addressCreateURL, {\r\n        ...formData,\r\n        user: userID,\r\n        address_type: activeItem === \"billingAddress\" ? \"B\" : \"S\",\r\n      })\r\n      .then((res) => {\r\n        this.setState({\r\n          saving: false,\r\n          success: true,\r\n          formData: { default: false },\r\n        });\r\n        this.props.callback();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ error: err });\r\n      });\r\n  };\r\n\r\n  handleUpdateAddress = () => {\r\n    const { userID, activeItem } = this.props;\r\n    const { formData } = this.state;\r\n    authAxios\r\n      .put(addressUpdateURL(formData.id), {\r\n        ...formData,\r\n        user: userID,\r\n        address_type: activeItem === \"billingAddress\" ? \"B\" : \"S\",\r\n      })\r\n      .then((res) => {\r\n        this.setState({\r\n          saving: false,\r\n          success: true,\r\n          formData: { default: false },\r\n        });\r\n        this.props.callback();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({ error: err });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { countries } = this.props;\r\n    const { error, formData, success, saving } = this.state;\r\n    return (\r\n      <Form onSubmit={this.handleSubmit} success={success} error={error}>\r\n        <Form.Input\r\n          required\r\n          name=\"street_address\"\r\n          placeholder=\"Street address\"\r\n          onChange={this.handleChange}\r\n          value={formData.street_address}\r\n        />\r\n        <Form.Input\r\n          required\r\n          name=\"apartment_address\"\r\n          placeholder=\"Apartment address\"\r\n          onChange={this.handleChange}\r\n          value={formData.apartment_address}\r\n        />\r\n        <Form.Field required>\r\n          <Select\r\n            loading={countries.length < 1}\r\n            fluid\r\n            clearable\r\n            search\r\n            options={countries}\r\n            name=\"country\"\r\n            placeholder=\"Country\"\r\n            onChange={this.handleSelectChange}\r\n            value={formData.country}\r\n          />\r\n        </Form.Field>\r\n        <Form.Input\r\n          required\r\n          name=\"zip\"\r\n          placeholder=\"Zip code\"\r\n          onChange={this.handleChange}\r\n          value={formData.zip}\r\n        />\r\n        <Form.Checkbox\r\n          name=\"default\"\r\n          label=\"Make this the default address?\"\r\n          onChange={this.handleToggleDefault}\r\n          checked={formData.default}\r\n        />\r\n        {success && (\r\n          <Message success header=\"Success!\" content=\"Your address was saved\" />\r\n        )}\r\n        {error && (\r\n          <Message\r\n            error\r\n            header=\"There was an error\"\r\n            content={JSON.stringify(error)}\r\n          />\r\n        )}\r\n        <Form.Button disabled={saving} loading={saving} secondary>\r\n          Save\r\n        </Form.Button>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\nexport default AddressForm;\r\n"]},"metadata":{},"sourceType":"module"}
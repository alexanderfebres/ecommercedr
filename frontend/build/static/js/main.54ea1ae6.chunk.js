(this["webpackJsonpdjango-react-boilerplate"]=this["webpackJsonpdjango-react-boilerplate"]||[]).push([[0],{205:function(e,t,a){e.exports=a(362)},362:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(44),o=a.n(l),c=a(17),i=a(18),s=a(20),u=a(19),d=a(25),m=a(26),h=a(22),p=function(e){return e.children},f=a(37),g=a(383),E=a(384),v=a(374),y=a(386),b=a(381),C=a(380),S=a(45),A=a.n(S),O=function(e){return{type:"AUTH_SUCCESS",token:e}},k=function(e){return{type:"AUTH_FAIL",error:e}},w=function(){return localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),{type:"AUTH_LOGOUT"}},j=function(e){return function(t){setTimeout((function(){t(w())}),1e3*e)}},D="".concat("http://127.0.0.1:8000").concat("/api"),I="".concat(D,"/products/"),T="".concat(D,"/add-to-cart/"),_="".concat(D,"/order-summary/"),F="".concat(D,"/checkout/"),R="".concat(D,"/add-coupon/"),x="".concat(D,"/payments/"),U="".concat(D,"/user-id/"),H="".concat(D,"/countries/"),L="".concat(D,"/order-item/update-quantity/"),P="".concat(D,"/address/create/"),M=function(e){return"".concat(D,"/products/").concat(e,"/")},N=function(e){return"".concat(D,"/address/").concat(e,"/update/")},z=function(e){return"".concat(D,"/address/").concat(e,"/delete/")},B=function(e){return"".concat(D,"/order-item/").concat(e,"/delete/")},G=function(e){return"".concat(D,"/addresses/?address_type=").concat(e)},W=A.a.create({baseURL:D,headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}}),q=function(){return function(e){e({type:"CART_START"}),W.get(_).then((function(t){e({type:"CART_SUCCESS",data:t.data})})).catch((function(t){e({type:"CART_FAIL",error:t})}))}},V=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:""},e.handleChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){var a=e.state,n=a.username,r=a.password;e.props.login(n,r),e.setState({username:"",password:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,n=e.token,l=this.state,o=l.username,c=l.password;return n?r.a.createElement(h.a,{to:"/"}):r.a.createElement(g.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(g.a.Column,{style:{maxWidth:450}},r.a.createElement(E.a,{as:"h2",color:"teal",textAlign:"center"},"Log-in to your account"),t&&r.a.createElement("p",null,this.props.error.message),r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{size:"large",onSubmit:this.handleSubmit},r.a.createElement(y.a,{stacked:!0},r.a.createElement(v.a.Input,{onChange:this.handleChange,value:o,name:"username",fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,fluid:!0,value:c,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",type:"password"}),r.a.createElement(b.a,{color:"teal",fluid:!0,size:"large",loading:a,disabled:a},"Login"))),r.a.createElement(C.a,null,"New to us? ",r.a.createElement(d.c,{to:"/signup"},"Sign Up")))))}}]),a}(r.a.Component),J=Object(m.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{login:function(t,a){return e(function(e,t){return function(a){a({type:"AUTH_START"}),A.a.post("http://127.0.0.1:8000/rest-auth/login/",{username:e,password:t}).then((function(e){var t=e.data.key,n=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",n),a(O(t)),a(j(3600))})).catch((function(e){a(k(e))}))}}(t,a))},fetchCart:function(){return e(q())}}}))(V),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password1:"",password2:""},e.handleSubmit=function(t){var a=e.state,n=a.username,r=a.email,l=a.password1,o=a.password2;e.props.signup(n,r,l,o)},e.handleChange=function(t){e.setState(Object(f.a)({},t.target.name,t.target.value))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password1,l=e.password2,o=this.props,c=o.error,i=o.loading;return o.token?r.a.createElement(h.a,{to:"/"}):r.a.createElement(g.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(g.a.Column,{style:{maxWidth:450}},r.a.createElement(E.a,{as:"h2",color:"teal",textAlign:"center"},"Signup to your account"),c&&r.a.createElement("p",null,this.props.error.message),r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{size:"large",onSubmit:this.handleSubmit},r.a.createElement(y.a,{stacked:!0},r.a.createElement(v.a.Input,{onChange:this.handleChange,value:t,name:"username",fluid:!0,icon:"user",iconPosition:"left",placeholder:"Username"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,value:a,name:"email",fluid:!0,icon:"mail",iconPosition:"left",placeholder:"E-mail address"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,fluid:!0,value:n,name:"password1",icon:"lock",iconPosition:"left",placeholder:"Password",type:"password"}),r.a.createElement(v.a.Input,{onChange:this.handleChange,fluid:!0,value:l,name:"password2",icon:"lock",iconPosition:"left",placeholder:"Confirm password",type:"password"}),r.a.createElement(b.a,{color:"teal",fluid:!0,size:"large",loading:i,disabled:i},"Signup"))),r.a.createElement(C.a,null,"Already have an account? ",r.a.createElement(d.c,{to:"/login"},"Login")))))}}]),a}(r.a.Component),Y=Object(m.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,token:e.auth.token}}),(function(e){return{signup:function(t,a,n,r){return e(function(e,t,a,n){return function(r){r({type:"AUTH_START"}),A.a.post("http://127.0.0.1:8000/rest-auth/registration/",{username:e,email:t,password1:a,password2:n}).then((function(e){var t=e.data.key,a=new Date((new Date).getTime()+36e5);localStorage.setItem("token",t),localStorage.setItem("expirationDate",a),r(O(t)),r(j(3600))})).catch((function(e){r(k(e))}))}}(t,a,n,r))}}}))($),X=a(371),Q=a(379),K=a(372),Z=a(195),ee=a(375),te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,error:null,data:[]},e.handleAddToCart=function(t){e.setState({loading:!0}),W.post(T,{slug:t}).then((function(t){e.props.fetchCart(),e.setState({loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),A.a.get(I).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,l=t.loading;return r.a.createElement(X.a,null,n&&r.a.createElement(C.a,{error:!0,header:"There was some errors with your submission",content:JSON.stringify(n)}),l&&r.a.createElement(y.a,null,r.a.createElement(Q.a,{active:!0,inverted:!0},r.a.createElement(K.a,{inverted:!0},"Loading")),r.a.createElement(Z.a,{src:"/images/wireframe/short-paragraph.png"})),r.a.createElement(ee.a.Group,{divided:!0},a.map((function(t){return console.log(t.image),console.log(t),r.a.createElement(ee.a,{key:t.id},r.a.createElement(ee.a.Image,{src:t.image}),r.a.createElement(ee.a.Content,null,r.a.createElement(ee.a.Header,{as:"a",onClick:function(){return e.props.history.push("/products/".concat(t.id))}},t.title),r.a.createElement(ee.a.Meta,null,r.a.createElement("span",{className:"cinema"},t.category," ")),r.a.createElement(ee.a.Description,null,t.description)))}))))}}]),a}(r.a.Component),ae=Object(m.b)(null,(function(e){return{fetchCart:function(){return e(q())}}}))(te),ne=a(29),re=a(378),le=a(48),oe=a(373),ce=a(370),ie=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,error:null,data:[],formVisible:!1,formData:{}},e.handleToggleForm=function(){var t=e.state.formVisible;e.setState({formVisible:!t})},e.handleFetchItem=function(){var t=e.props.match.params;e.setState({loading:!0}),A.a.get(M(t.productID)).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleFormatData=function(e){return Object.keys(e).map((function(t){return e[t]}))},e.handleAddToCart=function(t){e.setState({loading:!0});var a=e.state.formData,n=e.handleFormatData(a);W.post(T,{slug:t,variations:n}).then((function(t){e.props.fetchCart(),e.setState({loading:!1}),e.props.history.push("/order-summary")})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleChange=function(t,a){var n=a.name,r=a.value,l=e.state.formData,o=Object(ne.a)(Object(ne.a)({},l),{},Object(f.a)({},n,r));e.setState({formData:o})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchItem()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,l=t.formData,o=t.formVisible,c=t.loading,i=a;return r.a.createElement(X.a,null,n&&r.a.createElement(C.a,{error:!0,header:"There was some errors with your submission",content:JSON.stringify(n)}),c&&r.a.createElement(y.a,null,r.a.createElement(Q.a,{active:!0,inverted:!0},r.a.createElement(K.a,{inverted:!0},"Loading")),r.a.createElement(Z.a,{src:"/images/wireframe/short-paragraph.png"})),r.a.createElement(g.a,{columns:2,divided:!0},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,null,r.a.createElement(re.a,{fluid:!0,image:i.image,header:i.title,meta:r.a.createElement(r.a.Fragment,null,i.category),description:i.description,extra:r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{fluid:!0,color:"yellow",floated:"right",icon:!0,labelPosition:"right",onClick:this.handleToggleForm},"Add to cart.",r.a.createElement(le.a,{name:"cart plus"})))}),o&&r.a.createElement(v.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,null),a.variations.map((function(t){var a=t.name.toLowerCase();return r.a.createElement(v.a.Field,{key:t.id},r.a.createElement(ce.a,{name:a,onChange:e.handleChange,options:t.item_variations.map((function(e){return{key:e.id,text:e.value,value:e.id}})),placeholder:"Choose a ".concat(a),selection:!0,value:l[a]}))})),r.a.createElement(v.a.Button,{onClick:function(){return e.handleAddToCart(i.slug)}},"Submit")))),r.a.createElement(g.a.Column,null,r.a.createElement(E.a,{as:"h2"},"Try different variations"),a.variations&&a.variations.map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(E.a,{as:"h3"},e.name),r.a.createElement(ee.a.Group,{divided:!0},e.item_variations.map((function(e){return r.a.createElement(ee.a,{key:e.id},e.attachment&&r.a.createElement(ee.a.Image,{size:"tiny",src:"http://127.0.0.1:8000".concat(e.attachment)}),r.a.createElement(ee.a.Content,{verticalAlign:"middle"},e.value))}))))}))))))}}]),a}(r.a.Component),se=Object(h.f)(Object(m.b)(null,(function(e){return{fetchCart:function(){return e(q())}}}))(ie)),ue=a(376),de=a(97),me=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={data:null,error:null,loading:!1},e.handleFetchOrder=function(){e.setState({loading:!0}),W.get(_).then((function(t){e.setState({data:t.data,loading:!1})})).catch((function(t){404===t.response.status?e.setState({error:"You currently do not have an order",loading:!1}):e.setState({error:t,loading:!1})}))},e.renderVariations=function(e){var t="";return e.item_variations.forEach((function(e){t+="".concat(e.variation.name,": ").concat(e.value,", ")})),t},e.handleFormatData=function(e){return Object.keys(e).map((function(t){return e[t].id}))},e.handleAddToCart=function(t,a){e.setState({loading:!0});var n=e.handleFormatData(a);W.post(T,{slug:t,variations:n}).then((function(t){e.handleFetchOrder(),e.setState({loading:!1})})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleRemoveQuantityFromCart=function(t){W.post(L,{slug:t}).then((function(t){e.handleFetchOrder()})).catch((function(t){e.setState({error:t})}))},e.handleRemoveItem=function(t){W.delete(B(t)).then((function(t){e.handleFetchOrder()})).catch((function(t){e.setState({error:t})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchOrder()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.error,l=t.loading;return this.props.isAuthenticated?(console.log(a),r.a.createElement(X.a,null,r.a.createElement(E.a,null,"Order Summary"),n&&r.a.createElement(C.a,{error:!0,header:"There was an error",content:JSON.stringify(n)}),l&&r.a.createElement(y.a,null,r.a.createElement(Q.a,{active:!0,inverted:!0},r.a.createElement(K.a,{inverted:!0},"Loading")),r.a.createElement(Z.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})),a&&r.a.createElement(ue.a,{celled:!0},r.a.createElement(ue.a.Header,null,r.a.createElement(ue.a.Row,null,r.a.createElement(ue.a.HeaderCell,null,"Item #"),r.a.createElement(ue.a.HeaderCell,null,"Item name"),r.a.createElement(ue.a.HeaderCell,null,"Item price"),r.a.createElement(ue.a.HeaderCell,null,"Item quantity"),r.a.createElement(ue.a.HeaderCell,null,"Total item price"))),r.a.createElement(ue.a.Body,null,a.order_items.map((function(t,a){return r.a.createElement(ue.a.Row,{key:t.id},r.a.createElement(ue.a.Cell,null,a+1),r.a.createElement(ue.a.Cell,null,t.item.title," -"," ",e.renderVariations(t)),r.a.createElement(ue.a.Cell,null,"$",t.item.price),r.a.createElement(ue.a.Cell,{textAlign:"center"},r.a.createElement(le.a,{name:"minus",style:{float:"left",cursor:"pointer"},onClick:function(){return e.handleRemoveQuantityFromCart(t.item.slug)}}),t.quantity,r.a.createElement(le.a,{name:"plus",style:{float:"right",cursor:"pointer"},onClick:function(){return e.handleAddToCart(t.item.slug,t.item_variations)}})),r.a.createElement(ue.a.Cell,null,t.item.discount_price&&r.a.createElement(de.a,{color:"green",ribbon:!0},"ON DISCOUNT"),"$",t.final_price,r.a.createElement(le.a,{name:"trash",color:"red",style:{float:"right",cursor:"pointer"},onClick:function(){return e.handleRemoveItem(t.id)}})))})),r.a.createElement(ue.a.Row,null,r.a.createElement(ue.a.Cell,null),r.a.createElement(ue.a.Cell,null),r.a.createElement(ue.a.Cell,null),r.a.createElement(ue.a.Cell,{textAlign:"right",colSpan:"2"},"Order Total: $",a.total))),r.a.createElement(ue.a.Footer,null,r.a.createElement(ue.a.Row,null,r.a.createElement(ue.a.HeaderCell,{colSpan:"5"},r.a.createElement(d.b,{to:"/checkout"},r.a.createElement(b.a,{floated:"right",color:"yellow"},"Checkout")))))))):r.a.createElement(h.a,{to:"/login"})}}]),a}(r.a.Component),he=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}))(me),pe=a(125),fe=a.n(pe),ge=a(191),Ee=a(67),ve=a(192),ye=Object(ve.a)("pk_test_51Ha0vNGV70HGHFAGYq6tdL9DjEXnL6uslIYoVA7TLvwLhW1EHWUWiMh0KM4PEkxkzCsy6Y0mbkjAdXCBzlPzJVbx00Mtss3kPN"),be=function(e){var t=e.data;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a.Group,{relaxed:!0},t.order_items.map((function(e,t){return r.a.createElement(ee.a,{key:t},r.a.createElement(ee.a.Image,{size:"tiny",src:"http://127.0.0.1:8000".concat(e.item.image)}),r.a.createElement(ee.a.Content,{verticalAlign:"middle"},r.a.createElement(ee.a.Header,{as:"a"},e.quantity," x ",e.item.title),r.a.createElement(ee.a.Extra,null,r.a.createElement(de.a,null,"$ ",e.final_price))))}))),r.a.createElement(ee.a.Group,null,r.a.createElement(ee.a.Content,null,r.a.createElement(ee.a.Header,null,"Order Total: $",t.total,t.coupon&&r.a.createElement(de.a,{color:"green",style:{marginLeft:"15px"}},"Current Coupon: ",t.coupon.code," for $",t.coupon.amount))))))},Ce=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={code:""},e.handleChange=function(t){e.setState({code:t.target.value})},e.handleSubmit=function(t){var a=e.state.code;e.props.handleAddCoupon(t,a),e.setState({code:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.code;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onSubmit:this.handleSubmit},r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Coupong Code"),r.a.createElement("input",{placeholder:"Enter a coupon",value:e,onChange:this.handleChange})),r.a.createElement(b.a,{type:"submit"},"Submit")))}}]),a}(r.a.Component),Se=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,error:null,success:!1,data:null,billing:[],shipping:[]},e.handleFetchBillingAddress=function(){W.get(G("B")).then((function(t){e.setState({billing:t.data})})).catch((function(t){e.setState({error:t})}))},e.handleFetchShippingAddress=function(){W.get(G("S")).then((function(t){e.setState({shipping:t.data})})).catch((function(t){e.setState({error:t})}))},e.handleFetchOrder=function(){e.setState({loading:!0}),W.get(_).then((function(t){e.setState({data:t.data,loading:!1}),e.handleFetchBillingAddress(),e.handleFetchShippingAddress()})).catch((function(t){404===t.response.status?(console.log(e.props.history),e.props.history.push("/")):e.setState({error:t,loading:!1})}))},e.handleAddCoupon=function(t,a){e.setState({loading:!0}),W.post(R,{code:a}).then((function(t){e.setState({loading:!1}),e.handleFetchOrder()})).catch((function(t){e.setState({error:t,loading:!1})}))},e.handleSubmit=function(){var t=Object(ge.a)(fe.a.mark((function t(a){var n,r,l,o,c,i,s;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.props,r=n.stripe,l=n.elements,r&&l){t.next=4;break}return t.abrupt("return");case 4:return e.setState({loading:!0}),o=l.getElement(Ee.CardElement),t.next=8,r.createPaymentMethod({type:"card",card:o});case 8:c=t.sent,i=c.error,s=c.paymentMethod,W.post(F,{stripeToken:s.card}).then((function(t){e.setState({loading:!1,success:!0})})).catch((function(t){e.setState({loading:!1,error:t})})),i?console.log("[error]",i):console.log("[PaymentMethod]",s);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchOrder()}},{key:"render",value:function(){var e=this,t=this.props.stripe,a=this.state,n=a.data,l=a.error,o=a.loading,c=a.success,i=a.shipping,s=a.billing;return r.a.createElement("div",null,l&&r.a.createElement(C.a,{error:!0,header:"There was some errors with your submission",content:JSON.stringify(l)}),o&&r.a.createElement(y.a,null,r.a.createElement(Q.a,{active:!0,inverted:!0},r.a.createElement(K.a,{inverted:!0},"Loading")),r.a.createElement(Z.a,{src:"/images/wireframe/short-paragraph.png"})),c&&r.a.createElement(C.a,{positive:!0},r.a.createElement(C.a.Header,null,"Your payment was successful"),r.a.createElement("p",null,"Go to you ",r.a.createElement("b",null,"profile")," to see the order delivery status.")),r.a.createElement(be,{data:n}),r.a.createElement(oe.a,null),r.a.createElement(Ce,{handleAddCoupon:function(t,a){return e.handleAddCoupon(t,a)}}),r.a.createElement(oe.a,null),s.length>=1&&i.length>=1?r.a.createElement("div",null,r.a.createElement(E.a,null,"Would you like to complete the purchase ?"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Ee.CardElement,null),r.a.createElement(b.a,{secondary:!0,type:"submit",disabled:!t,style:{marginTop:"10px"}},"Pay"))):r.a.createElement("div",null," ",r.a.createElement(E.a,{as:"h5"},r.a.createElement(d.b,{to:"/profile"},"Please go to your profile and provide your addresses.."))))}}]),a}(r.a.Component),Ae=Object(h.f)((function(){return r.a.createElement(X.a,{text:!0},r.a.createElement("h3",null,"Complete your Order"),r.a.createElement(Ee.Elements,{stripe:ye},r.a.createElement(Ee.ElementsConsumer,null,(function(e){var t=e.elements,a=e.stripe;return r.a.createElement(Se,{elements:t,stripe:a})}))))})),Oe=a(382),ke=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={payments:[]},e.handleFetchPayments=function(){e.setState({loading:!0}),W.get(x).then((function(t){e.setState({loading:!1,payments:t.data})})).catch((function(t){e.setState({error:t,loading:!1})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.handleFetchPayments()}},{key:"render",value:function(){var e=this.state.payments;return r.a.createElement(ue.a,{celled:!0},r.a.createElement(ue.a.Header,null,r.a.createElement(ue.a.Row,null,r.a.createElement(ue.a.HeaderCell,null,"ID"),r.a.createElement(ue.a.HeaderCell,null,"Amount"),r.a.createElement(ue.a.HeaderCell,null,"Date"))),r.a.createElement(ue.a.Body,null,e.map((function(e){return r.a.createElement(ue.a.Row,{key:e.id},r.a.createElement(ue.a.Cell,null,e.id),r.a.createElement(ue.a.Cell,null,"$",e.amount),r.a.createElement(ue.a.Cell,null,new Date(e.timestamp).toUTCString()))}))))}}]),a}(r.a.Component),we=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={error:null,loading:!1,formData:{address_type:"",apartment_address:"",country:"",default:!1,id:"",street_address:"",user:1,zip:""},saving:!1,success:!1},e.handleToggleDefault=function(){var t=e.state.formData,a=Object(ne.a)(Object(ne.a)({},t),{},{default:!t.default});e.setState({formData:a})},e.handleChange=function(t){var a=e.state.formData,n=Object(ne.a)(Object(ne.a)({},a),{},Object(f.a)({},t.target.name,t.target.value));e.setState({formData:n})},e.handleSelectChange=function(t,a){var n=a.name,r=a.value,l=e.state.formData,o=Object(ne.a)(Object(ne.a)({},l),{},Object(f.a)({},n,r));e.setState({formData:o})},e.handleSubmit=function(t){e.setState({saving:!0}),t.preventDefault(),"UPDATE_FORM"===e.props.formType?e.handleUpdateAddress():e.handleCreateAddress()},e.handleCreateAddress=function(){var t=e.props,a=t.userID,n=t.activeItem,r=e.state.formData;W.post(P,Object(ne.a)(Object(ne.a)({},r),{},{user:a,address_type:"billingAddress"===n?"B":"S"})).then((function(t){e.setState({saving:!1,success:!0,formData:{default:!1}}),e.props.callback()})).catch((function(t){e.setState({error:t})})),e.setState({formData:{address_type:"",apartment_address:"",country:"",default:!1,id:"",street_address:"",user:1,zip:""}})},e.handleUpdateAddress=function(){var t=e.props,a=t.userID,n=t.activeItem,r=e.state.formData;W.put(N(r.id),Object(ne.a)(Object(ne.a)({},r),{},{user:a,address_type:"billingAddress"===n?"B":"S"})).then((function(t){e.setState({saving:!1,success:!0,formData:{default:!1}}),e.props.callback()})).catch((function(t){e.setState({error:t})}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.address;"UPDATE_FORM"===e.formType&&this.setState({formData:t})}},{key:"render",value:function(){var e=this.props.countries,t=this.state,a=t.error,n=t.formData,l=t.success,o=t.saving;return r.a.createElement(v.a,{onSubmit:this.handleSubmit,success:l,error:a},r.a.createElement(v.a.Input,{required:!0,name:"street_address",placeholder:"Street address",onChange:this.handleChange,value:n.street_address}),r.a.createElement(v.a.Input,{required:!0,name:"apartment_address",placeholder:"Apartment address",onChange:this.handleChange,value:n.apartment_address}),r.a.createElement(v.a.Field,{required:!0},r.a.createElement(ce.a,{loading:e.length<1,fluid:!0,clearable:!0,search:!0,options:e,name:"country",placeholder:"Country",onChange:this.handleSelectChange,value:n.country})),r.a.createElement(v.a.Input,{required:!0,name:"zip",placeholder:"Zip code",onChange:this.handleChange,value:n.zip}),r.a.createElement(v.a.Checkbox,{name:"default",label:"Make this the default address?",onChange:this.handleToggleDefault,checked:n.default}),l&&r.a.createElement(C.a,{success:!0,header:"Success!",content:"Your address was saved"}),a&&r.a.createElement(C.a,{error:!0,header:"There was an error",content:JSON.stringify(a)}),r.a.createElement(v.a.Button,{disabled:o,loading:o,secondary:!0},"Save"))}}]),a}(r.a.Component),je="billingAddress",De=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(e=t.call.apply(t,[this].concat(l))).state={activeItem:"billingAddress",addresses:[],countries:[],userID:null,selectedAddress:null},e.handleItemClick=function(t){e.setState({activeItem:t},(function(){je=e.state.activeItem,e.props.fetchAddresses()}))},e.handleGetActiveItem=function(){var t=e.state.activeItem;return"billingAddress"===t?"Billing Address":"shippingAddress"===t?"Shipping Address":"Payment History"},e.handleFormatCountries=function(e){return Object.keys(e).map((function(t){return{key:t,text:e[t],value:t}}))},e.handleDeleteAddress=function(t){W.delete(z(t)).then((function(t){e.handleCallback()})).catch((function(t){e.setState({error:t})}))},e.handleSelectAddress=function(t){e.setState({selectedAddress:t})},e.handleFetchUserID=function(){W.get(U).then((function(t){e.setState({userID:t.data.userID})})).catch((function(t){e.setState({error:t})}))},e.handleFetchCountries=function(){W.get(H).then((function(t){e.setState({countries:e.handleFormatCountries(t.data)})})).catch((function(t){e.setState({error:t})}))},e.handleCallback=function(){e.props.fetchAddresses(),e.setState({selectedAddress:null})},e.renderAddresses=function(){var t=e.state,a=t.activeItem,n=t.addresses,l=t.countries,o=t.selectedAddress,c=t.userID;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a.Group,null,e.props.addressesList.map((function(t){return r.a.createElement(re.a,{key:t.id},r.a.createElement(re.a.Content,null,t.default&&r.a.createElement(de.a,{as:"a",color:"blue",ribbon:"right"},"Default"),r.a.createElement(re.a.Header,null,t.street_address,", ",t.apartment_address),r.a.createElement(re.a.Meta,null,t.country),r.a.createElement(re.a.Description,null,t.zip)),r.a.createElement(re.a.Content,{extra:!0},r.a.createElement(b.a,{color:"yellow",onClick:function(){return e.handleSelectAddress(t)}},"Update"),r.a.createElement(b.a,{color:"red",onClick:function(){return e.handleDeleteAddress(t.id)}},"Delete")))}))),n.length>0?r.a.createElement(oe.a,null):null,null===o?r.a.createElement(we,{activeItem:a,countries:l,formType:"CREATE_FORM",userID:c,callback:e.handleCallback}):null,o&&r.a.createElement(we,{activeItem:a,userID:c,countries:l,address:o,formType:"UPDATE_FORM",callback:e.handleCallback}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchAddresses(),this.handleFetchCountries(),this.handleFetchUserID()}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeItem,n=t.error,l=t.loading;return this.props.isAuthenticated?r.a.createElement(g.a,{container:!0,columns:2,divided:!0},r.a.createElement(g.a.Row,{columns:1},r.a.createElement(g.a.Column,null,n&&r.a.createElement(C.a,{error:!0,header:"There was an error",content:JSON.stringify(n)}),l&&r.a.createElement(y.a,null,r.a.createElement(Q.a,{active:!0,inverted:!0},r.a.createElement(K.a,{inverted:!0},"Loading")),r.a.createElement(Z.a,{src:"/images/wireframe/short-paragraph.png"})))),r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{width:6},r.a.createElement(Oe.a,{pointing:!0,vertical:!0,fluid:!0},r.a.createElement(Oe.a.Item,{name:"Billing Address",active:"billingAddress"===a,onClick:function(){return e.handleItemClick("billingAddress")}}),r.a.createElement(Oe.a.Item,{name:"Shipping Address",active:"shippingAddress"===a,onClick:function(){return e.handleItemClick("shippingAddress")}}),r.a.createElement(Oe.a.Item,{name:"Payment history",active:"paymentHistory"===a,onClick:function(){return e.handleItemClick("paymentHistory")}}))),r.a.createElement(g.a.Column,{width:10},r.a.createElement(E.a,null,this.handleGetActiveItem()),r.a.createElement(oe.a,null),"paymentHistory"===a?r.a.createElement(ke,null):this.renderAddresses()))):r.a.createElement(h.a,{to:"/login"})}}]),a}(r.a.Component),Ie=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token,addressesList:e.address.addressList}}),(function(e){return{fetchAddresses:function(){return e((t="billingAddress"===je?"B":"S",function(e){e({type:"ADDRESS_START"}),W.get(G(t)).then((function(t){e({type:"ADDRESS_SUCCESS",data:t.data})})).catch((function(t){e({type:"ADDRESS_FAIL",error:t})}))}));var t}}}))(De),Te=function(){return r.a.createElement(p,null,r.a.createElement(h.b,{exact:!0,path:"/products",component:ae}),r.a.createElement(h.b,{path:"/products/:productID",component:se}),r.a.createElement(h.b,{path:"/order-summary",component:he}),r.a.createElement(h.b,{path:"/checkout",component:Ae}),r.a.createElement(h.b,{path:"/profile",component:Ie}),r.a.createElement(h.b,{path:"/login",component:J}),r.a.createElement(h.b,{path:"/signup",component:Y}),r.a.createElement(h.b,{exact:!0,path:"/",component:ae}))},_e=(a(361),a(74)),Fe=a(377),Re=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchCart()}},{key:"render",value:function(){var e=this,t=this.props,a=t.authenticated,n=t.cart,l=t.loading;return r.a.createElement("div",null,r.a.createElement(Oe.a,{inverted:!0},r.a.createElement(X.a,null,r.a.createElement(d.b,{to:"/products"},r.a.createElement(Oe.a.Item,{header:!0},"Products")),a?r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a.Menu,{position:"right"},r.a.createElement(d.b,{to:"/profile"},r.a.createElement(Oe.a.Item,null,"Profile")),r.a.createElement(_e.a,{icon:"cart",loading:l,text:"".concat(null!==n?n.order_items.length:0),pointing:!0,className:"link item"},r.a.createElement(_e.a.Menu,null,null!==n?r.a.createElement(r.a.Fragment,null,n.order_items.map((function(e){return r.a.createElement(_e.a.Item,{key:e.id},e.quantity," x ",e.item.title)})),n.order_items.length<1?r.a.createElement(_e.a.Item,null,"No items in your cart"):null,r.a.createElement(_e.a.Divider,null),r.a.createElement(_e.a.Item,{icon:"arrow right",text:"Checkout",onClick:function(){return e.props.history.push("/order-summary")}})):r.a.createElement(_e.a.Item,null,"No items in your cart"))),r.a.createElement(Oe.a.Item,{header:!0,onClick:function(){return e.props.logout()}},"Logout"))):r.a.createElement(Oe.a.Menu,{position:"right"},r.a.createElement(d.b,{to:"/login"},r.a.createElement(Oe.a.Item,{header:!0},"Login")),r.a.createElement(d.b,{to:"/signup"},r.a.createElement(Oe.a.Item,{header:!0},"Signup"))))),this.props.children,r.a.createElement("br",null),r.a.createElement(y.a,{inverted:!0,vertical:!0,style:{padding:"5em 4em"}},r.a.createElement(X.a,null,r.a.createElement(g.a,{divided:!0,inverted:!0,stackable:!0},r.a.createElement(g.a.Row,null,r.a.createElement(g.a.Column,{width:3},r.a.createElement(E.a,{inverted:!0,as:"h4",content:"About"}),r.a.createElement(Fe.a,{link:!0,inverted:!0},r.a.createElement(Fe.a.Item,{as:"a"},"Sitemap"),r.a.createElement(Fe.a.Item,{as:"a"},"Contact Us"),r.a.createElement(Fe.a.Item,{as:"a"},"Religious Ceremonies"),r.a.createElement(Fe.a.Item,{as:"a"},"Gazebo Plans"))),r.a.createElement(g.a.Column,{width:3},r.a.createElement(E.a,{inverted:!0,as:"h4",content:"Services"}),r.a.createElement(Fe.a,{link:!0,inverted:!0},r.a.createElement(Fe.a.Item,{as:"a"},"Banana Pre-Order"),r.a.createElement(Fe.a.Item,{as:"a"},"DNA FAQ"),r.a.createElement(Fe.a.Item,{as:"a"},"How To Access"),r.a.createElement(Fe.a.Item,{as:"a"},"Favorite X-Men"))),r.a.createElement(g.a.Column,{width:7},r.a.createElement(E.a,{as:"h4",inverted:!0},"What are you waiting for ?"),r.a.createElement("p",null,"Go purshase some of this amazing articles, you wont'asd regret it.")))))))}}]),a}(r.a.Component),xe=Object(h.f)(Object(m.b)((function(e){return{authenticated:null!==e.auth.token,cart:e.cart.shoppingCart,loading:e.cart.loading}}),(function(e){return{logout:function(){return e(w())},fetchCart:function(){return e(q())}}}))(Re)),Ue=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.onTryAutoSignup()}},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(xe,this.props,r.a.createElement(Te,null)))}}]),a}(n.Component),He=Object(m.b)((function(e){return{isAuthenticated:null!==e.auth.token}}),(function(e){return{onTryAutoSignup:function(){return e((function(e){var t=localStorage.getItem("token");if(void 0===t)e(w());else{var a=new Date(localStorage.getItem("expirationDate"));a<=new Date?e(w()):(e(O(t)),e(j((a.getTime()-(new Date).getTime())/1e3)))}}))}}}))(Ue),Le=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pe(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Me=a(54),Ne=a(194),ze=function(e,t){return Object(ne.a)(Object(ne.a)({},e),t)},Be={token:null,error:null,loading:!1},Ge=function(e,t){return ze(e,{error:null,loading:!0})},We=function(e,t){return ze(e,{token:t.token,error:null,loading:!1})},qe=function(e,t){return ze(e,{error:t.error,loading:!1})},Ve=function(e,t){return ze(e,{token:null})},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Ge(e);case"AUTH_SUCCESS":return We(e,t);case"AUTH_FAIL":return qe(e,t);case"AUTH_LOGOUT":return Ve(e);default:return e}},$e={shoppingCart:null,error:null,loading:!1},Ye=function(e,t){return ze(e,{error:null,loading:!0})},Xe=function(e,t){return ze(e,{shoppingCart:t.data,error:null,loading:!1})},Qe=function(e,t){return ze(e,{error:t.error,loading:!1})},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_START":return Ye(e);case"CART_SUCCESS":return Xe(e,t);case"CART_FAIL":return Qe(e,t);default:return e}},Ze={addressList:[],error:null,loading:!1},et=function(e,t){return ze(e,{error:null,loading:!0})},tt=function(e,t){return ze(e,{addressList:t.data,error:null,loading:!1})},at=function(e,t){return ze(e,{error:t.error,loading:!1})},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADDRESS_START":return et(e);case"ADDRESS_SUCCESS":return tt(e,t);case"ADDRESS_FAIL":return at(e,t);default:return e}},rt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Me.d,lt=Object(Me.c)({auth:Je,cart:Ke,address:nt}),ot=Object(Me.e)(lt,rt(Object(Me.a)(Ne.a))),ct=r.a.createElement(m.a,{store:ot},r.a.createElement(He,null));o.a.render(ct,document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Le?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Pe(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Pe(e)}))}}()}},[[205,1,2]]]);
//# sourceMappingURL=main.54ea1ae6.chunk.js.map